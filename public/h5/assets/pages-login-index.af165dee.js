import{_ as o,u as e,s as l,y as a,q as t,x as n,a8 as s,O as i,o as c,c as r,w as d,j as u,g,i as f,t as m,h as p,v as h,J as _,z as b,a9 as k}from"./index-8ad0b3d0.js";import{p as x}from"./package.7ed6ea01.js";const y=e(l);const C=o({data:()=>({loginForm:{account:"",password:"",code:"",client_id:""},forget:!1,packData:x,globalConfig:y.globalConfig}),watch:{forget(o){o&&(this.loginForm.password="123456")}},mounted(){const o=Math.floor(19*Math.random()+2);this.loginForm.account=138e8+o,this.loginForm.password="123456"},methods:{sendCode(){if(!this.loginForm.account)return a({title:"请输入账号！",icon:"none"}),!1;let o={account:this.loginForm.account,type:1};this.$api.LoginApi.sendCode(o).then((o=>{a({title:o.msg,icon:"none"})}))},register(){t({url:"/pages/login/register"})},login(){if(""==this.loginForm.account)return a({title:"请输入账号！",icon:"none"}),!1;if(""==this.loginForm.password)return a({title:"请输入密码！",icon:"none"}),!1;let o=n("client_id");o&&(this.loginForm.client_id=o),this.$api.LoginApi.login(this.loginForm).then((o=>{if(0==o.code){s("authToken",o.data.authToken);let e=o.data.userInfo;this.socketIo.send({type:"bindUid",user_id:e.user_id}),y.login(e),i({url:"/pages/index/index"})}}))}}},[["render",function(o,e,l,a,t,n){const s=u,i=h,x=_,y=b,C=k;return c(),r(s,null,{default:d((()=>[g(s,{style:{height:"150rpx"}}),g(s,{class:"padding im-flex im-rows im-justify-content-center mb-10"},{default:d((()=>[g(s,{class:"im-flex im-rows im-justify-content-center"},{default:d((()=>[g(i,{class:"login-logo",src:t.globalConfig.sysInfo.logo??t.packData.logo,mode:"fixWidth"},null,8,["src"])])),_:1})])),_:1}),g(s,{class:"im-flex im-rows im-justify-content-center"},{default:d((()=>[f(m(t.globalConfig.sysInfo.name??t.packData.name),1)])),_:1}),g(C,null,{default:d((()=>[g(s,{class:"cu-form-group margin-top"},{default:d((()=>[g(s,{class:"title"},{default:d((()=>[f("账号")])),_:1}),g(x,{placeholder:"账号",maxlength:"32",name:"input",modelValue:t.loginForm.account,"onUpdate:modelValue":e[0]||(e[0]=o=>t.loginForm.account=o)},null,8,["modelValue"])])),_:1}),t.forget?(c(),r(s,{key:1,class:"cu-form-group"},{default:d((()=>[g(s,{class:"title"},{default:d((()=>[f("验证码")])),_:1}),g(x,{placeholder:"请输入验证码",maxlength:"6",name:"input",modelValue:t.loginForm.code,"onUpdate:modelValue":e[2]||(e[2]=o=>t.loginForm.code=o)},null,8,["modelValue"]),g(y,{class:"cu-btn bg-blue shadow",onClick:n.sendCode},{default:d((()=>[f("发送验证码")])),_:1},8,["onClick"])])),_:1})):(c(),r(s,{key:0,class:"cu-form-group"},{default:d((()=>[g(s,{class:"title"},{default:d((()=>[f("密码")])),_:1}),g(x,{placeholder:"请输入密码",maxlength:"32",type:"password",name:"input",modelValue:t.loginForm.password,"onUpdate:modelValue":e[1]||(e[1]=o=>t.loginForm.password=o)},null,8,["modelValue"])])),_:1}))])),_:1}),g(s,{class:"forget"},{default:d((()=>[g(s,{class:"text-blue",onClick:e[3]||(e[3]=o=>t.forget=!t.forget)},{default:d((()=>[f(m(t.forget?"密码登陆":"忘记密码"),1)])),_:1})])),_:1}),g(s,{class:"flex flex-direction im-login-btn"},{default:d((()=>[g(y,{class:"cu-btn lg bg-blue",onClick:e[4]||(e[4]=o=>n.login())},{default:d((()=>[f("登录")])),_:1})])),_:1}),t.globalConfig&&1==t.globalConfig.sysInfo.regtype?(c(),r(s,{key:0,class:"flex flex-direction im-reg-btn"},{default:d((()=>[g(y,{class:"cu-btn lg bg-white",onClick:e[5]||(e[5]=o=>n.register())},{default:d((()=>[f("注册")])),_:1})])),_:1})):p("",!0),t.globalConfig&&t.globalConfig.demon_mode?(c(),r(s,{key:1,class:"m-20 c-666"},{default:d((()=>[g(s,{class:"f-16 remark-title mb-10"},{default:d((()=>[f("站点仅用于演示，演示账号")])),_:1}),g(s,{class:"c-999"},{default:d((()=>[f("账号：13800000002~13800000020")])),_:1}),g(s,{class:"c-999"},{default:d((()=>[f("密码：123456")])),_:1})])),_:1})):p("",!0),g(s,{class:"footer-version c-999"},{default:d((()=>[f(m(t.globalConfig.sysInfo.name&&t.packData.name)+" for "+m(t.packData.version),1)])),_:1})])),_:1})}],["__scopeId","data-v-5b8175af"]]);export{C as default};
