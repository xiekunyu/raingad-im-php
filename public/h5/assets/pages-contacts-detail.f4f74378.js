import{_ as e,k as t,s as a,q as l,l as s,p as i,a8 as n,m as c,x as d,o as u,c as o,w as r,i as f,f as g,h as m,n as _,t as b,g as x,b as h,F as k,e as y,r as p,j as C,y as I}from"./index-655f7239.js";const N=t(a),F=l(a);s(N);const M=e({data:()=>({modelName:"",detail:{},userInfo:F.userInfo,globalConfig:F.globalConfig}),computed:{},onLoad(e){this.$api.msgApi.getUserInfo({user_id:e.id}).then((e=>{0==e.code&&(this.detail=e.data)}))},methods:{sendMsg(e){i({url:"/pages/message/chat?id="+e.user_id})},sex:e=>["女","男","未知"][e]||"未知",callPhone(){n({phoneNumber:this.detail.account})},calling(e){this.modelName="";let t=this.$util.getUuid();i({url:"/pages/message/call?msg_id="+t+"&type="+e+"&status=1&id="+this.detail.user_id+"&name="+this.detail.displayName+"&avatar="+encodeURI(this.detail.avatar)})},delFriend(){c({title:"确定要删除该好友吗？",success:e=>{if(e.confirm){let e={id:this.detail.user_id};this.$api.friendApi.delFriend(e).then((t=>{0==t.code&&N.deleteContacts(e)}))}}})},addFriend(){c({title:"请输入验证信息",editable:!0,success:e=>{if(e.confirm){if(""==e.content)return d({title:"请输入备注！",icon:"error"});this.$api.friendApi.addFriend({user_id:this.detail.user_id,remark:e.content}).then((e=>{0==e.code&&d({title:e.msg,icon:"none"})}))}}})},setNickname(){let e=this.detail.friend.friend_user_id??"";if(!this.detail.friend)return d({title:"无法设置",icon:"error"});c({title:"请输入备注信息",editable:!0,success:t=>{if(t.confirm){if(""==t.content)return d({title:"请输入好友备注！",icon:"error"});this.$api.friendApi.setNickname({friend_id:e,nickname:t.content}).then((e=>{0==e.code&&(this.detail.friend.nickname=t.content,d({title:e.msg,icon:"none"}))}))}}})}}},[["render",function(e,t,a,l,s,i){const n=p("cu-custom"),c=f,d=C,N=I;return u(),o(c,null,{default:r((()=>[g(n,{bgColor:"bg-gradual-green",isBack:!0},{backText:r((()=>[])),content:r((()=>[m("个人信息")])),_:1}),g(c,{class:"padding flex justify-start align-center"},{default:r((()=>[g(c,{class:"cu-avatar lg radius mr-15",style:_("background-image:url("+s.detail.avatar+")")},null,8,["style"]),g(c,{class:"im-flex im-justify-content-start im-columns"},{default:r((()=>[g(c,{class:"mb-5"},{default:r((()=>[m(b(s.detail.realname),1)])),_:1}),g(c,{class:"text-gray"},{default:r((()=>[m(b(s.detail.account),1)])),_:1})])),_:1})])),_:1}),g(c,{class:"cu-list menu"},{default:r((()=>[2==s.globalConfig.sysInfo.runMode&&s.detail.friend&&s.userInfo.user_id!=s.detail.user_id?(u(),o(c,{key:0,class:"cu-item",onClick:i.setNickname},{default:r((()=>[g(c,{class:"content"},{default:r((()=>[g(d,{class:"cuIcon-edit text-green"}),g(d,null,{default:r((()=>[m("备注")])),_:1})])),_:1}),g(c,{class:"action"},{default:r((()=>[g(d,{class:"text-grey text-sm"},{default:r((()=>[m(b(s.detail.friend.nickname||"未设置"),1)])),_:1}),g(d,{class:"text-grey text-sm ml-5 cuIcon-write"})])),_:1})])),_:1},8,["onClick"])):x("",!0),g(c,{class:"cu-item"},{default:r((()=>[g(c,{class:"content"},{default:r((()=>[g(d,{class:"cuIcon-mail text-green"}),g(d,null,{default:r((()=>[m("邮箱")])),_:1})])),_:1}),g(c,{class:"action"},{default:r((()=>[g(d,{class:"text-grey text-sm"},{default:r((()=>[m(b(s.detail.email??"raingad@foxmail.com"),1)])),_:1})])),_:1})])),_:1}),g(c,{class:"cu-item"},{default:r((()=>[g(c,{class:"content"},{default:r((()=>[g(d,{class:"cuIcon-safe text-green"}),g(d,null,{default:r((()=>[m("性别")])),_:1})])),_:1}),g(c,{class:"action"},{default:r((()=>[g(d,{class:"text-grey text-sm"},{default:r((()=>[m(b(i.sex(s.detail.sex)),1)])),_:1})])),_:1})])),_:1}),g(c,{class:"cu-item"},{default:r((()=>[g(c,{class:"content"},{default:r((()=>[g(d,{class:"cuIcon-location text-green"}),g(d,null,{default:r((()=>[m("IP")])),_:1})])),_:1}),g(c,{class:"action"},{default:r((()=>[s.detail.last_login_ip?(u(),o(d,{key:0,class:"text-grey text-sm"},{default:r((()=>[m(b(s.detail.last_login_ip||"未知")+" （"+b(s.detail.location||"未知")+"）",1)])),_:1})):(u(),o(d,{key:1,class:"text-grey text-sm"},{default:r((()=>[m("未知")])),_:1}))])),_:1})])),_:1})])),_:1}),s.userInfo.user_id!=s.detail.user_id?(u(),h(k,{key:0},[1==s.globalConfig.sysInfo.runMode||s.detail.friend?(u(),o(c,{key:0,class:"padding flex flex-direction"},{default:r((()=>[g(N,{class:"cu-btn bg-green lg",onClick:t[0]||(t[0]=e=>i.sendMsg(s.detail))},{default:r((()=>[m("发消息")])),_:1}),s.detail.account?(u(),o(N,{key:0,class:"cu-btn bg-blue margin-tb-sm lg",onClick:t[1]||(t[1]=e=>i.callPhone())},{default:r((()=>[m("打电话")])),_:1})):x("",!0),g(N,{class:"cu-btn bg-grey lg",onClick:t[2]||(t[2]=e=>s.modelName="callRtc")},{default:r((()=>[m("音视频通话")])),_:1}),2==s.globalConfig.sysInfo.runMode?(u(),o(N,{key:1,class:"cu-btn bg-red margin-tb-sm lg",onClick:t[3]||(t[3]=e=>i.delFriend())},{default:r((()=>[m("删除好友")])),_:1})):x("",!0)])),_:1})):x("",!0),2!=s.globalConfig.sysInfo.runMode||s.detail.friend?x("",!0):(u(),o(c,{key:1,class:"padding flex flex-direction"},{default:r((()=>[g(N,{class:"cu-btn bg-green lg",onClick:t[4]||(t[4]=e=>i.addFriend())},{default:r((()=>[m("加好友")])),_:1})])),_:1}))],64)):x("",!0),g(c,{class:y(["cu-modal bottom-modal","callRtc"==s.modelName?"show":""])},{default:r((()=>[g(c,{class:"cu-dialog"},{default:r((()=>[g(c,{class:"manage-content"},{default:r((()=>[g(c,{class:"cu-list menu bg-white"},{default:r((()=>[g(c,{class:"cu-item",onClick:t[5]||(t[5]=e=>i.calling(0))},{default:r((()=>[g(c,{class:"content padding-tb-sm"},{default:r((()=>[g(d,{class:"cuIcon-dianhua"}),g(d,null,{default:r((()=>[m("语音通话")])),_:1})])),_:1})])),_:1}),g(c,{class:"cu-item",onClick:t[6]||(t[6]=e=>i.calling(1))},{default:r((()=>[g(c,{class:"content padding-tb-sm"},{default:r((()=>[g(d,{class:"cuIcon-record"}),g(d,null,{default:r((()=>[m("视频通话")])),_:1})])),_:1})])),_:1}),g(c,{class:"parting-line-5"}),g(c,{class:"cu-item",onClick:t[7]||(t[7]=e=>s.modelName="")},{default:r((()=>[g(c,{class:"content padding-tb-sm"},{default:r((()=>[g(d,{class:"c-red"},{default:r((()=>[m("取消")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])])),_:1})}]]);export{M as default};
