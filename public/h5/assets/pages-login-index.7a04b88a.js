import{_ as e,q as o,s as l,x as a,p as s,J as t,a8 as n,O as i,o as r,c as d,w as c,i as u,f as g,h as m,t as f,g as p,v as h,I as _,y as b,a9 as k}from"./index-88b4c777.js";import{p as x}from"./package.175629ee.js";const y=o(l);const F=e({data:()=>({loginForm:{username:"",password:"",code:"",client_id:""},forget:!1,packData:x,globalConfig:y.globalConfig}),watch:{forget(e){e&&(this.loginForm.password="123456")}},mounted(){const e=Math.floor(19*Math.random()+2);this.loginForm.username=138e8+e,this.loginForm.password="123456"},methods:{sendCode(){if(!this.loginForm.username)return a({title:"请输入账号！",icon:"none"}),!1;let e={account:this.loginForm.username,type:1};this.$api.LoginApi.sendCode(e).then((e=>{a({title:e.msg,icon:"none"})}))},register(){s({url:"/pages/login/register"})},login(e){if(""==this.loginForm.username)return a({title:"请输入账号！",icon:"none"}),!1;if(""==this.loginForm.password)return a({title:"请输入密码！",icon:"none"}),!1;let o=t("client_id");o&&(this.loginForm.client_id=o),this.$api.LoginApi.login(this.loginForm).then((e=>{if(0==e.code){n("authToken",e.data.authToken);let o=e.data.userInfo;this.socketIo.send({type:"bindUid",user_id:o.user_id}),y.login(o),i({url:"/pages/index/index"})}}))}}},[["render",function(e,o,l,a,s,t){const n=u,i=h,x=_,y=b,F=k;return r(),d(n,null,{default:c((()=>[g(n,{style:{height:"150rpx"}}),g(n,{class:"padding im-flex im-rows im-justify-content-center mb-10"},{default:c((()=>[g(n,{class:"im-flex im-rows im-justify-content-center"},{default:c((()=>[g(i,{class:"login-logo",src:s.globalConfig.sysInfo.logo??s.packData.logo,mode:"fixWidth"},null,8,["src"])])),_:1})])),_:1}),g(n,{class:"im-flex im-rows im-justify-content-center"},{default:c((()=>[m(f(s.globalConfig.sysInfo.name??s.packData.name),1)])),_:1}),g(F,null,{default:c((()=>[g(n,{class:"cu-form-group margin-top"},{default:c((()=>[g(n,{class:"title"},{default:c((()=>[m("账号")])),_:1}),g(x,{placeholder:"账号",maxlength:"32",name:"input",modelValue:s.loginForm.username,"onUpdate:modelValue":o[0]||(o[0]=e=>s.loginForm.username=e)},null,8,["modelValue"])])),_:1}),s.forget?(r(),d(n,{key:1,class:"cu-form-group"},{default:c((()=>[g(n,{class:"title"},{default:c((()=>[m("验证码")])),_:1}),g(x,{placeholder:"请输入验证码",maxlength:"6",name:"input",modelValue:s.loginForm.code,"onUpdate:modelValue":o[2]||(o[2]=e=>s.loginForm.code=e)},null,8,["modelValue"]),g(y,{class:"cu-btn bg-blue shadow",onClick:t.sendCode},{default:c((()=>[m("发送验证码")])),_:1},8,["onClick"])])),_:1})):(r(),d(n,{key:0,class:"cu-form-group"},{default:c((()=>[g(n,{class:"title"},{default:c((()=>[m("密码")])),_:1}),g(x,{placeholder:"请输入密码",maxlength:"32",type:"password",name:"input",modelValue:s.loginForm.password,"onUpdate:modelValue":o[1]||(o[1]=e=>s.loginForm.password=e)},null,8,["modelValue"])])),_:1}))])),_:1}),g(n,{class:"forget"},{default:c((()=>[g(n,{class:"text-blue",onClick:o[3]||(o[3]=e=>s.forget=!s.forget)},{default:c((()=>[m(f(s.forget?"密码登陆":"忘记密码"),1)])),_:1})])),_:1}),g(n,{class:"flex flex-direction im-login-btn"},{default:c((()=>[g(y,{class:"cu-btn lg bg-blue",onClick:o[4]||(o[4]=e=>t.login())},{default:c((()=>[m("登录")])),_:1})])),_:1}),1==s.globalConfig.sysInfo.regtype?(r(),d(n,{key:0,class:"flex flex-direction im-reg-btn"},{default:c((()=>[g(y,{class:"cu-btn lg bg-white",onClick:o[5]||(o[5]=e=>t.register())},{default:c((()=>[m("注册")])),_:1})])),_:1})):p("",!0),s.globalConfig.demon_mode?(r(),d(n,{key:1,class:"m-20 c-666"},{default:c((()=>[g(n,{class:"f-16 remark-title mb-10"},{default:c((()=>[m("站点仅用于演示，演示账号")])),_:1}),g(n,{class:"c-999"},{default:c((()=>[m("账号：13800000002~13800000020")])),_:1}),g(n,{class:"c-999"},{default:c((()=>[m("密码：123456")])),_:1})])),_:1})):p("",!0),g(n,{class:"footer-version c-999"},{default:c((()=>[m(f(s.globalConfig.sysInfo.name??s.packData.name)+" for "+f(s.packData.version),1)])),_:1})])),_:1})}],["__scopeId","data-v-e33b4b02"]]);export{F as default};
