import{_ as t,o as e,c as a,w as s,f as l,b as i,d as n,F as r,i as c,S as o,e as d,h as u,t as m,Z as h,g as p,j as f,k as g,s as y,l as x,p as _,n as C,E as b,G as k,H as v,v as T,r as w,I as B,a0 as I}from"./index-118ee3a3.js";const S=t({name:"breadcrum",props:{tree:{type:Array,default:()=>({})},icon:{type:String,default:()=>"cuIcon-right"}},data:()=>({}),methods:{open(t){this.$emit("openBread",t)}}},[["render",function(t,g,y,x,_,C){const b=c,k=f,v=o;return e(),a(b,null,{default:s((()=>[l(v,{class:"folder-wap","scroll-x":!0,"scroll-left":99999999},{default:s((()=>[l(b,{class:"im-flex im-justify-content-start im-align-items-center"},{default:s((()=>[(e(!0),i(r,null,n(y.tree,((i,n)=>(e(),a(b,{class:"tab-item im-flex im-justify-content-start im-align-items-center",onClick:t=>C.open(i),key:n},{default:s((()=>[l(b,{class:d(["mar10 lz-tree-name font-color-999",{"font-color-333":n==y.tree.length-1}])},{default:s((()=>[u(m(i.name),1)])),_:2},1032,["class"]),h(t.$slots,"icon",{},(()=>[n<y.tree.length-1?(e(),a(k,{key:0,class:d(["font-color-999",[y.icon?y.icon:"cuIcon-right"]])},null,8,["class"])):p("",!0)]),!0)])),_:2},1032,["onClick"])))),128))])),_:3})])),_:3})])),_:3})}],["__scopeId","data-v-b66ec5ca"]]),D=""+new URL("group-bd7ace3c.png",import.meta.url).href,L=g(y),{contacts:j}=x(L);const M=t({components:{breadcurm:S},name:"contacts",props:{TabCur:{type:Number,default:0}},data(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,paddingB:this.inlineTools,tabbarH:50,hidden:!0,listCurID:"",list:[],listCur:"",scrollLeft:0,msgs:j,tree:[{id:1,name:"技术部"},{id:2,name:"产品部"},{id:3,name:"信息部"}],depList:[{id:1,name:"技术部"},{id:2,name:"财务部"}],userList:[{id:1,realname:"张三",avatar:"https://api.multiavatar.com/raingad1.png?apikey=zdvXV3W4MjwhP9"},{id:2,realname:"李四",avatar:"https://api.multiavatar.com/raingad2.png?apikey=zdvXV3W4MjwhP9"}],tabList:["普通通讯录","企业通讯录"],contacts:[]}},watch:{msgs(t){this.initContacts(t)}},created(){this.listCur=this.contacts[0]},mounted(){this.initContacts(this.msgs)},methods:{initContacts(t){const e=JSON.parse(JSON.stringify(t)).filter((t=>0==t.is_group)).sort(((t,e)=>"#"===t.index?1:"#"===e.index?-1:t.index.localeCompare(e.index,"zh"))).reduce(((t,e)=>{const a=e.index,s=t.findIndex((t=>t.name===a));return-1===s?t.push({name:a,children:[e]}):t[s].children.push(e),t}),[]);this.contacts=e},openDep(t){},openDetails(t){_({url:"/pages/contacts/detail?id="+t.id})},openGroup(){_({url:"/pages/contacts/group"})},tabSelect(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},getCur(t){this.hidden=!1,this.listCur=this.contacts[t.target.id].name},setCur(t){this.hidden=!0,this.listCur=this.listCur},tMove(t){let e=t.touches[0].clientY,a=this.boxTop,s=this;if(e>a){let t=parseInt((e-a)/20);this.listCur=s.contacts[t].name}},tStart(){this.hidden=!1},tEnd(){this.hidden=!0,this.listCurID=this.listCur},indexSelect(t){let e=this,a=this.barHeight,s=this.contacts,l=Math.ceil(s.length*t.detail.y/a);for(let i=0;i<s.length;i++)if(l<i+1)return e.listCur=s[i].name,e.movableY=20*i,!1}}},[["render",function(t,h,g,y,x,_){const S=T,L=f,j=c,M=w("Empty"),V=o,z=B,E=w("breadcurm"),N=I;return e(),a(j,null,{default:s((()=>[0==g.TabCur?(e(),a(V,{key:0,"scroll-y":"",class:"indexes","scroll-into-view":"indexes-"+x.listCurID,style:C([{height:"calc(100vh - "+(x.CustomBar+t.inlineTools+x.StatusBar)+"px)"}]),"scroll-with-animation":!0,"enable-back-to-top":!0},{default:s((()=>[l(j,{style:{"padding-bottom":"150rpx"}},{default:s((()=>[l(j,{class:"cu-list menu mt-10"},{default:s((()=>[l(j,{class:"cu-item arrow",onClick:_.openGroup},{default:s((()=>[l(j,{class:"content"},{default:s((()=>[l(S,{src:D,class:"png",mode:"aspectFit"}),l(L,{class:"text-grey"},{default:s((()=>[u("群聊")])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1}),(e(!0),i(r,null,n(x.contacts,((t,c)=>(e(),a(j,{key:c,class:d("indexItem-"+t.name),id:"indexes-"+t.name,"data-index":t.name},{default:s((()=>[l(j,{class:"padding"},{default:s((()=>[u(m(t.name),1)])),_:2},1024),l(j,{class:"cu-list menu-avatar no-padding"},{default:s((()=>[(e(!0),i(r,null,n(t.children,((t,i)=>(e(),a(j,{class:"cu-item",key:i,onClick:e=>_.openDetails(t)},{default:s((()=>[l(j,{class:"cu-avatar lg radius mr-15",style:C([{backgroundImage:"url("+t.avatar+")"}])},null,8,["style"]),l(j,{class:"content"},{default:s((()=>[l(j,{class:"text-grey"},{default:s((()=>[u(m(t.displayName),1)])),_:2},1024),l(j,{class:"text-gray text-sm"},{default:s((()=>[u(m(t.account),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1032,["class","id","data-index"])))),128)),x.contacts.length?p("",!0):(e(),a(M,{key:0,noDatatext:"暂无联系人",textcolor:"#999"}))])),_:1})])),_:1},8,["scroll-into-view","style"])):p("",!0),1==g.TabCur?(e(),a(j,{key:1,class:"cu-bar bg-white search fixed",style:C([{top:x.CustomBar+"px"}])},{default:s((()=>[l(j,{class:"search-form round"},{default:s((()=>[l(L,{class:"cuIcon-search"}),l(z,{type:"text",modelValue:t.keywords,"onUpdate:modelValue":h[0]||(h[0]=e=>t.keywords=e),placeholder:"输入搜索的关键词","confirm-type":"search"},null,8,["modelValue"])])),_:1})])),_:1},8,["style"])):p("",!0),1==g.TabCur?(e(),a(V,{key:2,"scroll-y":"",class:"indexes","scroll-into-view":"indexes-"+x.listCurID,style:C([{top:"50px",height:"calc(100vh - "+(x.CustomBar+t.inlineTools+x.StatusBar+50)+"px)"}]),"scroll-with-animation":!0,"enable-back-to-top":!0},{default:s((()=>[l(j,{class:""},{default:s((()=>[l(E,{tree:x.tree,onOpenBread:_.openDep},null,8,["tree","onOpenBread"])])),_:1}),l(j,{class:"im-department-list"},{default:s((()=>[(e(!0),i(r,null,n(x.depList,((t,i)=>(e(),a(N,{class:"im-flex im-justify-content-start im-align-items-center mt-10",onClick:e=>_.openDep(t),key:i},{default:s((()=>[l(j,{class:"im-folder-bar mr-10"},{default:s((()=>[l(L,{class:"cuIcon-file color-blue"})])),_:1}),l(j,{class:"im-list-body im-border-b"},{default:s((()=>[l(j,{class:"im-list-title word"},{default:s((()=>[u(m(t.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(e(!0),i(r,null,n(x.userList,((t,i)=>(e(),a(N,{class:"im-flex im-justify-content-start im-align-items-center mt-10",key:t.id,url:"/pages/contacts/detail?user_id="+t.id},{default:s((()=>[l(j,{class:"im-folder-bar im-image mr-10"},{default:s((()=>[l(S,{src:t.avatar,mode:"widthFix"},null,8,["src"])])),_:2},1024),l(j,{class:"im-list-body im-border-b"},{default:s((()=>[l(j,{class:"im-list-title word"},{default:s((()=>[u(m(t.realname),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"])))),128)),0==x.depList.length&&0==x.userList.length?(e(),a(M,{key:0})):p("",!0)])),_:1})])),_:1},8,["scroll-into-view","style"])):p("",!0),0==g.TabCur?(e(),a(j,{key:3,class:"indexBar",style:C([{height:"calc(100vh - "+x.CustomBar+"px - 50px)"}])},{default:s((()=>[l(j,{class:"indexBar-box",onTouchstart:_.tStart,onTouchend:_.tEnd,onTouchmove:b(_.tMove,["stop"])},{default:s((()=>[(e(!0),i(r,null,n(x.contacts,((t,l)=>(e(),a(j,{class:"indexBar-item",key:l,id:l,onTouchstart:_.getCur,onTouchend:_.setCur},{default:s((()=>[u(m(t.name),1)])),_:2},1032,["id","onTouchstart","onTouchend"])))),128))])),_:1},8,["onTouchstart","onTouchend","onTouchmove"])])),_:1},8,["style"])):p("",!0),k(l(j,{class:"indexToast"},{default:s((()=>[u(m(x.listCur),1)])),_:1},512),[[v,!x.hidden]])])),_:1})}],["__scopeId","data-v-7c9515c6"]]);export{M as default};
