import{_ as e,u as a,s as l,x as s,B as t,q as o,o as n,c as u,w as i,j as r,g as d,i as f,t as c,h as g,d as m,e as h,F as p,n as I,r as x,v as _,k as v,J as y,a6 as b,a5 as C,ab as k,y as V,a7 as S,ar as A}from"./index-4eea144c.js";const U=a(l);const B=e({data:()=>({loginStore:U,globalConfig:U.globalConfig,userInfo:U.userInfo,sexList:[{id:"2",name:"未知"},{id:"1",name:"男"},{id:"0",name:"女"}],saved:!1}),mounted(){},methods:{logout(){let e=s("client_id");this.$api.LoginApi.logout({client_id:e}).then((e=>{0==e.code&&U.logout()}))},textareaBInput(e){this.userInfo.motto=e.detail.value},changeSex(e){this.userInfo.sex=parseInt(e.detail.value)},saveInfo(){if(""==this.userInfo.realname)return t({title:"请输入昵称",icon:"none"}),!1;this.saved=!0;let e={realname:this.userInfo.realname,email:this.userInfo.email,sex:this.userInfo.sex,motto:this.userInfo.motto};this.$api.msgApi.updateUserInfo(e).then((e=>{if(0==e.code){t({title:"保存成功",icon:"none"});let e=JSON.parse(JSON.stringify(this.userInfo));U.login(e)}})),setTimeout((()=>{this.saved=!1}),8e3)},setAvatar(){o({url:"/pages/mine/avatar"})}}},[["render",function(e,a,l,s,t,o){const U=x("cu-custom"),B=r,J=_,L=v,M=y,j=S,w=A,N=b,O=C,T=k,$=V;return n(),u(B,null,{default:i((()=>[d(U,{bgColor:"bg-gradual-green",isBack:!0},{backText:i((()=>[])),content:i((()=>[f("个人信息")])),_:1}),d(T,null,{default:i((()=>[d(B,{class:"cu-form-group",style:{height:"140rpx"}},{default:i((()=>[d(B,{class:"title"},{default:i((()=>[f("头像")])),_:1}),d(B,{class:"im-flex im-align-items-center",onClick:o.setAvatar},{default:i((()=>[d(J,{src:t.userInfo.avatar,style:{height:"50px",width:"50px"}},null,8,["src"]),f(),d(L,{class:"cuIcon-right ml-10 f-18 text-grey"})])),_:1},8,["onClick"])])),_:1}),d(B,{class:"cu-form-group"},{default:i((()=>[d(B,{class:"title"},{default:i((()=>[f("账号")])),_:1}),d(B,{class:"text-gray"},{default:i((()=>[f(c(t.userInfo.account),1)])),_:1})])),_:1}),d(B,{class:"cu-form-group"},{default:i((()=>[d(B,{class:"title"},{default:i((()=>[f(c(1==t.globalConfig.sysInfo.runMode?"姓名":"昵称"),1)])),_:1}),t.globalConfig.sysInfo.runMode?(n(),u(B,{key:0,class:"text-gray"},{default:i((()=>[f(c(t.userInfo.realname),1)])),_:1})):g("",!0),t.globalConfig.sysInfo.runMode?g("",!0):(n(),u(M,{key:1,class:"uni-input",style:{"text-align":"right"},modelValue:t.userInfo.realname,"onUpdate:modelValue":a[0]||(a[0]=e=>t.userInfo.realname=e),focus:"",placeholder:"请输入昵称"},null,8,["modelValue"]))])),_:1}),d(B,{class:"cu-form-group"},{default:i((()=>[d(B,{class:"title"},{default:i((()=>[f("e-mail")])),_:1}),d(M,{class:"uni-input",style:{"text-align":"right"},modelValue:t.userInfo.email,"onUpdate:modelValue":a[1]||(a[1]=e=>t.userInfo.email=e),focus:"",placeholder:"请输入email地址"},null,8,["modelValue"])])),_:1}),d(B,{class:"cu-form-group"},{default:i((()=>[d(B,{class:"title"},{default:i((()=>[f("性别")])),_:1}),d(B,null,{default:i((()=>[d(N,{onChange:o.changeSex},{default:i((()=>[(n(!0),m(p,null,h(t.sexList,(e=>(n(),u(w,{class:"radio mr-10"},{default:i((()=>[d(j,{name:"sex",value:e.id,checked:t.userInfo.sex==e.id},null,8,["value","checked"]),f(" "+c(e.name),1)])),_:2},1024)))),256))])),_:1},8,["onChange"])])),_:1})])),_:1}),d(B,{class:"cu-form-group align-start"},{default:i((()=>[d(B,{class:"title"},{default:i((()=>[f("个性签名")])),_:1}),d(O,{maxlength:"-1",modelValue:t.userInfo.motto,"onUpdate:modelValue":a[2]||(a[2]=e=>t.userInfo.motto=e),placeholder:"请输入个性签名"},null,8,["modelValue"])])),_:1})])),_:1}),d(B,{class:"padding flex flex-direction"},{default:i((()=>[d($,{class:"cu-btn bg-green lg",style:I(t.saved?"border: solid 1px #dbdada;":""),disabled:t.saved,onClick:a[3]||(a[3]=e=>o.saveInfo())},{default:i((()=>[f("保存")])),_:1},8,["style","disabled"])])),_:1})])),_:1})}]]);export{B as default};
