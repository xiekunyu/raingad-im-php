(function(){var t={7292:function(t,e,s){"use strict";s.d(e,{Z:function(){return x}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-main"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入关键字搜索聊天"},model:{value:t.params.keywords,callback:function(e){t.$set(t.params,"keywords",e)},expression:"params.keywords"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchMessage},slot:"append"})],1),e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"全部",name:"all"}},[e("div",{staticClass:"el-tab-body-list"},[e("el-scrollbar",[t.dataList.length?t._l(t.dataList,(function(t,s){return e("ChatItem",{key:s,attrs:{data:t}})})):e("div",[e("el-empty",{attrs:{description:"暂无数据"}})],1)],2)],1)]),e("el-tab-pane",{attrs:{label:"文本",name:"text"}},[e("div",{staticClass:"el-tab-body-list"},[t.dataList.length?[e("el-scrollbar",t._l(t.dataList,(function(t,s){return e("ChatItem",{key:s,attrs:{data:t}})})),1)]:e("div",[e("el-empty",{attrs:{description:"暂无数据"}})],1)],2)]),e("el-tab-pane",{attrs:{label:"图片",name:"image"}},[e("div",{staticClass:"el-tab-body-list"},[t.dataList.length?[e("el-scrollbar",[e("el-row",{staticStyle:{}},t._l(t.dataList,(function(s,i){return e("ChatImage",{key:i,attrs:{data:s,previewUrl:t.previewList}})})),1)],1)]:e("div",[e("el-empty",{attrs:{description:"暂无数据"}})],1)],2)]),e("el-tab-pane",{attrs:{label:"视频",name:"video"}},[e("div",{staticClass:"el-tab-body-list"},[t.dataList.length?[e("el-scrollbar",t._l(t.dataList,(function(t,s){return e("ChatItem",{key:s,attrs:{data:t}})})),1)]:e("div",[e("el-empty",{attrs:{description:"暂无数据"}})],1)],2)]),e("el-tab-pane",{attrs:{label:"文件",name:"file"}},[e("div",{staticClass:"el-tab-body-list"},[t.dataList.length?[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataList,height:"450"}},[e("el-table-column",{attrs:{prop:"fileName",label:"文件",width:"300"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"chat-file"},[e("div",[e("el-image",{staticClass:"fileExt",attrs:{fit:"cover",src:t.fileExt(s.row.fileName)}})],1),e("div",{staticClass:"fileName"},[t._v(t._s(s.row.fileName))])])]}}],null,!1,1885044645)}),e("el-table-column",{attrs:{prop:"sendTime",label:"上传时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatTime(e.row.sendTime))+" ")]}}],null,!1,349674723)}),e("el-table-column",{attrs:{prop:"fileSize",label:"大小",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.fileSize(e.row.fileSize))+" ")]}}],null,!1,3523241436)}),e("el-table-column",{attrs:{prop:"fromUser.realname",label:"上传者",width:"100"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.downloadFile(s.row)}}},[t._v("下载")])]}}],null,!1,2401469366)})],1)]:e("div",[e("el-empty",{attrs:{description:"暂无数据"}})],1)],2)])],1),e("el-pagination",{attrs:{background:"","hide-on-single-page":t.singlePage,"page-size":t.params.limit,"current-page":t.params.page,layout:"prev, pager, next",total:t.total},on:{"update:pageSize":function(e){return t.$set(t.params,"limit",e)},"update:page-size":function(e){return t.$set(t.params,"limit",e)},"update:currentPage":function(e){return t.$set(t.params,"page",e)},"update:current-page":function(e){return t.$set(t.params,"page",e)},"current-change":t.handleCurrentChange}})],1)},a=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-list-item"},[e("div",{staticClass:"chat-list-avatar",on:{click:function(e){return t.$user(t.data.fromUser.id)}}},[e("el-avatar",{attrs:{shape:"square",size:"medium",src:t.data.fromUser.avatar}})],1),e("div",{staticClass:"chat-list-body"},[e("div",{staticClass:"chat-list-title"},[t._v(" "+t._s(t.data.fromUser.realname)+" "),e("span",{staticClass:"time"},[t._v(" "+t._s(t.formatTime(t.data.sendTime)))])]),"text"==t.data.type?e("div",{staticClass:"chat-list-text",domProps:{innerHTML:t._s(t.data.content)}}):t._e(),"text"==t.data.type?e("div",{staticClass:"chat-list-tools"},[e("el-tooltip",{attrs:{effect:"dark",content:"复制文本",placement:"top"}},[e("i",{staticClass:"el-icon-document-copy",on:{click:function(e){return t.copyText(t.data.content)}}})])],1):t._e(),"image"==t.data.type?e("div",{staticClass:"chat-list-image"},[e("el-image",{staticStyle:{"max-width":"300px"},attrs:{src:t.data.content,"z-index":3e3,"preview-src-list":[t.data.content],fit:"contain"}})],1):t._e(),"video"==t.data.type?e("div",{staticClass:"chat-list-video"},[e("video",{staticStyle:{"max-width":"300px"},attrs:{src:t.data.content,controls:""}})]):t._e(),"file"==t.data.type?e("div",{staticClass:"chat-list-file"},[e("el-card",{staticStyle:{width:"260px"},attrs:{"body-style":{padding:"10px 10px 0 10px"}}},[e("div",{staticClass:"chat-file-content"},[e("div",{staticClass:"chat-file-ext"},[e("el-image",{staticStyle:{width:"35px"},attrs:{src:t.fileExt(t.data.fileName),fit:"fill"}})],1),e("div",{staticClass:"chat-file-title"},[e("div",{staticClass:"chat-file-name"},[e("span",{staticClass:"fileName"},[t._v(t._s(t.data.fileName)+" ")]),e("span",{staticClass:"fileSize"},[t._v("("+t._s(t.fileSize(t.data.fileSize))+")")])]),e("div",{staticClass:"chat-file-remark"},[t._v(" 文件已成功发送, 文件助手永久保存 ")])])]),e("hr"),e("div",{staticClass:"bottom clearfix",attrs:{align:"right"}},[e("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(e){return t.downloadFile(t.data)}}},[t._v("下载")]),e("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(e){return t.onlinePreview(t.data)}}},[t._v("在线预览")])],1)])],1):t._e()])])},o=[],r=s(2325),l=s(3817),c={name:"chatItem",props:{data:{type:Object,default:{}}},computed:{formatTime(){return function(t){return t=parseInt(t/1e3),(0,r.hT)("Y/m/d H:i:s",t)}},fileSize(){return function(t){return(0,l.hR)(t)}},fileExt(){return function(t){return(0,l.AC)(t)}}},data(){return{}},methods:{copyText(t){this.$clipboard(t),this.$message({type:"success",message:"复制成功!"})},onlinePreview(t){this.$preview(t.preview)},downloadFile(t){(0,l.LR)(t.content,t.fileName)}},created(){}},d=c,u=s(1001),p=(0,u.Z)(d,n,o,!1,null,"294ef229",null),m=p.exports,h=function(){var t=this,e=t._self._c;return e("div",[e("el-col",{staticStyle:{padding:"0 12px 12px 0"},attrs:{span:6}},["image"==t.data.type?e("el-card",{attrs:{"body-style":{padding:"0px"}}},[e("el-image",{staticStyle:{width:"100%",height:"120px"},attrs:{src:t.data.content,"preview-src-list":t.previewUrl,"z-index":9999,fit:"cover"}}),e("div",{staticStyle:{padding:"10px"}},[e("div",{staticClass:"bottom clearfix"},[e("time",{staticClass:"time"},[t._v(t._s(t.data.fromUser.realname)+" 上传于 "+t._s(t.formatTime(t.data.sendTime)))])])])],1):t._e()],1)],1)},g=[],f={name:"chatImage",props:{data:{type:Object,default:{}},previewUrl:{type:Array,default:function(){return[]}}},computed:{formatTime(){return function(t){return t=parseInt(t/1e3),(0,r.hT)("Y/m/d",t)}},fileSize(){return function(t){return(0,l.hR)(t)}},fileExt(){return function(t){return(0,l.AC)(t)}}},data(){return{currentDate:new Date}},methods:{copyText(t){this.$clipboard(t),this.$message({type:"success",message:"复制成功!"})},downloadFile(t){(0,l.LR)(t.content,t.fileName)}},created(){}},v=f,w=(0,u.Z)(v,h,g,!1,null,"94e9276a",null),C=w.exports,b={name:"chatRecord",components:{ChatItem:m,ChatImage:C},props:{contact:{type:Object,default:{}}},computed:{formatTime(){return function(t){return t/=1e3,(0,r.hT)("Y/m/d H:i:s",t)}},fileSize(){return function(t){return(0,l.hR)(t)}},fileExt(){return function(t){return(0,l.AC)(t)}}},data(){return{activeName:"all",total:0,singlePage:!1,dataList:[],previewList:[],params:{toContactId:this.contact.id,is_group:this.contact.is_group,type:"all",keywords:"",page:1,limit:20}}},methods:{handleClick(t,e){this.params.page=1,this.params.type=t.name,this.getMessage()},searchMessage(){this.getMessage()},getMessage(){this.$api.imApi.getMessageListAPI(this.params).then((t=>{this.dataList=t.data,this.total=t.count,t.count<=this.params.limit?this.singlePage=!0:this.singlePage=!1,"image"==this.params.type&&(this.previewList=(0,r.Nj)(t.data,"content",!1))})).catch((t=>{console.log(t)}))},handleCurrentChange(t){this.params.page=t,this.getMessage()},downloadFile(t){(0,l.LR)(t.content,t.fileName,t.type)}},created(){this.getMessage()},mounted(){}},_=b,y=(0,u.Z)(_,i,a,!1,null,"7b6994c6",null),x=y.exports},6038:function(t,e,s){"use strict";s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.visible,modal:!0,width:t.width,"append-to-body":""},on:{close:t.closeDialog}},[e("el-transfer",{attrs:{filterable:"",titles:t.createChatTitles,"filter-placeholder":"请输入关键词",props:t.contactsProps,data:t.allUser},model:{value:t.selectUid,callback:function(e){t.selectUid=e},expression:"selectUid"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.comfirmChat}},[t._v("确 定")])],1)],1)},a=[],n={name:"manageGroup",props:{title:{type:String,default:"选择聊天"},visible:{type:Boolean,default:!1},width:{type:String,default:"612px"},allUser:{type:Array,default:()=>[]}},data(){return{createChatTitles:["用户列表","已选用户"],selectUid:[],contactsProps:{key:"id",label:"realname"}}},mounted(){},methods:{closeDialog(){this.$emit("update:visible",!1),this.selectUid=[]},comfirmChat(){0!==this.selectUid.length?this.$emit("selectChat",this.selectUid):this.$message.error("请选择聊天对象")}}},o=n,r=s(1001),l=(0,r.Z)(o,i,a,!1,null,null,null),c=l.exports},3007:function(t,e,s){"use strict";s.d(e,{Z:function(){return p}});var i=function(){var t=this,e=t._self._c;return e("el-container",{staticStyle:{height:"100%"}},[e("el-header",{staticClass:"file-header"},[e("div",{staticClass:"file-header-title"},[t._v("文件列表")]),e("div",{staticClass:"file-header-search"},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入关键字搜索","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFileList.apply(null,arguments)}},model:{value:t.params.keywords,callback:function(e){t.$set(t.params,"keywords",e)},expression:"params.keywords"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getFileList},slot:"append"})],1)],1)]),e("el-container",[e("el-aside",{staticClass:"lz-flex group-box",attrs:{width:"150px"}},[e("div",{staticClass:"group-box-list"},t._l(t.fileType,(function(s){return e("div",{key:s.id,staticClass:"chat-item",class:t.params.cate==s.id?"active":"",on:{click:function(e){return t.openFolder(s)}}},[t._v(" "+t._s(s.name)+" ")])})),0)]),e("el-main",{staticClass:"lz-flex group-box group-user-box no-padding"},[t.fileList.length?e("div",{staticClass:"group-box-list"},[e("el-scrollbar",[e("div",{staticClass:"file-list"},t._l(t.fileList,(function(s,i){return e("el-tooltip",{key:i,staticClass:"item",attrs:{effect:"dark",placement:"right"}},[e("template",{slot:"content"},[e("p",{staticClass:"mb-5"},[t._v("名称："+t._s(s.name))]),e("p",[t._v("大小："+t._s(t.getFileSize(s.size)))])]),e("div",{staticClass:"file-item",on:{dblclick:function(e){return t.openFile(s.preview)}}},[e("div",{staticClass:"file-img"},[e("el-image",{staticClass:"img",attrs:{fit:"contain",src:s.extUrl}})],1),e("div",{staticClass:"file-name mt-5",attrs:{align:"center"}},[t._v(t._s(s.name))]),e("div",{staticClass:"file-opt"},[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.openFile(s.preview)}}},[t._v("查看")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.downloadFile(s)}}},[t._v("下载")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.openDialog(s)}}},[t._v("发送")])],1)])],2)})),1)])],1):e("div",{staticClass:"pd-40"},[e("el-empty")],1),t.singlePage?t._e():e("div",{staticClass:"group-box-page",attrs:{align:"center"}},[e("el-pagination",{attrs:{background:"","hide-on-single-page":t.singlePage,"current-page":t.params.page,"page-sizes":[20,50,100,200,300,400,500],"page-size":t.params.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleChange,"current-change":t.getFileList,"update:currentPage":function(e){return t.$set(t.params,"page",e)},"update:current-page":function(e){return t.$set(t.params,"page",e)},"update:pageSize":function(e){return t.$set(t.params,"limit",e)},"update:page-size":function(e){return t.$set(t.params,"limit",e)}}})],1),e("ChooseDialog",{attrs:{visible:t.visible,title:"发送到聊天",allUser:t.$store.state.allContacts},on:{"update:visible":function(e){t.visible=e},selectChat:t.sendChat}})],1)],1)],1)},a=[],n=(s(7658),s(6038)),o=s(3817),r=s(2325),l={components:{ChooseDialog:n.Z},props:{isAll:{type:Number,default:0}},computed:{getFileSize(){return function(t){return o.hR(t)}}},data(){return{params:{page:1,limit:20,keywords:"",cate:0,is_all:this.isAll,role:0},visible:!1,singlePage:!0,total:0,curFile:{},fileType:[{id:0,name:"所有文件",icon:""},{id:1,name:"文档",icon:""},{id:2,name:"图片",icon:""},{id:3,name:"音频",icon:""},{id:4,name:"视频",icon:""},{id:5,name:"其他文件",icon:""}],fileList:[]}},mounted(){this.getFileList()},methods:{changeRole(t){this.params.role=t,this.getFileList()},openFolder(t){this.params.cate=t.id,this.getFileList()},getFileList(){this.$api.imApi.getFileList(this.params).then((t=>{0==t.code&&(this.fileList=t.data,this.total=t.count,this.singlePage=t.count<=this.params.limit,this.params.page=t.page)}))},handleChange(t){this.params.limit=t,this.getFileList()},openFile(t){t?this.$preview(t):this.$message.error("文件不存在")},downloadFile(t){t.download&&(window.location=t.download)},openDialog(t){this.visible=!0,this.curFile=t},sendChat(t){if(t.length>5)return this.$message.error("转发的人数不能超过5人！");let e=this.$store.state.userInfo;this.forwardBox=!1;let s={type:this.curFile.msg_type,content:this.curFile.src,file_name:this.curFile.name,file_size:this.curFile.size,fromUser:{id:e.user_id,displayName:e.realname,avatar:e.avatar,account:e.account}};var i=[];t.forEach((t=>{let e=t.toString(),a=JSON.parse(JSON.stringify(s));a.id=r.NW(),a.status="successd",a.sendTime=(new Date).getTime(),a.toContactId=e,a.is_group=0,-1!=e.indexOf("group")&&(a.is_group=1),i.push(this.test(a))})),Promise.all(i).then((t=>{})).catch((t=>{console.log("error",t)})),this.$message.success("发送成功！"),this.visible=!1},fn(t){return new Promise(((e,s)=>{this.$api.imApi.sendMessageAPI(t).then((t=>{0===t.code?e(t):this.$message.error(t.msg)})).catch((t=>{}))}))},async test(t){let e=await this.fn(t);return e}}},c=l,d=s(1001),u=(0,d.Z)(c,i,a,!1,null,"2caf8634",null),p=u.exports},880:function(t,e,s){"use strict";s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.visible,modal:!0,width:t.width,"append-to-body":""},on:{open:t.openDialog,close:t.closeDialog}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isAdd,expression:"isAdd"}],staticClass:"mb-20"},[t._v(" 群聊名称："),e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入群聊名称"},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}}),t._v(" "),e("span",{staticClass:"ml-10 c-999"},[t._v(" （必填项）")])],1),e("el-transfer",{attrs:{filterable:"",titles:t.createChatTitles,"filter-placeholder":"请输入关键词",props:t.defaultProps,data:t.allUser},model:{value:t.selectUid,callback:function(e){t.selectUid=e},expression:"selectUid"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.manageGroup}},[t._v("确 定")])],1)],1)},a=[],n={name:"manageGroup",props:{title:{type:String,default:"创建群聊"},visible:{type:Boolean,default:!1},userIds:{type:Array,default:()=>[]},isAdd:{type:Boolean,default:!0},width:{type:String,default:"612px"}},data(){return{createChatTitles:["用户列表","已选用户"],selectUid:[],allUser:[],groupName:"",defaultProps:{key:"user_id",label:"realname",pinyin:"name_py"}}},mounted(){},methods:{openDialog(){let t={};this.userIds.length>0&&(t.user_ids=this.userIds),this.getAllUser(t)},closeDialog(){this.$emit("update:visible",!1),this.selectUid=[]},manageGroup(){if(this.isAdd){if(this.selectUid.length<2)return void this.$message.error("群聊人数不能少于2人");if(""==this.groupName||this.groupName.length<2||this.groupName.length>20)return void this.$message.error("请输入正确的群聊名称")}else if(this.selectUid.length<1)return void this.$message.error("请选择要添加的成员");this.$emit("manageGroup",this.selectUid,this.isAdd,this.groupName)},getAllUser(t){this.$api.imApi.getAllUserAPI(t).then((t=>{const e=t.data;this.allUser=e}))}}},o=n,r=s(1001),l=(0,r.Z)(o,i,a,!1,null,null,null),c=l.exports},5457:function(t,e,s){"use strict";var i=s(3032),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},n=[],o=(s(7658),s(4462)),r=s.n(o),l={name:"App",data(){return{msg:"Welcome to Your Vue.js App"}},created(){let t=r().get("UserInfo"),e=r().get("globalConfig");e&&this.$store.commit("setGlobalConfig",e),t&&this.$store.commit("SET_USERINFO",t),this.$store.dispatch("getSystemInfo").then((t=>{0!=t.data.sysInfo.state||this.$router.push({path:"/404",query:{msg:t.data.sysInfo.closeTips}})}))}},c=l,d=s(1001),u=(0,d.Z)(c,a,n,!1,null,null,null),p=u.exports,m=s(8499),h=s.n(m),g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-card-box"},[e("el-container",{directives:[{name:"outside",rawName:"v-outside",value:t.closeDialog,expression:"closeDialog"}],staticClass:"container"},[e("el-header",{staticClass:"no-padding header",attrs:{height:"180px"}},[e("i",{staticClass:"close el-icon-error cur-handle",on:{click:t.closeDialog}}),e("div",{staticClass:"img-banner"}),e("div",{staticClass:"user-header"},[e("div",{staticClass:"avatar"},[e("div",{staticClass:"avatar-box"},[e("img",{attrs:{src:t.detail.avatar}})])]),e("div",{staticClass:"username"},[e("i",{staticClass:"iconfont icon-qianming"}),e("span",[t._v(t._s(t.detail.realname||"未设置昵称"))])])])]),e("el-main",{staticClass:"no-padding main"},[e("div",{staticClass:"user-sign"},[e("div",{staticClass:"sign-arrow"}),e("i",{staticClass:"iconfont icon-bianji"}),e("span",[t._v(t._s(t.detail.motto||"这家伙有点懒，什么都没留下！")+" ")])]),e("div",{staticClass:"card-rows no-select"},[e("div",{staticClass:"card-row"},[e("div",{staticClass:"label"},[t._v("账号")]),e("div",[t._v(t._s(t.detail.account))])]),e("div",{staticClass:"card-row"},[e("div",{staticClass:"label"},[t._v(t._s(2==t.globalConfig.sysInfo.runMode?"昵称":"姓名"))]),e("div",[t._v(t._s(t.detail.realname))])]),t.detail.friend&&2==t.globalConfig.sysInfo.runMode?e("div",{staticClass:"card-row"},[e("div",{staticClass:"label"},[t._v("备注")]),e("div",[t._v(t._s(t.detail.friend.nickname||"未设置")+" "),e("i",{staticClass:"el-icon-edit ml-10",attrs:{title:"设置备注"},on:{click:t.setNickname}})])]):t._e(),e("div",{staticClass:"card-row"},[e("div",{staticClass:"label"},[t._v("性别")]),e("div",[t._v(t._s(t._f("sex")(t.detail.sex)))])]),e("div",{staticClass:"card-row"},[e("div",{staticClass:"label"},[t._v("邮箱")]),e("div",[t._v(t._s(t.detail.email||"未设置"))])]),e("div",{staticClass:"card-row"},[e("div",{staticClass:"label"},[t._v("IP")]),t.detail.last_login_ip?e("div",[t._v(t._s(t.detail.last_login_ip||"未知")+" （"+t._s(t.detail.location||"未知")+"）")]):e("div",[t._v("未知")])])])]),e("el-footer",{staticClass:"footer"},[t.userInfo.user_id==t.detail.user_id||!t.detail.friend&&1!=t.globalConfig.sysInfo.runMode?t._e():e("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",round:""},on:{click:function(e){return t.openChat()}}},[t._v("发消息")]),2!=t.globalConfig.sysInfo.runMode||t.detail.friend?t._e():e("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",round:""},on:{click:function(e){return t.addFriend()}}},[t._v("加好友")]),t.options.isManage?e("el-button",{staticStyle:{width:"150px"},attrs:{round:""},on:{click:t.editUser}},[t._v("编辑资料")]):t._e()],1)],1)],1)},f=[],v=s(3822),w={name:"UserCard",props:{user_id:{type:[Number,String],default:0},options:{type:Object,default:()=>({isManage:!1})}},computed:{...(0,v.rn)({userInfo:t=>t.userInfo,globalConfig:t=>t.globalConfig})},filters:{sex(t){let e=["女","男","未知"];return e[t]||"未知"}},data(){return{detail:{}}},mounted(){this.getUserDetal()},methods:{closeDialog(){this.$emit("close")},getUserDetal(){this.$api.imApi.getUserInfo({user_id:this.user_id}).then((t=>{0==t.code&&(this.detail=t.data)}))},openChat(){this.closeDialog(),this.$store.commit("openChat",this.detail.user_id)},editUser(){this.$emit("editUser",this.detail)},addFriend(){this.closeDialog(),this.$prompt("请填写验证信息，让朋友知道你！","添加好友",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((({value:t})=>{if(!t)return this.$message.error("请输入验证信息"),!1;this.$api.friendApi.addFriend({user_id:this.detail.user_id,remark:t}).then((t=>{0==t.code&&this.$message.success("已发送好友申请")}))})).catch((t=>{this.$message({type:"warning",message:t})}))},setNickname(){let t=this.detail.friend.friend_user_id??"";if(!this.detail.friend)return this.$message.error("该用户不是您的好友"),!1;this.closeDialog();let e=this.detail.friend.nickname?this.detail.friend.nickname:this.detail.realname;this.$prompt("请填写备注信息","设置备注",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:e}).then((({value:e})=>{if(!e)return this.$message.error("请输入备注信息"),!1;this.$api.friendApi.setNickname({friend_id:t,nickname:e}).then((t=>{0==t.code&&(this.$message.success("设置成功"),this.detail.realname=e)}))})).catch((()=>{}))}}},C=w,b=(0,d.Z)(C,g,f,!1,null,"19401b48",null),_=b.exports,y={install(t){function e(e,s){let i=this;const a=new t({router:i.$router,store:i.$store,render(t){return t(_,{on:{close:()=>{a.$destroy(),document.body.removeChild(a.$el)},editUser:t=>{s.editDataCallbak&&s.editDataCallbak(t),a.$destroy(),document.body.removeChild(a.$el)}},props:{user_id:e,options:s}})}}).$mount();document.body.appendChild(a.$el)}t.prototype.$user=e}},x=function(){var t=this,e=t._self._c;return e("div",[e("transition",{attrs:{name:"fade-user"}},[e("div",{staticClass:"previewBox"},[e("el-button",{staticClass:"drawer-close",attrs:{type:"danger",icon:"el-icon-close",circle:""},on:{click:t.closeDrawer}}),e("iframe",{attrs:{src:t.url,frameborder:"0",width:"100%",height:"100%"}})],1)])],1)},k=[],I={name:"preview",props:{url:{type:String,default:""}},data(){return{}},methods:{closeDrawer(){this.$emit("close")}}},S=I,$=(0,d.Z)(S,x,k,!1,null,"022a2c23",null),M=$.exports,A={install(t){function e(e,s){let i=this;const a=new t({router:i.$router,store:i.$store,render(t){return t(M,{on:{close:()=>{a.$destroy(),document.body.removeChild(a.$el)}},props:{url:e,options:s}})}}).$mount();document.body.appendChild(a.$el)}t.prototype.$preview=e}},D=s(7002),T=s.n(D),U=s(2631),O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e("div",{staticClass:"im-title"},[e("div",{staticClass:"logo"},[e("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.$packageData.logo,fit:"cover"}})],1),e("div",{staticClass:"im-content"},[e("div",{staticClass:"im-name"},[e("div",{staticClass:"text f-36"},[t._v(t._s(t.$packageData.name))]),e("div",{staticClass:"version ml-5"},[e("el-tag",{attrs:{size:"mini",type:"primary",effect:"plain"}},[t._v("v"+t._s(t.$packageData.version))])],1)]),e("div",{staticClass:"im-des"},[t._v(t._s(t.$packageData.description))])])]),e("div",{staticClass:"code-url"},[e("div",{staticClass:"ml-15 mb-15"},[t._v(" 前端地址： "),e("a",{attrs:{href:t.$packageData.frontUrl,target:"_blank"}},[e("el-image",{attrs:{src:t.$packageData.frontUrl+"/badge/star.svg?theme=white",alt:"star"}})],1)]),e("div",{staticClass:"ml-15 mb-15"},[t._v(" 后端地址："),e("a",{attrs:{href:t.$packageData.backstageUrl,target:"_blank"}},[e("el-image",{attrs:{src:t.$packageData.backstageUrl+"/badge/star.svg?theme=dark",alt:"star"}})],1)]),e("div",{staticClass:"ml-15 mb-15"},[e("el-button",{attrs:{type:"warning",plain:"",size:"mini",round:""}},[e("a",{attrs:{href:t.$packageData.qqGroupUrl,target:"_blank"}},[t._v("QQ交流群:336921267")])])],1),e("div",{staticClass:"ml-15 mb-15"},[e("el-button",{attrs:{plain:"",size:"mini",round:""}},[e("a",{attrs:{href:"http://june000.gitee.io/lemon-im",target:"_blank"}},[t._v("Lemon-IMUI手册")])])],1)]),e("el-alert",{staticClass:"mt-15 mb-15",attrs:{"show-icon":"",title:"目前已经支持社区模式了，就是可以添加、删除好友那种，体验社区模式需要自己部署哦！大家点个star吧！",type:"success"}}),e("div",{staticClass:"tip"},[t._m(0),e("p",[t._v(" 1、"+t._s(t.$packageData.name)+"是一个"),e("b",{staticClass:"c-red"},[t._v("开源的即时通信demo，主要用于学习交流，为大家提供即时通讯的开发思路")]),t._v("，许多功能需要自行开发，开发的初衷旨在快速建立企业内部通讯系统、内网交流、社区交流。不建议用于商业用途，如确有需要商用，请联系作者授权，自行开发代码量必须要高于原代码量的30%以上，并注明相关的版权问题。 ")]),e("p",[t._v(" 2、支持发送表情、图片、语音、视频和文件消息，支持单聊、群聊、群管理、1对1音视频通话（移动端目前仅支持H5和安卓APP，IOS没条件测试，和web端不相通，独立使用）具体功能可以看项目主页。 ")]),e("p",[t._v(" 3、目前仅开源了网页端(vue2+lemon-imui+element-ui)和后台接口（TP6+workerman），可以用于对接企业应用等内部聊天，内网私有聊天室,社区聊天等等。 ")]),e("p",[t._v(" 4、移动端（uniapp开发，支持H5+APP）代码未开源，基础功能都有，和web功能几乎无差异，除了个人设置，如有需要请查看底部说明。 ")])]),e("div",{staticClass:"demo-btn"},[e("div",{staticClass:"flex-box-center mb-15",on:{click:function(e){return t.showMessageBox()}}},[e("el-badge",{staticClass:"item",attrs:{value:t.unread,max:99,hidden:!t.unread}},[e("el-button",[t._v("窗口模式")])],1)],1),e("div",{staticClass:"mb-15 mr-20",on:{click:function(e){return t.$router.push({path:"/chat"})}}},[e("el-button",[t._v("纯享模式")])],1),e("div",{staticClass:"mb-15 mr-20",on:{click:function(e){return t.$router.push({path:"/manage/index"})}}},[e("el-button",[t._v("管理后台")])],1),e("div",{staticClass:"mb-15 mr-20"},[e("el-tooltip",{attrs:{placement:"right-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("el-image",{staticStyle:{width:"200px"},attrs:{src:"https://emoji.raingad.com/file/h5.png"}})],1),e("el-button",[e("a",{attrs:{href:t.$packageData.mobileUrl,target:"_blank"}},[t._v("H5体验")])])],1)],1),e("div",{staticClass:"mb-15"},[e("el-tooltip",{attrs:{placement:"right-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("el-image",{staticStyle:{width:"200px"},attrs:{src:"https://emoji.raingad.com/file/app.png"}})],1),e("el-button",[e("a",{attrs:{href:"https://emoji.raingad.com/file/raingad.apk",target:"_blank"}},[t._v("安卓APP体验")])])],1)],1)]),e("div",{staticClass:"contact-main"},[t._m(1),t._l(t.allContacts,(function(s){return 0==s.is_group&&s.id<6?e("div",{key:s.id,staticClass:"contact-box"},[e("div",{staticClass:"contact-item"},[e("el-avatar",{attrs:{src:s.avatar}}),e("span",[t._v(t._s(s.realname))]),e("div",[e("el-button",{attrs:{plain:"",size:"mini",round:""},on:{click:function(e){return t.$store.commit("openChat",s.id)}}},[t._v("发消息")])],1)],1)]):t._e()}))],2),e("div",{staticClass:"tip"},[t._m(2),e("div",t._l(t.$packageData.funcList,(function(s){return e("p",{key:s.icon},[e("i",{class:s.icon}),t._v(" "+t._s(s.text))])})),0),t._m(3),e("p",[t._v(" 1、企业模式：类似于企业微信，初始化联系人是加载企业内的所有人员，无须加好友可以直接进行对话、创建群聊等，适用于企业内部通讯。 ")]),e("p",[t._v(" 2、社区模式：类似于微信或QQ，需要添加好友才能进行对话，适用于社区交流。社区模式支持加好友、删除好友、改备注等功能。 ")]),e("p",[t._v(" 3、选择适合自己项目的模式，然后在后台设置即可。社区模式体验需要自行搭建部署哦，可以在项目地址中看到相关的截图。 ")]),t._m(4),e("p",[t._v(" 完善手机端，增加功能公开群聊功能，申请加群等功能。 ")])]),t._m(5),e("p",[e("el-image",{staticClass:"mr-40 mb-20",staticStyle:{width:"300px"},attrs:{src:"https://emoji.raingad.com/file/wx.jpg"}}),e("el-image",{staticStyle:{width:"280px"},attrs:{src:"https://emoji.raingad.com/file/zfb.jpg"}})],1),t._m(6),e("div",{staticClass:"other-pro"},[e("h2",[t._v("其他项目")]),e("br"),e("div",{staticClass:"mb-15"},[e("el-link",{attrs:{type:"primary",href:"https://gitee.com/raingad/j-preview"}},[t._v("纯JS文件预览插件")])],1)]),e("Message",{ref:"Message",attrs:{dialogTableVisible:t.dialogTableVisible},on:{"update:dialogTableVisible":function(e){t.dialogTableVisible=e},"update:dialog-table-visible":function(e){t.dialogTableVisible=e}}})],1)},P=[function(){var t=this,e=t._self._c;return e("h3",{staticClass:"mb-5"},[e("b",[t._v("介绍")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("b",{staticStyle:{"font-size":"24px"}},[t._v("联系人")]),t._v("（仅展示部分用于演示）")])},function(){var t=this,e=t._self._c;return e("h3",{staticClass:"mb-5"},[e("b",[t._v("功能")])])},function(){var t=this,e=t._self._c;return e("h3",{staticClass:"mb-5 mt-5"},[e("b",[t._v("模式介绍")])])},function(){var t=this,e=t._self._c;return e("h3",{staticClass:"mb-5 mt-5"},[e("b",[t._v("计划")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"warning"},[e("p",[t._v(" 详细的使用方法在源码中基本上都有备注，如果您觉得这个项目对您有帮助，欢迎star，如果有问题可以加QQ群交流，如果您有更好的建议，欢迎提出。如果觉得项目不错，不如请作者喝杯奶茶吧~ ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"tip"},[e("h3",{staticClass:"mb-5"},[e("b",[t._v("服务介绍")])]),e("p",[t._v("开源不易，同时如果需要以下功能，作者提供付费服务，收费标准为：进群后咨询作者！")]),e("p",[t._v("1. 协助部署：200元/次（需要自行安装好运行环境，最好是宝塔面板），赠送web端1v1音视频通话源码")]),e("p",[t._v("2. uniapp移动端源码：388元/套。(全开源)")])])}],j=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogTableVisible,expression:"dialogTableVisible"}],staticClass:"messageBoxStyle"},[e("el-dialog",{attrs:{visible:t.dialogIsShow,modal:!1,"custom-class":"sideMenu-message","show-close":!1,width:"1000px","close-on-press-escape":!0},on:{"update:visible":function(e){t.dialogIsShow=e},close:t.closeDialog}},[e("rainagdIm",{on:{newChat:t.contactSync,close:t.closeDialog}})],1)],1)},L=[],F=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"chat-box"},[e("lemon-imui",{ref:"IMUI",staticStyle:{"min-height":"600px"},attrs:{user:t.user,width:t.curWidth,height:t.curHeight,contextmenu:t.contextmenu,"contact-contextmenu":t.contactContextmenu,theme:t.setting.theme,"hide-message-name":t.setting.hideMessageName,"hide-message-time":t.setting.hideMessageTime,avatarCricle:t.setting.avatarCricle,sendKey:t.setSendKey,wrapKey:t.wrapKey},on:{"menu-avatar-click":t.openSetting,"change-contact":t.handleChangeContact,"pull-messages":t.handlePullMessages,"message-click":t.handleMessageClick,send:t.handleSend},scopedSlots:t._u([{key:"cover",fn:function(){return[e("div",[e("div",{staticClass:"cover"},[e("i",{staticClass:"lemon-icon-message"}),e("p",[e("b",[t._v("即时聊天 Raingad")]),t._v(" IM")])])])]},proxy:!0},{key:"sidebar-message",fn:function(s){return[e("span",{staticClass:"lemon-badge lemon-contact__avatar"},[e("span",{staticClass:"lemon-avatar",class:{"lemon-avatar--circle":t.setting.avatarCricle},staticStyle:{width:"40px",height:"40px","line-height":"40px","font-size":"20px"}},[e("img",{attrs:{src:s.avatar}})]),s.unread>0&&1==s.is_notice?e("span",{staticClass:"lemon-badge__label"},[t._v(t._s(s.unread))]):t._e()]),e("div",{staticClass:"lemon-contact__inner"},[e("p",{staticClass:"lemon-contact__label"},[e("span",{staticClass:"lemon-contact__name"},[s.is_online&&0==s.is_group&&1==t.globalConfig.chatInfo.online?e("OnlineStatus",{attrs:{title:"在线",type:"success"}}):t._e(),1==s.is_group?e("el-tag",{attrs:{size:"mini"}},[t._v("群聊")]):t._e(),t._v(" "+t._s(s.displayName)+" ")],1),e("span",{staticClass:"lemon-contact__time",domProps:{textContent:t._s(t.formatTime(s.lastSendTime))}})]),e("p",{staticClass:"lemon-contact__content lemon-last-content"},[e("span",{staticClass:"lastContent"},[0==s.is_notice&&s.unread>0?e("span",[t._v("["+t._s(s.unread)+"条未读]")]):t._e(),e("span",{domProps:{innerHTML:t._s(s.lastContent)}})]),0==s.is_notice?e("span",{staticClass:"el-icon-close-notification f-16"}):t._e()])])]}},{key:"message-title",fn:function(s){return[e("div",{staticClass:"message-title-box"},[e("div",[0==t.isEdit?e("span",[1==t.is_group?e("span",{staticClass:"displayName",on:{click:function(e){t.isEdit=!0}}},[e("el-tag",{attrs:{size:"mini"}},[t._v("群聊")]),t._v(" "+t._s(s.displayName)),e("span",{staticClass:"mr-5"},[t._v("("+t._s(t.groupUserCount)+")")]),1==s.setting.nospeak?e("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v("仅群管理员可发言")]):t._e(),2==s.setting.nospeak?e("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v("全员禁言中")]):t._e()],1):t._e(),0==t.is_group?e("span",{staticClass:"displayName"},[t.globalConfig.chatInfo.online?e("OnlineStatus",{attrs:{type:s.is_online?"success":"info",pulse:s.is_online}}):t._e(),t._v(" "+t._s(s.displayName))],1):t._e()]):t._e(),1==t.isEdit?e("input",{directives:[{name:"model",rawName:"v-model",value:t.displayName,expression:"displayName"}],staticClass:"editInput",domProps:{value:t.displayName},on:{blur:function(e){return t.saveGroupName(s)},input:function(e){e.target.composing||(t.displayName=e.target.value)}}}):t._e()]),e("div",{staticClass:"message-title-tools"},[t.globalConfig.chatInfo.webrtc?[s.is_group?t._e():e("i",{staticClass:"el-icon-phone-outline mr-10",attrs:{title:"语音通话"},on:{click:function(e){return t.called(!1)}}}),s.is_group?t._e():e("i",{staticClass:"el-icon-video-camera mr-10",attrs:{title:"视频通话"},on:{click:function(e){return t.called(!0)}}})]:t._e(),e("i",{staticClass:"el-icon-time mr-10",attrs:{title:"消息管理器"},on:{click:t.openMessageBox}}),s.is_group?t._e():e("i",{staticClass:"el-icon-more",attrs:{title:"基本资料"},on:{click:function(e){return t.$user(s.id)}}})],2)])]}},{key:"sidebar-message-fixedtop",fn:function(s){return[e("div",{staticClass:"contact-fixedtop-box"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"搜索联系人","prefix-icon":"el-icon-search"},on:{blur:t.closeSearch,focus:function(e){t.searchResult=!0}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),2==t.globalConfig.sysInfo.runMode?e("div",{staticStyle:{"margin-left":"10px"}},[e("el-dropdown",{on:{command:t.handleCommand}},[e("el-button",{attrs:{icon:"el-icon-plus",circle:""}}),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"addFriend"}},[t._v("添加朋友")]),t.globalConfig.chatInfo.groupChat?e("el-dropdown-item",{attrs:{command:"addGroup"}},[t._v("创建群聊")]):t._e()],1)],1)],1):t._e(),1==t.globalConfig.sysInfo.runMode&&t.globalConfig.chatInfo.groupChat?e("div",{staticStyle:{"margin-left":"10px"}},[e("el-button",{attrs:{title:"创建群聊",icon:"el-icon-plus",circle:""},on:{click:t.openCreateGroup}})],1):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.searchResult,expression:"searchResult"}],staticClass:"search-list"},[t._l(t.searchList,(function(i,a){return t.searchList.length>0?e("div",{key:a,staticClass:"search-list-item"},[e("lemon-contact",{attrs:{contact:i},on:{click:function(e){return t.openChat(i.id,s)}}})],1):t._e()})),0==t.searchList.length?e("div",{staticStyle:{margin:"20px"},attrs:{align:"center"}},[t._v(" 暂无 ")]):t._e()],2)],1)]}},{key:"sidebar-message-top",fn:function(s){return[t.chatTopList.length>0?e("div",{staticClass:"chat-top-list"},t._l(t.chatTopList,(function(i,a){return e("ChatTop",{key:a,attrs:{contact:i,avatarCricle:t.setting.avatarCricle,currentId:t.currentChat.id},nativeOn:{click:function(e){return t.openChat(i.id,s)}}})})),1):t._e()]}},{key:"sidebar-contact-fixedtop",fn:function(s){return[e("div",{staticStyle:{margin:"15px 10px"}},[t._v(" 联系人 ")])]}},{key:"message-side",fn:function(s){return[1==s.is_group?e("div",{staticClass:"slot-group-list"},[e("div",{staticClass:"group-side-box"},[e("div",{staticClass:"group-notice"},[e("div",{staticClass:"group-side-title"},[e("h4",[t._v("群公告")]),e("div",[s.role<3||0==s.setting.manage?e("span",{staticClass:"el-icon-edit f-18 cur-handle",on:{click:function(e){t.noticeBox=!0}}}):t._e()])]),e("hr"),s.notice?e("div",{staticClass:"group-side-body",on:{click:t.openNotice}},[t._v(" "+t._s(s.notice)+" ")]):t._e(),s.notice?t._e():e("div",{staticClass:"group-side-body"},[t._v(" 暂无公告 ")])]),e("div",{staticClass:"group-user"},[e("div",{staticClass:"group-side-title"},[e("h4",[t._v("群成员")]),e("div",[s.role<3||1==s.setting.invite?e("span",{staticClass:"el-icon-circle-plus-outline f-18 cur-handle",on:{click:t.openAddGroupUser}}):t._e()])]),e("hr"),e("div",{staticClass:"group-user-body",style:"height:calc("+t.curHeight+" - 230px )",attrs:{id:"group-user"}},[e("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.groupUser,(function(s,i){return e("lemon-contact",{directives:[{name:"lemon-contextmenu",rawName:"v-lemon-contextmenu.contact",value:t.groupMenu,expression:"groupMenu",modifiers:{contact:!0}}],key:i,staticClass:"user-list",attrs:{contact:s}},[e("div",{staticClass:"user-avatar"},[e("el-avatar",{attrs:{size:20,src:s.userInfo.avatar}})],1),e("div",{staticClass:"user-name"},[s.userInfo.id==t.user.id?e("span",{staticClass:"fc-danger"},[t._v(t._s(s.userInfo.displayName)+"（我）")]):t._e(),s.userInfo.id!=t.user.id?e("span",[t._v(t._s(s.userInfo.displayName))]):t._e()]),e("div",{staticClass:"user-role"},[1==s.role?e("i",{staticClass:"el-icon-user-solid fc-danger",attrs:{title:"创建者"}}):t._e(),2==s.role?e("i",{staticClass:"el-icon-user-solid fc-warning",attrs:{title:"管理员"}}):t._e()])])})),1)],1)])])]):t._e()]}},{key:"message-after",fn:function(s){return[s.fromUser.id==t.user.id&&0==s.is_group?e("span",{staticStyle:{visibility:"visible"}},[s.is_read||"succeed"!=s.status?t._e():e("span",[t._v(" 未读 ")]),s.is_read&&"succeed"==s.status?e("span",{staticClass:"fc-success"},[t._v(" 已读 ")]):t._e()]):t._e()]}},{key:"editor-footer",fn:function(){return[t._v(" "+t._s(1==t.setting.sendKey?"使用 Enter 键发送消息":"使用 Ctrl + Enter 键发送消息")+" ")]},proxy:!0}])})],1),e("Group",{attrs:{visible:t.createChatBox,title:t.dialogTitle,isAdd:t.isAdd,userIds:t.userIds},on:{"update:visible":function(e){t.createChatBox=e},manageGroup:t.manageGroup}}),e("el-dialog",{attrs:{title:"发布公告",visible:t.noticeBox,modal:!0,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.noticeBox=e}}},[e("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入内容"},model:{value:t.notice,callback:function(e){t.notice=e},expression:"notice"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.noticeBox=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.publishNotice}},[t._v("确 定")])],1)],1),e("addFriend",{attrs:{visible:t.addFriendBox},on:{"update:visible":function(e){t.addFriendBox=e}}}),e("ChooseDialog",{attrs:{visible:t.forwardBox,title:"转发聊天",allUser:t.allUser},on:{"update:visible":function(e){t.forwardBox=e},selectChat:t.forwardUser}}),e("el-dialog",{attrs:{title:"消息管理器",visible:t.messageBox,modal:!0,width:"800px","append-to-body":""},on:{"update:visible":function(e){t.messageBox=e}}},[e("ChatRecord",{key:t.componentKey,attrs:{contact:t.currentChat}})],1),e("el-dialog",{attrs:{title:"群设置",visible:t.groupSetting,modal:!0,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.groupSetting=e}}},[e("ChatSet",{key:t.componentKey,attrs:{contact:t.contactSetting}})],1),e("el-dialog",{attrs:{title:"语音录制","custom-class":"no-padding",visible:t.VoiceStatus,modal:!0,width:"500px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(e){t.VoiceStatus=e}}},[e("voice-recorder",{on:{send:t.sendVoice}})],1),e("Socket",{ref:"socket"}),e("webrtc",{key:t.componentKey,ref:"webrtc",attrs:{contact:t.currentChat,config:t.webrtcConfig,alias:t.$packageData.name,userInfo:t.user}})],1)},N=[],K=[{label:"表情",children:[{name:"1f600",title:"微笑",src:"https://emoji.raingad.com/72x72/1f600.png"},{name:"1f62c",title:"微笑",src:"https://emoji.raingad.com/72x72/1f62c.png"},{name:"1f601",title:"微笑",src:"https://emoji.raingad.com/72x72/1f601.png"},{name:"1f602",title:"微笑",src:"https://emoji.raingad.com/72x72/1f602.png"},{name:"1f923",title:"微笑",src:"https://emoji.raingad.com/72x72/1f923.png"},{name:"1f973",title:"微笑",src:"https://emoji.raingad.com/72x72/1f973.png"},{name:"1f603",title:"微笑",src:"https://emoji.raingad.com/72x72/1f603.png"},{name:"1f604",title:"微笑",src:"https://emoji.raingad.com/72x72/1f604.png"},{name:"1f605",title:"微笑",src:"https://emoji.raingad.com/72x72/1f605.png"},{name:"1f606",title:"微笑",src:"https://emoji.raingad.com/72x72/1f606.png"},{name:"1f607",title:"微笑",src:"https://emoji.raingad.com/72x72/1f607.png"},{name:"1f609",title:"微笑",src:"https://emoji.raingad.com/72x72/1f609.png"},{name:"1f60a",title:"微笑",src:"https://emoji.raingad.com/72x72/1f60a.png"},{name:"1f642",title:"微笑",src:"https://emoji.raingad.com/72x72/1f642.png"},{name:"1f643",title:"微笑",src:"https://emoji.raingad.com/72x72/1f643.png"},{name:"1263a",title:"微笑",src:"https://emoji.raingad.com/72x72/263a.png"},{name:"1f60b",title:"微笑",src:"https://emoji.raingad.com/72x72/1f60b.png"},{name:"1f60c",title:"微笑",src:"https://emoji.raingad.com/72x72/1f60c.png"},{name:"1f60d",title:"微笑",src:"https://emoji.raingad.com/72x72/1f60d.png"},{name:"1f970",title:"微笑",src:"https://emoji.raingad.com/72x72/1f970.png"},{name:"1f618",title:"微笑",src:"https://emoji.raingad.com/72x72/1f618.png"},{name:"1f617",title:"微笑",src:"https://emoji.raingad.com/72x72/1f617.png"},{name:"1f619",title:"微笑",src:"https://emoji.raingad.com/72x72/1f619.png"},{name:"1f61a",title:"微笑",src:"https://emoji.raingad.com/72x72/1f61a.png"},{name:"1f61c",title:"微笑",src:"https://emoji.raingad.com/72x72/1f61c.png"},{name:"1f92a",title:"微笑",src:"https://emoji.raingad.com/72x72/1f92a.png"},{name:"1f928",title:"微笑",src:"https://emoji.raingad.com/72x72/1f928.png"},{name:"1f9d0",title:"微笑",src:"https://emoji.raingad.com/72x72/1f9d0.png"},{name:"1f61d",title:"微笑",src:"https://emoji.raingad.com/72x72/1f61d.png"},{name:"1f61b",title:"微笑",src:"https://emoji.raingad.com/72x72/1f61b.png"},{name:"1f911",title:"微笑",src:"https://emoji.raingad.com/72x72/1f911.png"},{name:"1f913",title:"微笑",src:"https://emoji.raingad.com/72x72/1f913.png"},{name:"1f60e",title:"微笑",src:"https://emoji.raingad.com/72x72/1f60e.png"},{name:"1f929",title:"微笑",src:"https://emoji.raingad.com/72x72/1f929.png"},{name:"1f921",title:"微笑",src:"https://emoji.raingad.com/72x72/1f921.png"},{name:"1f920",title:"微笑",src:"https://emoji.raingad.com/72x72/1f920.png"},{name:"1f917",title:"微笑",src:"https://emoji.raingad.com/72x72/1f917.png"},{name:"1f60f",title:"微笑",src:"https://emoji.raingad.com/72x72/1f60f.png"},{name:"1f636",title:"微笑",src:"https://emoji.raingad.com/72x72/1f636.png"},{name:"1f610",title:"微笑",src:"https://emoji.raingad.com/72x72/1f610.png"},{name:"1f611",title:"微笑",src:"https://emoji.raingad.com/72x72/1f611.png"},{name:"1f612",title:"微笑",src:"https://emoji.raingad.com/72x72/1f612.png"},{name:"1f644",title:"微笑",src:"https://emoji.raingad.com/72x72/1f644.png"},{name:"1f914",title:"微笑",src:"https://emoji.raingad.com/72x72/1f914.png"},{name:"1f925",title:"微笑",src:"https://emoji.raingad.com/72x72/1f925.png"},{name:"1f92d",title:"微笑",src:"https://emoji.raingad.com/72x72/1f92d.png"},{name:"1f92b",title:"微笑",src:"https://emoji.raingad.com/72x72/1f92b.png"},{name:"1f92c",title:"微笑",src:"https://emoji.raingad.com/72x72/1f92c.png"},{name:"1f92f",title:"微笑",src:"https://emoji.raingad.com/72x72/1f92f.png"},{name:"1f633",title:"微笑",src:"https://emoji.raingad.com/72x72/1f633.png"},{name:"1f61e",title:"微笑",src:"https://emoji.raingad.com/72x72/1f61e.png"},{name:"1f61f",title:"微笑",src:"https://emoji.raingad.com/72x72/1f61f.png"},{name:"1f620",title:"微笑",src:"https://emoji.raingad.com/72x72/1f620.png"},{name:"1f621",title:"微笑",src:"https://emoji.raingad.com/72x72/1f621.png"}]},{label:"收藏",children:[{name:"1f62c",title:"微笑",src:"https://emoji.raingad.com/72x72/1f62c.png"},{name:"1f621",title:"微笑",src:"https://emoji.raingad.com/72x72/1f621.png"}]}],R=s(2325),B=function(){var t=this;t._self._c;return t._m(0)},z=[function(){var t=this,e=t._self._c;return e("div",[e("audio",{attrs:{id:"chatAudio"}},[e("source",{attrs:{src:s(1315),type:"audio/ogg"}}),e("source",{attrs:{src:s(444),type:"audio/mpeg"}}),e("source",{attrs:{src:s(8611),type:"audio/wav"}})])])}],V={name:"socket",data(){return{websocket:null}},methods:{getWsUrl(){let t={NODE_ENV:"production",BASE_URL:""}.VUE_APP_BASE_API,e=window.location.protocol,s="ws://";t=window.location.host,"https:"==e&&(s="wss://");const i=s+t+"/wss";return i},initWebSocket(){const t=this.getWsUrl();this.websocket=new WebSocket(t),this.websocket.onmessage=this.websocketOnMessage,this.websocket.onclose=this.websocketClose,i["default"].prototype.$websocket=this.websocket},websocketOnMessage(t){const e=JSON.parse(t.data);let s=r().get("UserInfo");switch(e["type"]){case"ping":this.websocketSend({type:"pong"});break;case"init":r().set("client_id",e["client_id"]),this.$api.commonApi.bindClientIdAPI({client_id:e["client_id"],user_id:s.user_id}).then((t=>{this.websocketSend({type:"bindUid",user_id:s.user_id}),console.log(e["client_id"],"消息服务启动成功")})).catch((t=>{console.log("连接失败")}));break;default:this.$store.commit("catchSocketAction",e);break}},websocketSend(t){var e=JSON.stringify(t);this.websocket.send(e)},websocketClose(t){let e=r().get("UserInfo");this.$api.commonApi.offlineAPI({user_id:e.user_id}).then((e=>{console.log("connection closed ("+t.code+")")}))},playAudio(){const t=document.getElementById("chatAudio");t.currentTime=0,t.play()}},created(){this.initWebSocket()}},E=V,q=(0,d.Z)(E,B,z,!1,null,null,null),G=q.exports,H=s(7292),W=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"group-item"},[e("div",{staticClass:"group-avatar"},[e("el-avatar",{attrs:{shape:"square",src:t.contact.avatar}})],1),e("div",{staticClass:"group-content"},[e("div",{staticClass:"group-title"},[t._v(t._s(t.contact.displayName)+" "),e("span",[t._v("("+t._s(t.groupInfo.groupUserCount)+")")])]),e("div",{staticClass:"group-user"},[t._v("群主："+t._s(t.groupInfo.ownerName))])])]),e("div",{staticClass:"setting-item"},[e("div",{staticClass:"setting-title"},[t._v("群管理：")]),e("div",{staticClass:"setting-option"},[e("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:t.groupSetting},model:{value:t.setting.manage,callback:function(e){t.$set(t.setting,"manage",e)},expression:"setting.manage"}})],1),t._m(0)]),e("div",{staticClass:"setting-item"},[e("div",{staticClass:"setting-title"},[t._v("群成员邀请：")]),e("div",{staticClass:"setting-option"},[e("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:t.groupSetting},model:{value:t.setting.invite,callback:function(e){t.$set(t.setting,"invite",e)},expression:"setting.invite"}})],1),t._m(1)]),e("div",{staticClass:"setting-item"},[e("div",{staticClass:"setting-title"},[t._v("群禁言：")]),e("div",{staticClass:"setting-option"},[e("el-radio-group",{attrs:{size:"mini"},on:{change:t.groupSetting},model:{value:t.setting.nospeak,callback:function(e){t.$set(t.setting,"nospeak",e)},expression:"setting.nospeak"}},[e("el-radio-button",{attrs:{label:"0"}},[t._v("关闭")]),e("el-radio-button",{attrs:{label:"1"}},[t._v("仅管理员可发言")]),e("el-radio-button",{attrs:{label:"2"}},[t._v("仅群主可发言")])],1)],1)])])},Y=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"setting-description"},[e("div",{staticClass:"des-title"},[t._v("仅群主和群管理员可以管理")]),e("div",{staticClass:"des-comment"},[t._v("启用后，其他成员不能修改群名称，编辑公告等")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"setting-description"},[e("div",{staticClass:"des-title"},[t._v("允许群成员邀请")]),e("div",{staticClass:"des-comment"},[t._v("启用后，其他成员可以邀请其他人加入群聊")])])}],Z={name:"chatSet",props:{contact:{type:Object,default:{}}},data(){return{setting:{},groupInfo:{}}},methods:{groupSetting(){this.$api.imApi.groupSettingAPI({id:this.contact.id,setting:this.setting})}},created(){this.$api.imApi.getGroupInfoAPI({group_id:this.contact.id}).then((t=>{var e=t.data;this.groupInfo=e,this.setting=e.setting}))}},X=Z,Q=(0,d.Z)(X,W,Y,!1,null,"0a761fd1",null),J=Q.exports,tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chatTop"},[e("el-tooltip",{attrs:{content:t.contact.displayName,placement:"top-start",effect:"light"}},[e("div",{staticClass:"top-item",class:t.currentId==t.contact.id?"active":""},[e("div",{staticClass:"avatar"},[e("el-avatar",{attrs:{shape:t.avatarCricle?"circle":"square",size:"small",src:t.contact.avatar}})],1),e("div",{staticClass:"username"},[t._v(" "+t._s(t.contact.displayName)+" ")])])])],1)},et=[],st={name:"chatTop",props:{contact:{type:Object,default:{}},currentId:[String,Number],avatarCricle:{type:Boolean,default:!1}},data(){return{}},methods:{},created(){}},it=st,at=(0,d.Z)(it,tt,et,!1,null,"069c0360",null),nt=at.exports,ot=function(){var t=this,e=t._self._c;return e("div",{staticClass:"lum-dialog-mask animated fadeIn"},[e("el-container",{staticClass:"lum-dialog-box"},[e("el-main",{staticClass:"no-padding mian"},[e("div",{staticClass:"music"},[e("span",{staticClass:"line line1",class:{"line-ani":t.animation}}),e("span",{staticClass:"line line2",class:{"line-ani":t.animation}}),e("span",{staticClass:"line line3",class:{"line-ani":t.animation}}),e("span",{staticClass:"line line4",class:{"line-ani":t.animation}}),e("span",{staticClass:"line line5",class:{"line-ani":t.animation}})]),e("div",{staticStyle:{"margin-top":"35px",color:"#676262","font-weight":"300"}},[0==t.recorderStatus?[e("p",{staticStyle:{"font-size":"13px","margin-top":"5px"}},[e("span",[t._v("语音消息，让聊天更简单方便 ...")])])]:1==t.recorderStatus||2==t.recorderStatus||3==t.recorderStatus?[e("p",[t._v(t._s(t.datetime))]),e("p",{staticStyle:{"font-size":"13px","margin-top":"5px"}},[1==t.recorderStatus?e("span",[t._v("正在录音...")]):2==t.recorderStatus?e("span",[t._v("已暂停录音")]):3==t.recorderStatus?e("span",[t._v("录音时长")]):t._e()])]:4==t.recorderStatus||5==t.recorderStatus||6==t.recorderStatus?[e("p",[t._v(t._s(t.formatPlayTime))]),e("p",{staticStyle:{"font-size":"13px","margin-top":"5px"}},[4==t.recorderStatus?e("span",[t._v("正在播放")]):5==t.recorderStatus?e("span",[t._v("已暂停播放")]):6==t.recorderStatus?e("span",[t._v("播放已结束")]):t._e()])]:t._e()],2)]),e("el-footer",{staticClass:"footer",attrs:{height:"60px"}},[e("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.recorderStatus,expression:"recorderStatus == 0"}],attrs:{type:"primary",size:"small",round:"",icon:"el-icon-microphone"},on:{click:t.startRecorder}},[t._v("开始录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.recorderStatus,expression:"recorderStatus == 1"}],attrs:{type:"warning",size:"small",round:"",icon:"el-icon-video-pause"},on:{click:t.pauseRecorder}},[t._v("暂停录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.recorderStatus,expression:"recorderStatus == 2"}],attrs:{type:"primary",size:"small",round:"",icon:"el-icon-microphone"},on:{click:t.resumeRecorder}},[t._v("继续录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:(2==t.recorderStatus||1==t.recorderStatus)&&t.duration>1,expression:"(recorderStatus == 2 || recorderStatus == 1) && duration>1"}],attrs:{type:"danger",size:"small",round:"",icon:"el-icon-microphone"},on:{click:t.stopRecorder}},[t._v("结束录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:3==t.recorderStatus||6==t.recorderStatus,expression:"recorderStatus == 3 || recorderStatus == 6"}],attrs:{type:"success",size:"small",round:"",icon:"el-icon-video-play"},on:{click:t.playRecorder}},[t._v("播放录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:3==t.recorderStatus||5==t.recorderStatus||6==t.recorderStatus,expression:"\n          recorderStatus == 3 || recorderStatus == 5 || recorderStatus == 6\n        "}],attrs:{type:"warning",size:"small",round:"",icon:"el-icon-refresh-right"},on:{click:t.startRecorder}},[t._v("重新录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:4==t.recorderStatus,expression:"recorderStatus == 4"}],attrs:{type:"info",size:"small",round:"",icon:"el-icon-video-pause"},on:{click:t.pausePlayRecorder}},[t._v("暂停播放 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:5==t.recorderStatus,expression:"recorderStatus == 5"}],attrs:{type:"success",size:"small",round:"",icon:"el-icon-video-play"},on:{click:t.resumePlayRecorder}},[t._v("继续播放 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:3==t.recorderStatus||5==t.recorderStatus||6==t.recorderStatus,expression:"\n          recorderStatus == 3 || recorderStatus == 5 || recorderStatus == 6\n        "}],attrs:{type:"primary",size:"small",round:""},on:{click:t.submit}},[t._v("立即发送 ")])],1)],1)],1)},rt=[],lt=s(7362),ct=s.n(lt),dt={name:"voiceRecorder",data(){return{recorder:null,duration:0,playTime:0,animation:!1,recorderStatus:0,playTimeout:null}},computed:{datetime(){let t=parseInt(this.duration/60/60%24),e=parseInt(this.duration/60%60),s=parseInt(this.duration%60);return t<10&&(t=`0${t}`),e<10&&(e=`0${e}`),s<10&&(s=`0${s}`),`${t}:${e}:${s}`},formatPlayTime(){let t=parseInt(this.playTime/60/60%24),e=parseInt(this.playTime/60%60),s=parseInt(this.playTime%60);return t<10&&(t=`0${t}`),e<10&&(e=`0${e}`),s<10&&(s=`0${s}`),`${t}:${e}:${s}`}},destroyed(){this.recorder&&this.destroyRecorder()},methods:{closeBox(){null!=this.recorder?(1==this.recorderStatus?this.stopRecorder():4==this.recorderStatus&&this.pausePlayRecorder(),this.destroyRecorder((()=>{this.$emit("close",!1)}))):this.$emit("close",!1)},startRecorder(){let t=this;this.recorder=new(ct()),this.recorder.onprocess=e=>{e=parseInt(e),t.duration=e},this.recorder.start().then((()=>{this.recorderStatus=1,this.animation=!0}),(t=>{console.log(`${t.name} : ${t.message}`)}))},pauseRecorder(){this.recorder.pause(),this.recorderStatus=2,this.animation=!1},resumeRecorder(){this.recorderStatus=1,this.recorder.resume(),this.animation=!0},stopRecorder(){this.recorderStatus=3,this.recorder.stop(),this.animation=!1},playRecorder(){this.recorderStatus=4,this.recorder.play(),this.playTimeouts(),this.animation=!0},pausePlayRecorder(){this.recorderStatus=5,this.recorder.pausePlay(),clearInterval(this.playTimeout),this.animation=!1},resumePlayRecorder(){this.recorderStatus=4,this.recorder.resumePlay(),this.playTimeouts(),this.animation=!0},destroyRecorder(t){this.recorder.destroy().then((()=>{this.recorder=null,t&&t()}))},recorderSize(){return this.recorder.fileSize},playTimeouts(){this.playTimeout=setInterval((()=>{let t=parseInt(this.recorder.getPlayTime());this.playTime=t,t==this.duration&&(clearInterval(this.playTimeout),this.animation=!1,this.recorderStatus=6)}),100)},submit(){let t=this.recorder.getWAVBlob(),e=new File([t],"在线录音.wav",{type:t.type,lastModified:Date.now()});this.$emit("send",this.duration,e)}}},ut=dt,pt=(0,d.Z)(ut,ot,rt,!1,null,"dcd1bb58",null),mt=pt.exports,ht=s(880),gt=s(6038),ft=function(){var t=this,e=t._self._c;return e("el-container",[e("el-header",{staticClass:"slider-aside"},[e("el-tabs",{staticClass:"tab-diy",attrs:{"tab-position":"bottom"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"所有文件",name:"all"}}),e("el-tab-pane",{attrs:{label:"我发送的",name:"send"}}),e("el-tab-pane",{attrs:{label:"我收到的",name:"receive"}})],1)],1),e("el-main",{staticClass:"no-padding"},[e("fileItems",{ref:"fileItem"})],1)],1)},vt=[],wt=s(3007),Ct={name:"files",components:{fileItems:wt.Z},props:{title:{type:String,default:"创建群聊"}},data(){return{selectUid:[],allUser:[],activeName:"all"}},methods:{handleClick(t){"all"==t.name?this.$refs.fileItem.changeRole(0):"send"==t.name?this.$refs.fileItem.changeRole(1):"receive"==t.name&&this.$refs.fileItem.changeRole(2)}}},bt=Ct,_t=(0,d.Z)(bt,ft,vt,!1,null,"37188710",null),yt=_t.exports,xt=function(){var t=this,e=t._self._c;return e("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":"left"}},[e("el-tab-pane",{staticClass:"pd-20",attrs:{label:"账号设置"}},[e("div",{staticClass:"user-center"},[e("div",{staticClass:"user-avatar"},[e("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{multiple:!1,action:t.getUrl,"show-file-list":!1,data:{type:1},headers:t.getToken,"on-success":t.handleAvatarSuccess,"auto-upload":!1,"on-change":t.change,"before-upload":t.before,"http-request":t.request}},[e("el-image",{staticClass:"m-20",staticStyle:{width:"160px","border-radius":"8px",overflow:"hidden"},attrs:{src:t.user.avatar}}),e("el-button",{staticClass:"replace-picture-button mab-30",attrs:{size:"mini"}},[t._v("更换头像")])],1),e("el-dialog",{attrs:{title:"头像剪裁","close-on-click-modal":!1,visible:t.cropperDialogVisible,width:"580","append-to-body":!0,"show-close":!0},on:{"update:visible":function(e){t.cropperDialogVisible=e},closed:function(e){return t.$refs.upload.clearFiles()}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("el-button",{on:{click:function(e){t.cropperDialogVisible=!1,t.$refs.upload.clearFiles()}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.cropperSave}},[t._v("确 定")])]},proxy:!0}])},[e("Cropper",{key:t.componentsKey,ref:"cropper",attrs:{src:t.cropperImg,compress:t.compress,aspectRatio:t.aspectRatio}})],1),e("div",{staticClass:"mt-20"},[e("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.editInfo(1)}}},[t._v("修改密码")])],1)],1),e("div",{staticClass:"user-info"},[e("el-form",{ref:"userinfo",attrs:{model:t.user,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"登陆账号",prop:"account"}},[t._v(" "+t._s(t.user.account)+" "),e("span",{staticClass:"fc-primary ml-10 cur-handle",on:{click:function(e){return t.editInfo(0)}}},[t._v("修改")])]),1==t.$store.state.globalConfig.sysInfo.runMode?e("el-form-item",{attrs:{label:"姓名"}},[t._v(" "+t._s(t.user.realname)+" ")]):e("el-form-item",{attrs:{label:"昵称"}},[e("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入昵称",maxlength:"20"},model:{value:t.user.realname,callback:function(e){t.$set(t.user,"realname",e)},expression:"user.realname"}})],1),e("el-form-item",{attrs:{label:"e-mail"}},[e("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入邮箱地址",maxlength:"120"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),e("el-form-item",{attrs:{label:"性别"}},[e("el-radio-group",{model:{value:t.user.sex,callback:function(e){t.$set(t.user,"sex",e)},expression:"user.sex"}},[e("el-radio",{attrs:{label:2,border:""}},[t._v("未知")]),e("el-radio",{attrs:{label:1,border:""}},[t._v("男")]),e("el-radio",{attrs:{label:0,border:""}},[t._v("女")])],1)],1),e("el-form-item",{attrs:{label:"个性签名"}},[e("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:3,maxlength:"100","show-word-limit":""},model:{value:t.user.motto,callback:function(e){t.$set(t.user,"motto",e)},expression:"user.motto"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("保存")])],1)],1)],1)]),e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialog,modal:!0,width:"400px","append-to-body":""},on:{"update:visible":function(e){t.dialog=e}}},[e("el-form",{attrs:{"label-width":"100px"}},[e("el-form-item",{attrs:{label:"当前账号"}},[t._v(" "+t._s(t.user.account)+" ")]),e("el-form-item",{attrs:{label:"验证码"}},[e("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入验证码",maxlength:"6"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},[e("el-button",{attrs:{slot:"append",loading:t.loading},on:{click:function(e){return t.sendCode(!0)}},slot:"append"},[t._v("发送验证码")])],1)],1),t.editPass?t._e():e("el-form-item",{attrs:{label:"新账号"}},[e("el-input",{attrs:{placeholder:"请输入新的账号"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),t.editPass?t._e():e("el-form-item",{attrs:{label:"新账号验证码"}},[e("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入新账号验证码",maxlength:"6"},model:{value:t.newCode,callback:function(e){t.newCode=e},expression:"newCode"}},[e("el-button",{attrs:{slot:"append",loading:t.loading},on:{click:function(e){return t.sendCode(!1)}},slot:"append"},[t._v("发送验证码")])],1)],1),t.editPass?e("el-form-item",{attrs:{label:"新密码"}},[e("el-input",{attrs:{"show-password":"",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1):t._e(),t.editPass?e("el-form-item",{attrs:{label:"重复密码"}},[e("el-input",{attrs:{"show-password":"",placeholder:"请输入重复输入密码"},model:{value:t.repass,callback:function(e){t.repass=e},expression:"repass"}})],1):t._e(),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editPassword()}}},[t._v("保存")])],1)],1)],1),e("div",{staticClass:"mt-40",attrs:{align:"center"}},[e("el-button",{staticStyle:{width:"150px"},attrs:{type:"danger",plain:"",round:""},on:{click:t.logout}},[t._v("退出登录")])],1)],1),e("el-tab-pane",{staticClass:"pd-20",attrs:{label:"通用设置"}},[e("el-form",{ref:"form",attrs:{model:t.setting,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"发送消息："}},[e("el-radio-group",{model:{value:t.setting.sendKey,callback:function(e){t.$set(t.setting,"sendKey",e)},expression:"setting.sendKey"}},[e("el-radio-button",{attrs:{label:"1"}},[t._v("Enter")]),e("el-radio-button",{attrs:{label:"2"}},[t._v("Ctrl + Enter")])],1)],1),e("el-form-item",{attrs:{label:"系统主题："}},[e("el-radio-group",{model:{value:t.setting.theme,callback:function(e){t.$set(t.setting,"theme",e)},expression:"setting.theme"}},[e("el-radio-button",{attrs:{label:"default"}}),e("el-radio-button",{attrs:{label:"blue"}})],1)],1)],1),e("div",{staticClass:"setting-switch"},[e("el-switch",{model:{value:t.setting.isVoice,callback:function(e){t.$set(t.setting,"isVoice",e)},expression:"setting.isVoice"}}),t._v(" 开启新消息声音提醒 ")],1),e("div",{staticClass:"setting-switch"},[e("el-switch",{model:{value:t.setting.avatarCricle,callback:function(e){t.$set(t.setting,"avatarCricle",e)},expression:"setting.avatarCricle"}}),t._v(" 开启聊天圆形头像（需要刷新） ")],1),e("div",{staticClass:"setting-switch"},[e("el-switch",{model:{value:t.setting.hideMessageName,callback:function(e){t.$set(t.setting,"hideMessageName",e)},expression:"setting.hideMessageName"}}),t._v(" 是否隐藏聊天窗口内的联系人名字 ")],1),e("div",{staticClass:"setting-switch"},[e("el-switch",{model:{value:t.setting.hideMessageTime,callback:function(e){t.$set(t.setting,"hideMessageTime",e)},expression:"setting.hideMessageTime"}}),t._v(" 是否隐藏聊天窗口内的消息发送时间 ")],1)],1),e("el-tab-pane",{staticClass:"pd-20",attrs:{label:"关于 IM"}},[e("div",{staticClass:"about-logo"},[e("el-avatar",{attrs:{src:t.$packageData.logo,size:50}}),e("br"),e("br"),e("p",[e("span",{staticClass:"fc-primary"},[t._v(" "+t._s(t.$packageData.name)+" ")]),t._v("for "+t._s(t.$packageData.version)+" ")])],1),e("div",{staticClass:"setting-version"},[e("b",[t._v(" 已经支持功能：")]),t._l(t.$packageData.funcList,(function(s){return e("p",{key:s.icon},[e("i",{class:s.icon}),t._v(" "+t._s(s.text))])}))],2)]),e("el-tab-pane",{staticClass:"pd-20",attrs:{label:"开源"}},[e("div",{staticClass:"about-logo"},[e("el-avatar",{attrs:{src:t.$packageData.logo,size:50}}),e("br"),e("br"),e("p",[e("span",{staticClass:"fc-primary"},[t._v(" "+t._s(t.$packageData.name)+" ")]),t._v("for "+t._s(t.$packageData.version)+" ")])],1),e("div",{staticClass:"setting-version"},[e("p",[t._v(" 前端地址："),e("a",{staticClass:"fc-primary",attrs:{href:t.$packageData.frontUrl,target:"_blank"}},[t._v("[链接] im-chat-front")])]),e("p",[t._v(" 后端地址："),e("a",{staticClass:"fc-primary",attrs:{href:t.$packageData.backstageUrl,target:"_blank"}},[t._v("[链接] im-instant-chat")])])]),e("div",{staticClass:"setting-version",staticStyle:{color:"#a6a6a6"}},[e("p",[t._v("前端技术栈：vue+Lemon-IMUI+element-UI")]),e("p",[t._v("后端技术栈：thinkphp6+workerman")])]),e("div",{staticClass:"setting-version"},[e("p",[t._v(" QQ交流群： "),e("a",{staticClass:"fc-primary",attrs:{href:t.$packageData.qqGroupUrl,target:"_blank"}},[t._v("336921267")])])])])],1)},kt=[],It=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sc-cropper"},[e("div",{staticClass:"sc-cropper__img"},[e("img",{ref:"img",attrs:{src:t.src}})]),e("div",{staticClass:"sc-cropper__preview"},[e("h4",[t._v("图像预览")]),e("div",{ref:"preview",staticClass:"sc-cropper__preview__img"})])])},St=[],$t=s(255),Mt=s.n($t),At={props:{src:{type:String,default:""},compress:{type:Number,default:1},aspectRatio:{type:Number,default:NaN}},data(){return{crop:null}},watch:{aspectRatio(t){this.crop.setAspectRatio(t)}},mounted(){this.init()},methods:{init(){this.crop=new(Mt())(this.$refs.img,{viewMode:2,dragMode:"move",responsive:!1,aspectRatio:this.aspectRatio,preview:this.$refs.preview})},setAspectRatio(t){this.crop.setAspectRatio(t)},getCropData(t,e="image/jpeg"){t(this.crop.getCroppedCanvas().toDataURL(e,this.compress))},getCropBlob(t,e="image/jpeg"){this.crop.getCroppedCanvas().toBlob((e=>{t(e)}),e,this.compress)},getCropFile(t,e="fileName.jpg",s="image/jpeg"){this.crop.getCroppedCanvas().toBlob((i=>{let a=new File([i],e,{type:s});t(a)}),s,this.compress)}}},Dt=At,Tt=(0,d.Z)(Dt,It,St,!1,null,"c7313a98",null),Ut=Tt.exports;r().get("UserInfo");var Ot={name:"manageGroup",props:{},components:{Cropper:Ut},data(){return{componentsKey:1,maxSize:5,compress:1,aspectRatio:1,cropperDialogVisible:!1,cropper:!0,cropperImg:"",tempImg:"",dialogVisible:!1,dialog:!1,dialogTitle:"修改密码",editPass:1,account:"",password:"",repass:"",code:"",newCode:"",loading:!1}},computed:{...(0,v.rn)({setting:t=>t.setting,user:t=>t.userInfo}),getUrl(){return window.BASE_URL+"/common/upload/uploadAvatar"},getToken(){const t=r().get("authToken");return{authToken:t}}},watch:{setting:{handler(t,e){this.$api.imApi.settingAPI(t);let s=r().get("UserInfo");s.setting=t,r().set("UserInfo",s)},deep:!0},editPass(t){this.dialogTitle=1==t?"修改密码":"修改账号"}},methods:{logout(){this.$confirm("确定退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$store.dispatch("LogOut").then((()=>{this.$router.push("/login")}))})).catch((()=>{}))},submitForm(){if(""==this.user.realname)return this.$message.error("请输入昵称"),!1;let t={realname:this.user.realname,email:this.user.email,sex:this.user.sex,motto:this.user.motto};this.$api.imApi.updateUserInfo(t).then((t=>{if(0==t.code){this.$message.success("修改成功");let t=JSON.parse(JSON.stringify(this.user));this.$store.commit("SET_USERINFO",t)}}))},isImg(t){var e="(.jpg|.png|.gif|.jpeg)$",s=new RegExp(e);s.test(t.toLowerCase())?this.fileIsImg=!0:this.fileIsImg=!1},change(t){if(this.cropper&&"ready"==t.status){if(this.isImg(t.name),!this.fileIsImg)return this.$message.error("选择的文件非图像类文件"),!1;this.componentsKey++,this.cropperDialogVisible=!0,this.cropperImg=URL.createObjectURL(t.raw)}},before(t){t=this.cropper?this.cropperUploadFile:t;const e=t.size/1024/1024<this.maxSize;if(!e)return this.$message.warning(`上传文件大小不能超过 ${this.maxSize}MB!`),!1;this.isImg(t.name),this.tempImg=URL.createObjectURL(t)},request(t){const e=this.$loading({lock:!0,text:"Loading"}),s=new FormData;var i=this.cropper?this.cropperUploadFile:t.file;s.append("file",i),s.append("type",1),this.$api.commonApi.uploadAvatar(s).then((s=>{this.cropperImg="",e.close(),this.handleAvatarSuccess(s),t.onSuccess(s)})).catch((s=>{e.close(),t.onError(s)}))},cropperSave(){var t=this.$refs.upload.uploadFiles[0].raw;this.$refs.cropper.getCropFile((t=>{this.cropperUploadFile=t,this.$refs.upload.submit(),this.cropperDialogVisible=!1}),t.name,t.type)},handleAvatarSuccess(t,e){let s=this.$store.state.userInfo;this.$set(s,"avatar",t.data),this.$store.commit("SET_USERINFO",s)},editInfo(t){this.dialog=!0,this.editPass=t},editPassword(){if(""==this.code)return this.$message({message:"请输入验证码",type:"warning"}),!1;if(this.editPass){if(""==this.password||this.password.length<6||this.password.length>16)return this.$message({message:"请输入6-16个字符串的密码",type:"warning"}),!1;if(this.password!=this.repass)return this.$message({message:"两次密码不一致",type:"warning"}),!1;let t={password:this.password,code:this.code};this.$api.imApi.editPassword(t).then((t=>{0==t.code&&(this.dialog=!1,this.password="",this.repass="",this.$message({message:t.msg,type:"success"}))}))}else{if(""==this.account)return this.$message({message:"请输入账号",type:"warning"}),!1;if(""==this.newCode)return this.$message({message:"请输入新账户验证码",type:"warning"}),!1;let t={account:this.account,code:this.code,newCode:this.newCode};this.$api.imApi.editAccount(t).then((t=>{0==t.code&&(this.dialog=!1,this.account="",this.code="",this.newCode="",this.$message({message:t.msg,type:"success"}))}))}},sendCode(t){let e=t?this.user.account:this.account,s=this.editPass?3:4;if(""==e)return this.$message({message:"请输入新的账号",type:"warning"}),!1;this.loading=!0,this.$store.dispatch("sendCode",{type:s,account:e}).then((t=>{this.$message.success("发送成功"),this.loading=!1})).catch((()=>{this.loading=!1}))}}},Pt=Ot,jt=(0,d.Z)(Pt,xt,kt,!1,null,"a6013c5e",null),Lt=jt.exports,Ft=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"添加好友",visible:t.visible,modal:!0,width:t.width,"append-to-body":""},on:{close:t.closeDialog}},[e("div",{staticClass:"mb-20"},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入账号进行搜索","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleChange.apply(null,arguments)}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleChange},slot:"append"})],1)],1),e("div",{staticClass:"dialog-main"},[e("div",{staticClass:"member-list"},t._l(t.list,(function(s){return e("div",{key:s.user_id,staticClass:"member-item",on:{click:function(e){return t.$user(s.user_id)}}},[e("div",{staticClass:"member-avatar"},[e("img",{attrs:{src:s.avatar,alt:"avatar"}})]),e("div",{staticClass:"member-content"},[e("div",{staticClass:"member-header"},[e("span",{staticClass:"member-name"},[t._v(t._s(s.realname))]),e("span",{staticClass:"member-account"},[t._v(t._s(s.account))])]),e("div",{staticClass:"member-actions"},[e("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("查看")])],1)])])})),0),0==t.list.length?e("el-empty"):t._e()],1)])},Nt=[],Kt={name:"addFriend",props:{visible:{type:Boolean,default:!1},width:{type:String,default:"612px"}},data(){return{keywords:"",list:[]}},mounted(){},methods:{closeDialog(){this.$emit("update:visible",!1),this.selectUid=[]},handleChange(){this.keywords&&this.$api.imApi.searchUser({keywords:this.keywords}).then((t=>{this.list=t.data}))}}},Rt=Kt,Bt=(0,d.Z)(Rt,Ft,Nt,!1,null,"18f3aea4",null),zt=Bt.exports,Vt=function(){var t=this,e=t._self._c;return e("span",{staticClass:"sc-state",class:[{"sc-status-processing":t.pulse},"sc-state-bg--"+t.type]})},Et=[],qt={props:{type:{type:String,default:"primary"},pulse:{type:[Boolean,Number],default:!0}}},Gt=qt,Ht=(0,d.Z)(Gt,Vt,Et,!1,null,"bf2f9cfc",null),Wt=Ht.exports,Yt=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}],staticClass:"webrtc-box"},[t._m(0),t._m(1),e("video",{directives:[{name:"show",rawName:"v-show",value:t.localStream&&t.is_video,expression:"localStream && is_video"}],ref:"localvideo",staticClass:"localvideo",attrs:{autoplay:"",playsinline:"",muted:""},domProps:{muted:!0}}),e("video",{directives:[{name:"show",rawName:"v-show",value:t.remoteStream&&t.is_video,expression:"remoteStream && is_video"}],ref:"remotevideo",staticClass:"remotevideo",attrs:{autoplay:"",playsinline:""}}),e("div",[t.caller?e("div",{staticClass:"call-user"},[2==t.status&&t.is_video?t._e():e("img",{staticClass:"avatar",attrs:{src:t.caller.avatar,alt:""}}),e("div",{staticClass:"text"},[t.is_video||2!=t.status?t._e():e("b",[t._v(t._s(t.caller.displayName))]),2!=t.status?e("span",[t.isReceived?e("span",[t._v(" "+t._s(t.caller.displayName)+" 正在请求与您"+t._s(t.is_video?"视频":"语音")+"通话")]):e("span",[t._v("您正对 "),e("b",[t._v(t._s(t.caller.displayName))]),t._v(" 发起"+t._s(t.is_video?"视频":"语音")+"通话")])]):t._e()])]):t._e(),e("div",{staticClass:"calling-button"},[t.calling&&3==t.status?e("div",{staticClass:"button"},[e("img",{staticClass:"image",attrs:{src:"https://im.file.raingad.com/static/image/jieting.png"},on:{click:function(e){return t.answer()}}}),e("div",{staticClass:"text"},[t._v("接听")])]):t._e(),2==t.status?e("div",{staticClass:"button"},[e("img",{staticClass:"image-icon",attrs:{src:"https://im.file.raingad.com/static/image/voice"+(t.voiceStatus?"":"-off")+".png"},on:{click:function(e){return t.switchVoice()}}})]):t._e(),t.calling&&0!=t.status?e("div",{staticClass:"button"},[e("img",{staticClass:"image",attrs:{src:"https://im.file.raingad.com/static/image/guaduan.png"},on:{click:function(e){return t.hangup(!0)}}}),e("div",{staticClass:"text"},[t._v("挂断")])]):t._e(),2==t.status?e("div",{staticClass:"button"},[t.is_video?e("img",{staticClass:"image-icon",attrs:{src:"https://im.file.raingad.com/static/image/camera"+(t.videoStatus?"":"-off")+".png"},on:{click:function(e){return t.switchVideo()}}}):e("div",{staticClass:"image-icon"})]):t._e()])])])},Zt=[function(){var t=this,e=t._self._c;return e("audio",{attrs:{id:"music1"}},[e("source",{attrs:{src:"//im.file.raingad.com/static/voice/calling.mp3"}})])},function(){var t=this,e=t._self._c;return e("audio",{attrs:{id:"music2"}},[e("source",{attrs:{src:"//im.file.raingad.com/static/voice/guaduan.mp3"}})])}],Xt=(s(2801),"jsjiami.com.v6"),Qt=[Xt,"w5l9wq13wq5M","TXPDrXLDnA==","wpPDs8OxwrIaw6Y=","CmzCncKL","w4jCmcKwbsK7","asO4wpFLSw==","woPDpzPCsAHDlcOUDMOxw75KTcK2Ow==","WcO3w4lJw6HCp8KS","a8OGPiHCkXbCtcOz","bisMw7rCs2xNRjVeGQ==","w4jDvFjDpDk=","w77Cm17Dqx0=","UsK8McK2dw==","R8Kcwokq","w5XDilnDoOaznOWGv+aJieWKrx8=","c8Odw7tfR8KnQxFWY8OG","w6nDgF/Ds1hgLUJbQsKx","ScKXwpsRw7LCnXfCvWc=","w7LDg2vDnDx+wrvDvcKEw4Q7","NMKPwobCksKhM2Z3wrM=","Vx3CtsOV","w47Cm8K1ecKFw61SLh4nwo0=","ZsOFw6FUYQ==","w73DkcK9XSc=","A1vCq8KgFw==","wpbDkhHCsj4=","cHDDg3XDqsOrWEjDvVvDkw==","RcOUw5xxRw==","wrJ/a8KQwojCowd5MQ==","wqjDkCNNw6/DvMOvM8O1KsOz","VcOiw5BKRw==","cgvCksO1wqE=","ZMKGw5zDv00=","wo/DqynClQ==","C1/Dhzs8","SC3CuWAI","TsOLOTLCpw==","BcKeAA1O","fMOxwop4","wpHDvGwTwqhsw6w=","w7rCrGnDrTrCl8OW","CXprbsOyw5rDl8ORHTpCwoY5AQ==","YcOHUMK0","w6nCrWHDrDPCocOGQ8KQw7Yd","wqPDi3kowqY=","PcK5K8Kc","wo7CuVBXw6I=","LVzDrwk6w4hwwotGNMO8","w6jDg1fDg38=","w7LDu1jDhTc=","wrw+eHnCnA==","w6PChcK5c8KT","wqTDlXJqwrM=","e8KFABfDlXfDmsO3VMObQA==","w4XCkcKiTMKbw59FNwg=","KRbDv3Z+aGXCkjByw70=","UCxdP8OcHVc=","UA51G8ON","ZsOAwqRASw==","WMKaOMKo","YcOxwoB5w4E=","wrB0fsKmwpbCpwA=","wpnDj3Jfwr0kEcKXY1fDtw==","w6HCssKySMKI","bcOXw7VRX8KRZBdBZ8OKeA==","wpbDpyrCngDDlMOrCsOBw6lE","TMOqw5hDw6LCrsKfTsOx","bC9ZCMOu","dSTCnsOnwqI=","MMKfwobCosK8JWs=","XhdqLsOpwqMs","V8O5w5Vrw7XCtA==","YcOLNBE=","w4B3PcOLw7I=","SCrCjEkvBMO8","wpLDqyPClBvDosOJAsORw7lY","w5PDpMOrVw==","awZPAMOE","w6LDikjDl1hWNFVQV8KeYFzDtg==","O8KlNsKRwoVp","wozDpi/CsC4=","w7PCrWfDvw==","DULCgFrDnF4=","I8KGwpPCvw==","c8KzM1PDuA==","WDQuwrzCrg==","w5fCh8KzasKgw5BAMw==","wqjCoMO3w7M=","w4l5wq9/","esODLwbChg==","Z8O0woVl","AD9xw6XClsKp","wqd7dsKqwp3CowA=","w7DDi8K6VSQKDyoGw68=","Z8OOwqRObMOnw7kSw5UB","XyHCgEQ3BMOOwqvDlxnCpw==","csKiIMKewpU=","Y8OMMwHCs3LCs8Oq","w5VswqR1","JcKkJMKMwoM=","wrsGYm8=","w73DgGfDjjU=","woLDhDHCscOJwpNyZcOpLw==","wqgCa3HCvhUHw74=","e2DChMKTw4A=","dsKGChfDig==","PMOZUMKkw50lwqQKwrHDjsO/w6ZAw4FRwovDtls=","YsKZBgTDsErDiMOq","wp/Dg3NI","XsKzw7HDuVLDtMO+LA==","f3DDjnLDr8Of","Z8KmPlc=","XcOIFD3CiQ==","w49hwqzCkkw=","aMOyw7VEw6o=","YgvCtVwp","w7PCrhHDgBY=","w57CsxLDoh8=","FFDCql/DkF7DtRM=","dMKFDQLDmEfDmg==","dzJ8EsOE","dsO0wo19w50=","ecKVwrkxw4Q=","TivCg18iAsOs","w7rCkSXDnBNl","UMKcOMKi","HkzCm0fDnFnDpA==","wpFrUMK3wp0=","MsKxMcKZ","JMK1JsKdwo8uwqphQTjDog==","SxdXP8Oq","w7DDnFnDoH1dP18=","wrZ1ccKq","wpzDg3he","P8KiKQBvUlg6wrYSwogxwqA=","w7Fmwr/ClWg=","wo7Dmi9c5rGi5YSj5oqL5YuNwqA=","w6/Cp23DvQ==","woHDrsOnwqgf","Ri9OA8OwC0xyHcOiwrTCm8OM","McKpwrvCgcKX","VxAtwrnCo8KDBg==","BnzCng9jRGHDm8KBTw==","TiXCgUcADcO3wrHDlg==","bzoAw6HCsHo=","wpUyR2vClA==","wpPDkxc=","Shp4DsOe","XSHCiFk=","Q8OPwqVcZA==","dMKFDRg=","Xg1wJA==","W8O5w49t","wqd/fMKhwpPCtAF2D8Kldw==","6YG16K+S5Luh5baY5oyC5paM","wpzDkB8tEw==","PB7Dt394VXY=","wpjDoGcgwoo=","fcOEVg==","w4DDhkXDuGA=","M1LDqA0qw6s=","R8OCw4x0bA==","w7B6J8OFw4Q=","LAvDqXZwVg==","CGrCuD9zRHrDoMKBTzEv","w5dzwrtcwq5KeBjDs1jCmCLDn8K4BA==","B8KdJsKpwqE=","w5NiwpDClmg=","UsK0IcKjfQ==","w6bDrXHDsCg=","VQXClGY7","eMOHORDCimHCs8O8wr59wrI=","wqfCoMO6w7w1bcOmw5BDw5DCsw==","cMO9wpBRw4vDqAzChsOVwplQbCoc","RwMiwprCqMKHBMO+w5I=","w5vDqsO8V8KEw5rDlCrCo2pW","woTDt2gD","wr3CtH1qw4LCh3nChsKb","RwUgwqHCv8Ke","WS3CgE4x","w6nCscK1csKj","DxrDvFpn","w5F/KcOdw4c=","bcOAwrBxw5o=","FC9nw7PCjcK9Ng==","w4dbP8OVw4zDoQ4=","wozDoynClgHDgQ==","JsK8JMKB","RwjCtcOJwqMaAA==","DmHCvx1lUw==","OFLDqgY2w7Vj","w4/DsMKWUTk=","w5ZLJsOew5fDszZewoV3wpE=","w63ChDDDiQ==","w6FzwrLCjWTDksK5","w6bCvcO4w7Q3WcOzw4YLw4HCu8OkwrdFNcOsw7cW","w6rDn1nDvA==","wozDiBEqEw==","DX5zR8O7w40=","wozDiXhOwrMUEQ==","w4VCIsOQw5A=","woPDp0dAwqQ=","aMOOwqlbYcOyw6Q=","w4TDscO+QsKdw7o=","FmLCjx5Q","F8KDwpDClcKj","MxDDuHJ9aGXCgSFmw6M=","w67DgcK0Wz45MjwCw6M4","w5TDqsOxWA==","UMKcOMKic0fCrw==","woPDqMO+wqg=","CXjCnDhk","wpbDpyTClB3Dh8OYB8Oow79M","w6FWworCgnc=","SsOrw55+w4nCqsKcQg==","wpLDjjHCuw==","OsKEwpvCssKfPWZ9wqxqw4HDnFFkAg==","w7nCiSXDkStjf8K9NcOWw59Hw5s=","L8KZAcKTwos=","w6FmLMK4w4vCvlZucg==","Ol3DtR06w6k=","w6rChCjDhA94aw==","ecOtMDnCqQ==","eMOYbsK7w5omwqAB","acONNBs=","ZMKmNUE=","wpPDhzpBw5A=","BmHCpR5MTmvDjMKIeCw8JA4t","wrfDjBVYw6PDi8O+PQ==","GmjCn8KDC3xK","UsKdJcK7c1Y=","CVrChUw=","wpfDs2EdwqF7","Q0XCq8Kvw5l0w6TDtg==","CTTDjVRS","wqZufsKwwo/CsQ==","w7bDjWbDmiVd","TMOsw5p4w7XCtw==","wprCo8OUw7sD","XcKiw7XDv1TDmA==","M2vCpMKaBw==","w7HCrE/DpBc=","wpDDosO1wrQ=","aHbDjXHDtA==","wofDtzPClRvDhsOT","w5lpwrV/wqRJQw==","w6pzwrDChnjDjA==","MMKLwp7CqsK6PGI=","csOHXsK+w5Y=","DGPCoxllbWfDjsKFRxUrJQYh","WFPCmcK2w4R1w5LDrU7DmBHCoA==","wovCjV9Uw4g=","HkLCmUXDkFTDtw==","wpDDq8Oxwr8iw6DDtsK8wrjCoUfCj8OYw5Ew","TRrCi8OAwqkRDsK7wpFy","jCJsrjiaOtGFmVi.com.Rvu6InpJ=="];function Jt(t,e){t=~~"0x"["concat"](t["slice"](1));var i=Qt[t];if(void 0===Jt["fltLGn"]){function n(t,e){var s,i=[],a=0,n="",o="";t=atob(t);for(var r=0,l=t["length"];r<l;r++)o+="%"+("00"+t["charCodeAt"](r)["toString"](16))["slice"](-2);t=decodeURIComponent(o);for(var c=0;c<256;c++)i[c]=c;for(c=0;c<256;c++)a=(a+i[c]+e["charCodeAt"](c%e["length"]))%256,s=i[c],i[c]=i[a],i[a]=s;c=0,a=0;for(var d=0;d<t["length"];d++)c=(c+1)%256,a=(a+i[c])%256,s=i[c],i[c]=i[a],i[a]=s,n+=String["fromCharCode"](t["charCodeAt"](d)^i[(i[c]+i[a])%256]);return n}(function(){var t="undefined"!==typeof window?window:"object"===typeof process&&"object"===typeof s.g?s.g:this,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t["atob"]||(t["atob"]=function(t){for(var s,i,a=String(t)["replace"](/=+$/,""),n=0,o=0,r="";i=a["charAt"](o++);~i&&(s=n%4?64*s+i:i,n++%4)?r+=String["fromCharCode"](255&s>>(-2*n&6)):0)i=e["indexOf"](i);return r})})(),Jt["fQSKqg"]=n,Jt["vEhWYI"]={},Jt["fltLGn"]=!0}var a=Jt["vEhWYI"][t];return void 0===a?(void 0===Jt["rnySQs"]&&(Jt["rnySQs"]=!0),i=Jt["fQSKqg"](i,e),Jt["vEhWYI"][t]=i):i=a,i}(function(t,e,s){function i(e,s,i,a,n,o){s>>=8,n="po";var r="shift",l="push";o="‮";if(s<e){while(--e)a=t[r](),s===e&&"‮"===o&&1===o["length"]?(s=a,i=t[n+"p"]()):s&&i["replace"](/[CJrOtGFVRuInpJ=]/g,"")===s&&t[l](a);t[l](t[r]())}return 1181635}i(++e,s)})(Qt,346,88576),Qt&&Qt["length"];var te={name:Jt("‮0","KRx!"),props:{contact:{type:Object,default:{}},userInfo:{type:Object,default:{}},config:{type:Object,default:{}},alias:{type:String,default:Jt("‫1","F(Xn")}},data(){return{status:0,peer:null,peers_id:"",localVideo:"",remoteVideo:"",remoteStream:null,localStream:null,calling:null,conn:null,caller:null,is_video:1,isReceived:!1,videoStatus:!0,voiceStatus:!0,cutdown:40,timer:null}},mounted(){this[Jt("‫2","]9HE")]=this["$refs"][Jt("‮3","MEVp")],this[Jt("‫4","Crjo")]=this[Jt("‫5","7RH(")]["remotevideo"],this[Jt("‫6","N!PX")]()},methods:{initPeer(){var t={QVpJp:function(t,e){return t+e},MsrsA:"-raingad-peers-id-",WjNHj:Jt("‫7","9xMY"),OOXwj:function(t,e){return t!==e},zKUhp:"GEFBw",bCIGD:Jt("‫8","7RH("),wxfDX:"通话服务已关闭",aiwnp:Jt("‮9","jK07"),MUIhY:Jt("‮a","tuOA"),Hnbsd:Jt("‫b","@w^o")};this[Jt("‮c","jK07")]=t[Jt("‫d","8kKA")](this[Jt("‫e","LPBW")],Jt("‫f","KPal"))+this[Jt("‫10","LPBW")]["id"],this[Jt("‮11",")78L")]=new Peer(this[Jt("‫12","yL$j")],this[Jt("‫13","5!o3")]),this[Jt("‮14","f2&B")]["on"](t[Jt("‫15","N!PX")],(e=>{var s={WVVJy:"calling",AqShy:function(e,s){return t["QVpJp"](e,s)},WgVtD:t[Jt("‫16","G1cZ")],DqOsg:t[Jt("‫17","JYH^")]};if(t[Jt("‮18","Crjo")](t[Jt("‫19",")7^U")],"GEFBw")){var i={vuIul:s[Jt("‫1a",")7^U")]};this[Jt("‮1b","Mmd3")]=is_video,this["caller"]=this[Jt("‮1c","LPBW")];var a=s[Jt("‫1d","L3CA")](this[Jt("‫1e","LS04")],s[Jt("‮1f","))Df")])+this[Jt("‮20","Crjo")]["id"];if(this[Jt("‮21",")7^U")])return!1;this[Jt("‫22","pUR)")]=this["peer"][Jt("‫23","Mmd3")](a),this["conn"]["on"](s[Jt("‫24","F(Xn")],(()=>{this["conn"]["on"](Jt("‫25","7RH("),(t=>{this[Jt("‮26","7RH(")](t)}));let t={type:i[Jt("‮27","6O^^")],userInfo:this[Jt("‮28","uv@T")],is_video:is_video};this[Jt("‮29","F(Xn")][Jt("‮2a",")78L")](t)})),this["initLocalStream"](a,is_video),this[Jt("‮2b","oo2D")](Jt("‮2c","G1cZ"))}else console["info"](Jt("‫2d","Vfh)"),e)})),this[Jt("‫2e","wpMs")]["on"](t[Jt("‮2f","*ML3")],(e=>{this[Jt("‮30","L3CA")](t[Jt("‮31","cK53")]),this[Jt("‮32","ut5C")]=e,this[Jt("‫33","THWW")]=!0,this[Jt("‮34","Crjo")](),this[Jt("‮35","g2^9")]=3})),this["peer"]["on"](t[Jt("‮36","jK07")],(()=>{console[Jt("‮37","HePr")](t[Jt("‮38","6O^^")])})),this[Jt("‫39","Crjo")]["on"](t[Jt("‫3a","MEVp")],(t=>{this[Jt("‫3b","LPBW")]=t,this[Jt("‮3c","6O^^")]["on"](Jt("‫3d","JYH^"),(t=>{this[Jt("‮3e","F(Xn")](t)}))}))},callClose(){var t={EiyjT:Jt("‮3f","THWW"),lrjQN:Jt("‮40","HePr")};this[Jt("‮41","UV^T")]["on"](t[Jt("‫42","7Cpp")],(()=>{console[Jt("‫43","KPal")](t[Jt("‮44","uv@T")]),this[Jt("‫45",")GX5")](!1)}))},initLocalStream(t,e){var s={QMcQG:Jt("‫46","$sSo"),QpNwe:"KPuvy",aGwok:function(t,e){return t!==e},xAyMx:Jt("‫47","pUCj"),KEcjJ:function(t,e,s){return t(e,s)},STOeq:Jt("‮48","UV^T"),gOljs:function(t,e,s,i){return t(e,s,i)}},i=navigator[Jt("‫49","THWW")]||navigator["webkitGetUserMedia"]||navigator[Jt("‮4a","9xMY")];s["gOljs"](i,{video:e,audio:!0},(e=>{var i={PegIv:function(t,e){return t!==e},uQbld:s[Jt("‫4b","7RH(")],zXTmt:s[Jt("‮4c","G1cZ")],crtqb:function(t,e){return t==e}};s[Jt("‮4d","pUR)")](s[Jt("‮4e","tuOA")],s[Jt("‮4f","Crjo")])?this[Jt("‫50","N!PX")](data):(this[Jt("‮51","t&ie")]=this[Jt("‫52","LS04")](e),this["localVideo"][Jt("‮53","ut5C")]=this[Jt("‮54","[Kjs")],t?(this["calling"]=this[Jt("‮55","7Cpp")]["call"](t,e),this[Jt("‮56","qOql")](),this[Jt("‮57","ut5C")]=1,this[Jt("‮58","Crjo")]=s[Jt("‮59","jq]Y")](setInterval,(()=>{i[Jt("‮5a","UV^T")](i[Jt("‮5b","pUCj")],i[Jt("‮5c","LS04")])?(this[Jt("‫5d","KRx!")]--,i["crtqb"](this[Jt("‮5e","pUCj")],0)&&this[Jt("‮5f","Lp9Y")](!0)):audio[Jt("‫60","7RH(")]()}),1e3)):this[Jt("‫61",")A]@")][Jt("‮62","THWW")](e),this[Jt("‫63",")GX5")]["on"](s[Jt("‫64","]9HE")],(t=>{this["remoteStream"]=t,this[Jt("‫65","pUCj")]["srcObject"]=t})))}),(function(t){}))},called(t){var e={fwPRd:Jt("‮66",")7^U"),cDTcz:Jt("‫67","G1cZ"),rUPSp:function(t,e){return t+e},lAQzv:Jt("‫68","t&ie"),ymCtP:function(t,e){return t===e},kAeix:"DibSp",GAcUm:Jt("‫69","uv@T"),yIDkm:Jt("‫6a","HePr")};this["is_video"]=t,this[Jt("‮6b","u&9]")]=this[Jt("‮6c",")78L")];var s=e["rUPSp"](this[Jt("‮6d","pUCj")],e[Jt("‮6e",")78L")])+this[Jt("‫6f","MEVp")]["id"];if(this[Jt("‫70","[Kjs")]){if(e[Jt("‫71","THWW")](Jt("‫72","cK53"),e["kAeix"]))return!1;this[Jt("‫73","UV^T")]["addTrack"](track),stream[Jt("‮74","]9HE")](track)}this[Jt("‫75","[Kjs")]=this["peer"][Jt("‫76","pUR)")](s),this[Jt("‮77","*ML3")]["on"](e["GAcUm"],(()=>{this["conn"]["on"](e[Jt("‮78","THWW")],(t=>{this[Jt("‮79","Lp9Y")](t)}));let s={type:e[Jt("‮7a","G1cZ")],userInfo:this[Jt("‮7b","JYH^")],is_video:t};this["conn"][Jt("‮7c","@w^o")](s)})),this[Jt("‮7d","cK53")](s,t),this[Jt("‮7e",")7^U")](e[Jt("‫7f","7RH(")])},answer(){var t={sOjLJ:Jt("‮80","F(Xn"),MxpoZ:Jt("‫81",")GX5")};if(this[Jt("‫82",")7^U")]){var e=t[Jt("‫83","N!PX")]["split"]("|"),s=0;while(1){switch(e[s++]){case"0":this[Jt("‫70","[Kjs")]=2;continue;case"1":this[Jt("‫84","KPal")]&&(this["caller"]=null);continue;case"2":this[Jt("‮85","N!PX")][Jt("‮86","f2&B")]({type:t[Jt("‫87","Vfh)")]});continue;case"3":this["playMusicCall"]();continue;case"4":this[Jt("‫88","THWW")](!1,this[Jt("‫89","Vfh)")]);continue}break}}},receivedMsg(t){var e={DivGR:Jt("‫8a","c#4s"),VKVGC:Jt("‫8b","pUR)")};switch(t[Jt("‫8c","Mmd3")]){case e["DivGR"]:this[Jt("‫8d","7Cpp")]=t["userInfo"],this[Jt("‫8e","8kKA")]=t["is_video"];break;case"hangup":this["hangup"](!1);break;case e[Jt("‫8f","UV^T")]:this[Jt("‫90","F(Xn")]=2,clearInterval(this["timer"]),this["playMusicCall"]();break}},hangup(t){var e={gylXM:function(t,e){return t==e},QlMfZ:function(t,e){return t!=e},JbWue:function(t,e){return t!==e},LSXGL:"STdml",UXNRI:function(t,e){return t==e},jmfvR:Jt("‮91","tuOA")};clearInterval(this["timer"]),this[Jt("‮92","JYH^")]&&(e[Jt("‫93","t&ie")](this[Jt("‫94","yL$j")],2)&&(e[Jt("‮95","c#4s")](Jt("‫96","wpMs"),e["LSXGL"])?this["playMusicCall"]():(this["calling"]=this[Jt("‫97","*ML3")]["call"](call_id,stream),this["callClose"](),this[Jt("‮21",")7^U")]=1,this[Jt("‮98","5!o3")]=setInterval((()=>{this[Jt("‫99","Lp9Y")]--,e["gylXM"](this[Jt("‮9a","9xMY")],0)&&this[Jt("‮9b","G1cZ")](!0)}),1e3))),this["status"]=0,this[Jt("‮9c","cK53")][Jt("‮9d","KPal")](),this[Jt("‮9e","THWW")](),this[Jt("‮9f","8kKA")]=null,e[Jt("‮a0","qOql")](this[Jt("‫a1","Mmd3")],null),this[Jt("‫a2","*ML3")](),this[Jt("‫a3",")A]@")]=!1,this[Jt("‮a4","9xMY")]=null),t&&e[Jt("‫a5","5!o3")](this[Jt("‮a6","*ML3")],2)&&this["conn"][Jt("‫a7","c#4s")]({type:e[Jt("‮a8","jq]Y")]})},getMediaStream(t){var e={VPPYi:function(t,e){return t!==e},aOgza:Jt("‫a9","MEVp")};return this["localStream"]?t[Jt("‫aa","Lp9Y")]()[Jt("‫ab","JYH^")]((e=>{this["localStream"][Jt("‫ac","N!PX")](e),t[Jt("‫ad","g2^9")](e)})):e[Jt("‫ae","tuOA")](Jt("‮af","wpMs"),e[Jt("‮b0","pUR)")])?console[Jt("‮b1","))Df")](Jt("‮b2","uv@T"),id):this[Jt("‫b3","$sSo")]=t,this[Jt("‫b4","uv@T")]},closeLocalMedia(){this[Jt("‮54","[Kjs")]&&this["localStream"][Jt("‫b5","))Df")]()&&this[Jt("‫b6","tuOA")][Jt("‫b7","cK53")]()["forEach"]((t=>{t[Jt("‫b8",")A]@")]()})),this[Jt("‮b9","jq]Y")]=null},switchVoice(){var t={JPHtl:function(t,e){return t===e},VbKPk:Jt("‫ba","$sSo"),PlAQc:Jt("‫bb","]9HE"),eiTKK:"DSWII",DicGD:Jt("‮bc","c#4s"),WYtYb:function(t,e){return t===e},rPVCJ:function(t,e){return t==e},ZfDOl:function(t,e){return t(e)},IIZQA:"请打开音视频"};if(t[Jt("‮bd","Lp9Y")](this[Jt("‫be","5!o3")],null))return t[Jt("‫bf","$sSo")](alert,t["IIZQA"]),!1;const e=this[Jt("‮54","[Kjs")][Jt("‫c0","F(Xn")]();this[Jt("‫c1","Vfh)")]?(e["forEach"]((e=>{if(t[Jt("‮c2","$sSo")]("ywyjJ",t[Jt("‮c3",")A]@")]))t[Jt("‫c4","yL$j")](e[Jt("‮c5","Lp9Y")],t[Jt("‫c6",")GX5")])&&(t[Jt("‫c7","Crjo")]===t[Jt("‫c8","N!PX")]?t[Jt("‫c9","oo2D")](e[Jt("‮ca","LS04")],"audio")&&(e[Jt("‫cb","7Cpp")]=!1):e[Jt("‮cc","wpMs")]=!1);else{var s=document[Jt("‫cd","u&9]")]("music2");s[Jt("‫ce","KPal")]()}})),this[Jt("‮cf","wpMs")]=!1):(e["forEach"]((e=>{t[Jt("‮d0","7Cpp")](e[Jt("‫d1","7RH(")],t[Jt("‫d2","qOql")])&&(e[Jt("‮cc","wpMs")]=!0)})),this[Jt("‮d3",")GX5")]=!0)},switchVideo(){var t={macoK:function(t,e){return t===e},OGzOm:Jt("‫d4","uv@T"),QMGBh:Jt("‮d5","tuOA"),zDAgl:"video",VbhkW:Jt("‫d6","jK07"),KsdPa:function(t,e){return t(e)},CFdPa:function(t,e){return t===e},lkywi:Jt("‮d7","jq]Y")};if(null==this["localStream"])return t[Jt("‮d8",")78L")](alert,"请打开音视频"),!1;const e=this[Jt("‮d9","LPBW")][Jt("‫da","jq]Y")]();this[Jt("‮db","UV^T")]?(e[Jt("‫dc","L3CA")]((e=>{if(!t["macoK"](t["OGzOm"],Jt("‮dd","6O^^")))return{status:0,peer:null,peers_id:"",localVideo:"",remoteVideo:"",remoteStream:null,localStream:null,calling:null,conn:null,caller:null,is_video:1,isReceived:!1,videoStatus:!0,voiceStatus:!0,cutdown:40,timer:null};t[Jt("‫de","MEVp")](e[Jt("‫df","pUR)")],Jt("‫e0","LS04"))&&(e[Jt("‫e1","F(Xn")]=!1)})),this[Jt("‫e2",")78L")]=!1):t[Jt("‫e3","jq]Y")](t["lkywi"],"OxbGX")?(this[Jt("‮e4","$sSo")]=remoteStream,this[Jt("‫e5","Lp9Y")][Jt("‫e6","JYH^")]=remoteStream):(e["forEach"]((e=>{var s={rKBkY:"通话服务已关闭"};t[Jt("‫e7","6O^^")]!==t[Jt("‮e8",")A]@")]?(this[Jt("‮e9","cK53")]--,0==this[Jt("‫ea","6O^^")]&&this[Jt("‫eb","JYH^")](!0)):e[Jt("‫ec","N!PX")]===t["zDAgl"]&&(t["macoK"](t["VbhkW"],Jt("‫ed","pUCj"))?e[Jt("‮ee","Crjo")]=!0:console["log"](s["rKBkY"]))})),this[Jt("‮ef","Lp9Y")]=!0)},playMusicCall(t){var e={GJohy:Jt("‮f0","[Kjs"),yPOad:"calling",hdhAZ:function(t,e){return t===e},dphvh:Jt("‫f1","6O^^"),lEoid:"JvoAQ"},s=document[Jt("‮f2","uv@T")](Jt("‮f3","7RH("));if(e[Jt("‮f4","Lp9Y")](t,"state")?s["loop"]=!0:s[Jt("‮f5","wpMs")]=!1,s[Jt("‫f6","Mmd3")])s[Jt("‮f7","cK53")]();else if(e[Jt("‮f8","f2&B")]===e[Jt("‫f9","ut5C")]){this["conn"]["on"](e["GJohy"],(t=>{this["receivedMsg"](t)}));let t={type:e["yPOad"],userInfo:this[Jt("‮fa","jq]Y")],is_video:is_video};this[Jt("‫fb","t&ie")][Jt("‮fc","9xMY")](t)}else s[Jt("‫fd","N!PX")]()},playMusicHandup(){var t=document["getElementById"]("music2");t[Jt("‮fe","LS04")]()}}};Xt="jsjiami.com.v6";var ee=te,se=(0,d.Z)(ee,Yt,Zt,!1,null,"73ea678f",null),ie=se.exports,ae=function(){var t=this,e=t._self._c;return e("el-container",[e("el-header",{staticClass:"slider-aside"},[e("el-tabs",{staticClass:"tab-diy",attrs:{"tab-position":"bottom"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"我收到的",name:"receive"}}),e("el-tab-pane",{attrs:{label:"我发送的",name:"send"}})],1)],1),e("el-main",{staticClass:"no-padding"},[e("div",{staticClass:"apply-list"},[e("div",{staticClass:"apply-list-main"},[e("el-scrollbar",[e("el-alert",{staticClass:"mt-10 mb-10",attrs:{"show-icon":"",title:"未处理的邀请消息会在每次初始化或者页面刷新时会重新提示！",type:"warning"}}),t._l(t.list,(function(s,i){return e("div",{key:i,staticClass:"apply-list-item"},[e("div",{staticClass:"avatar"},[t.params.is_mine?t._e():e("el-avatar",{attrs:{src:s.create_user_info.avatar}}),t.params.is_mine?e("el-avatar",{attrs:{src:s.user_id_info.avatar}}):t._e()],1),e("div",{staticClass:"main"},[t.params.is_mine?t._e():e("div",{on:{click:function(e){return t.$user(s.create_user_info.user_id)}}},[e("span",{staticClass:"fc-primary cur-handle"},[t._v(t._s(s.create_user_info.realname))]),t._v(" 申请添加为好友 "),1==s.status?e("el-tag",{attrs:{type:"success"}},[t._v("已同意")]):t._e()],1),t.params.is_mine?e("div",{on:{click:function(e){return t.$user(s.user_id_info.user_id)}}},[t._v(" 请求添加 "),e("span",{staticClass:"fc-primary cur-handle"},[t._v(t._s(s.user_id_info.realname))]),t._v(" 为好友 "),1==s.status?e("el-tag",{attrs:{type:"success"}},[t._v("已同意")]):t._e()],1):t._e(),e("div",{staticClass:"f-12 c-999"},[t._v(t._s(s.remark))])]),t.params.is_mine?e("div",{staticClass:"option"},[1==s.status?e("span",{staticClass:"fc-primary cur-handle",on:{click:function(e){return t.$store.commit("openChat",s.user_id_info.user_id)}}},[t._v("发消息")]):t._e(),2==s.status?e("el-tag",{attrs:{type:"warning"}},[t._v("待同意")]):t._e(),0==s.status?e("el-tag",{attrs:{type:"danger"}},[t._v("已拒绝")]):t._e()],1):e("div",{staticClass:"option"},[2==s.status?e("el-popconfirm",{attrs:{title:"您确定接受该好友的申请吗？"},on:{confirm:function(e){return t.acceptApply(s.friend_id,!0)}}},[e("el-button",{attrs:{slot:"reference",type:"success",circle:"",plain:"",icon:"el-icon-check"},slot:"reference"})],1):t._e(),2==s.status?e("el-popconfirm",{staticClass:"ml-15",attrs:{title:"您确定拒绝该好友的申请吗？"},on:{confirm:function(e){return t.acceptApply(s.friend_id,!1)}}},[e("el-button",{attrs:{slot:"reference",type:"danger",circle:"",plain:"",icon:"el-icon-close"},slot:"reference"})],1):t._e(),1==s.status?e("span",{staticClass:"fc-primary cur-handle",on:{click:function(e){return t.$store.commit("openChat",s.create_user_info.user_id)}}},[t._v("发消息")]):t._e(),0==s.status?e("el-tag",{attrs:{type:"danger"}},[t._v("已拒绝")]):t._e()],1)])})),0==t.list.length?e("div",[e("el-empty",{attrs:{description:"暂无数据"}})],1):t._e()],2)],1),t.singlePage?t._e():e("div",{staticClass:"apply-list-page",attrs:{align:"center"}},[e("el-pagination",{attrs:{background:"","hide-on-single-page":t.singlePage,"current-page":t.params.page,"page-sizes":[20,50,100,200,300,400,500],"page-size":t.params.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleChange,"current-change":t.getList,"update:currentPage":function(e){return t.$set(t.params,"page",e)},"update:current-page":function(e){return t.$set(t.params,"page",e)},"update:pageSize":function(e){return t.$set(t.params,"limit",e)},"update:page-size":function(e){return t.$set(t.params,"limit",e)}}})],1)])])],1)},ne=[],oe={name:"apply",data(){return{singlePage:!0,total:0,list:[],activeName:"receive",params:{page:1,limit:20,is_mine:0}}},mounted(){this.getList()},methods:{handleClick(t){"send"==t.name?this.params.is_mine=1:"receive"==t.name&&(this.params.is_mine=0),this.params.page=1,this.getList()},acceptApply(t,e){let s=e?1:0;this.$api.friendApi.acceptFriend({friend_id:t,status:s}).then((t=>{this.$message.success("操作成功"),this.getList()}))},getList(){this.$api.friendApi.getApplyList(this.params).then((t=>{this.list=t.data,this.total=t.count,this.singlePage=this.total<=this.params.limit}))},handleChange(t){this.params.limit=t,this.getList()}}},re=oe,le=(0,d.Z)(re,ae,ne,!1,null,"5aced73a",null),ce=le.exports,de=s.p+"assets/img/invite.108c2fc8.png";const ue=()=>(new Date).getTime(),pe=r().get("UserInfo");var me={name:"app",components:{Socket:G,ChatRecord:H.Z,ChatSet:J,ChatTop:nt,VoiceRecorder:mt,webrtc:ie,Group:ht.Z,Files:yt,addFriend:zt,Setting:Lt,ChooseDialog:gt.Z,OnlineStatus:Wt,Apply:ce},props:{width:{type:String,default:"1000px"},height:{type:String,default:"640px"},fullScreen:{type:Boolean,default:!1}},data(){const t=this.$createElement;var e=this;let s=this.$store.state.globalConfig.chatInfo.stun?this.$store.state.globalConfig.chatInfo.stun:"stun:stun.callwithus.com";return{noSimpleTips:"系统已关闭单聊，或者群已开启禁言，无法发送消息",isFullscreen:!1,curWidth:this.width,curHeight:this.height,unread:0,webrtcConfig:{config:{iceServers:[{urls:s}]}},curFile:null,componentKey:1,searchResult:!1,addFriendBox:!1,createChatBox:!1,forwardBox:!1,noticeBox:!1,messageBox:!1,webrtcBox:!1,groupSetting:!1,VoiceStatus:!1,contactSetting:{},groupUserCount:0,dialogTitle:"创建群聊",isAdd:!0,userIds:[],notice:"",searchList:[],keywords:"",displayName:"",oldName:"",isEdit:!1,user:{id:pe.user_id,displayName:pe.realname,avatar:pe.avatar,account:pe.account},params:{page:1,limit:10},is_group:0,group_id:0,contacts:[],allUser:[],groupUser:[],currentChat:{},currentMessage:{},chatTopList:[],playAudio:null,groupMenu:[{text:"发送消息",click:(t,e,s)=>{const{IMUI:i,contact:a}=e;i.changeContact(a.user_id),s()},visible:t=>t.contact.user_id!=this.user.id&&1==this.globalConfig.sysInfo.runMode},{text:"设置管理员",click:(t,e,s)=>{const{IMUI:i,contact:a}=e;s(),this.$confirm("确定设置该成员为管理员吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$api.imApi.setManagerAPI({id:this.group_id,user_id:a.user_id,role:2}),this.$message({type:"success",message:"设置成功!"})}))},visible:t=>3==t.contact.role&&this.currentChat.owner_id==this.user.id},{text:"取消管理员",click:(t,e,s)=>{const{IMUI:i,contact:a}=e;s(),this.$confirm("确定取消该成员的管理员权限吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$api.imApi.setManagerAPI({id:this.group_id,user_id:a.user_id,role:3}),this.$message({type:"success",message:"取消成功!"})}))},visible:t=>2==t.contact.role&&this.currentChat.owner_id==this.user.id},{text:"查看资料",click:(t,e,s)=>{const{IMUI:i,contact:a}=e;s(),this.$user(a.user_id)}},{text:"移出群聊",color:"red",click:(t,e,s)=>{const{IMUI:i,contact:a}=e;s(),this.$confirm("确定移除该成员吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$api.imApi.removeUserAPI({id:this.group_id,user_id:a.user_id})}))},visible:t=>t.contact.user_id!=this.user.id&&this.currentChat.owner_id!=t.contact.user_id&&this.currentChat.role<=2}],contactContextmenu:[{click(t,s,i){const{IMUI:a,contact:n}=s;e.$user(n.user_id),i()},icon:"el-icon-tickets",text:"查看资料",visible:t=>0==t.contact.is_group},{icon:"el-icon-upload2",text:"置顶聊天",click:(t,s,i)=>{const{IMUI:a,contact:n}=s;e.$api.imApi.setChatTopAPI({id:n.id,is_top:1,is_group:n.is_group}).then((t=>{if(0==t.code){a.updateContact({id:n.id,is_top:1}),n.is_top=1;const t=e.chatTopList.filter((t=>t.id==n.id));t.length||e.chatTopList.push(n)}})),i()},visible:t=>0==t.contact.is_top},{icon:"el-icon-download",text:"取消置顶",click:(t,s,i)=>{const{IMUI:a,contact:n}=s;e.$api.imApi.setChatTopAPI({id:n.id,is_top:0,is_group:n.is_group}).then((t=>{0==t.code&&(a.updateContact({id:n.id,is_top:0}),R.pH(this.chatTopList,"id",n.id))})),i()},visible:t=>1==t.contact.is_top},{click(t,s,i){const{IMUI:a,contact:n}=s;i(),e.$api.imApi.isNoticeAPI({id:n.id,is_notice:0,is_group:n.is_group}),a.updateContact({id:n.id,is_notice:0})},icon:"el-icon-bell",text:"消息免打扰",visible:t=>1==t.contact.is_notice&&"system"!=t.contact.id},{click(t,s,i){const{IMUI:a,contact:n}=s;i(),e.$api.imApi.isNoticeAPI({id:n.id,is_notice:1,is_group:n.is_group}),a.updateContact({id:n.id,is_notice:1})},icon:"el-icon-close-notification",text:"取消免打扰",visible:t=>0==t.contact.is_notice&&"system"!=t.contact.id},{click(t,s,i){const{IMUI:a,contact:n}=s;i(),e.groupSetting=!0,e.contactSetting=n,e.componentKey++},icon:"el-icon-setting",text:"群管理",visible:t=>1==t.contact.role&&1==t.contact.is_group},{click(t,s,i){const{IMUI:a,contact:n}=s;i(),e.$confirm("确定删除该好友吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{e.$api.friendApi.delFriend({id:n.id}).then((t=>{0==t.code&&(e.$message({type:"success",message:"删除成功!"}),e.removeContact(n.id))}))})).catch((()=>{}))},icon:"el-icon-delete",color:"red",text:"删除好友",visible:t=>2==e.globalConfig.sysInfo.runMode&&0==t.contact.is_group},{click(t,s,i){const{IMUI:a,contact:n}=s;i(),e.$confirm("确定删除该群聊吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{e.$api.imApi.removeGrouprAPI({id:n.id}),e.$message({type:"success",message:"删除成功!"})})).catch((()=>{}))},icon:"el-icon-delete",color:"red",text:"删除群聊",visible:t=>t.contact.owner_id==e.user.id&&1==t.contact.is_group},{click(t,s,i){const{IMUI:a,contact:n}=s;i(),e.$confirm("确定退出该群聊吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{e.$api.imApi.removeUserAPI({id:n.id,user_id:e.user.id}).then((t=>{0==t.code&&(e.$message({type:"success",message:"退出成功!"}),e.removeContact(n.id))}))})).catch((()=>{}))},icon:"el-icon-remove-outline",color:"red",text:"退出群聊",visible:t=>t.contact.owner_id!=e.user.id&&1==t.contact.is_group}],contextmenu:[{click:(e,s,i)=>{const{IMUI:a,message:n}=s;this.$api.imApi.undoMessageAPI({id:n.id}).then((e=>{const s={id:n.id,type:"event",content:t("div",[t("span",["你撤回了一条消息"," ",t("span",{directives:[{name:"show",value:"text"==n.type}],style:"color:#409EFF;cursor:pointer",attrs:{content:n.content},on:{click:t=>{a.setEditorValue(t.target.getAttribute("content"))}}},["重新编辑"])])]),toContactId:n.toContactId,sendTime:ue()};a.updateMessage(s)})).catch((t=>{this.$message.error("发生错误")})),i()},visible:t=>t.message.fromUser.id==this.user.id&&ue()-t.message.sendTime<12e4,text:"撤回消息"},{text:"转发",click:(t,e,s)=>{this.currentMessage=e.message;const{IMUI:i}=this.$refs,a=i.getContacts(),n=i.getCurrentContact();this.allUser=R.L4(a,"id",n.id),s(),this.forwardBox=!0}},{visible:t=>"text"==t.message.type,text:"复制文字",click:(t,e,s)=>{this.$clipboard(e.message.content),this.$message({type:"success",message:"复制成功!"}),s()}},{visible:t=>"image"==t.message.type,text:"下载图片",click:(t,e,s)=>{const{message:i}=e;s(),i.download&&(window.location=i.download)}},{visible:t=>"file"==t.message.type,text:"下载文件",click:(t,e,s)=>{const{message:i}=e;window.open(i.download),s()}}]}},computed:{...(0,v.rn)({socketAction:t=>t.socketAction,contactId:t=>t.toContactId,contactSync:t=>t.contactSync,setting:t=>t.setting,userInfo:t=>t.userInfo,globalConfig:t=>t.globalConfig}),formatTime(){return function(t){return R.i$(t)}}},watch:{isFullscreen(t){r().set("isFullscreen",t),this.curWidth=t?"100vw":this.width,this.curHeight=t?"100vh":this.height},playAudio(t){if(t&&this.currentMessage){let t=this.currentMessage;var e=this;const{IMUI:s}=this.$refs;this.playAudio.addEventListener("ended",(function(){console.log("声音停止"),e.playAudio=null,e.currentMessage=null,s.updateMessage({id:t.id,status:"successd",isPlay:0})}),!1)}},contactSync(t){this.$emit("newChat",t);const{IMUI:e}=this.$refs;e.changeContact(this.contactId)},unread(t){this.$store.commit("updateUnread",t)},keywords(){const{IMUI:t}=this.$refs,e=t.getContacts();this.searchContact(e)},socketAction(t){const e=this.$createElement;let s=t.data;const{IMUI:i}=this.$refs;let a=r().get("client_id");switch(t.type){case"isOnline":i.updateContact({id:s.id,is_online:s.is_online});break;case"offline":s.id!=this.user.id||s.client_id==a||s.isMobile||(this.$message.error="您的账号在其他地方登录，已被迫下线！",this.$store.dispatch("LogOut").then((()=>{this.$router.push({path:"/login"})})));break;case"simple":case"group":if(s.fromUser.id!=this.user.id){var n=this.getContact(s.toContactId);this.setting.isVoice&&1==n.is_notice&&this.popNotice(s)}this.recieveMsg(s);break;case"undoMessage":i.updateMessage(s);break;case"setChatTop":if(i.updateContact({id:s.id,is_top:s.is_top}),1==s.is_top){const t=this.getContact(s.id),e=this.chatTopList.filter((t=>t.id==s.id));e.length||this.chatTopList.push(t)}else R.pH(this.chatTopList,"id",s.id);break;case"setIsNotice":i.updateContact({id:s.id,is_notice:s.is_notice});break;case"editGroupName":i.updateContact({id:s.id,displayName:s.displayName});const t={id:R.NW(),type:"event",content:e("div",[e("span",[s.editUserName," 修改了群名为 ",s.displayName])]),toContactId:s.id,sendTime:ue()};i.appendMessage(t,!0);break;case"isRead":this.setLocalMsgIsRead(s);break;case"addGroup":s.owner_id!=this.user.id&&i.appendContact(s),this.$api.commonApi.bindGroupAPI({client_id:a,group_id:s.id});break;case"setManager":case"addGroupUser":case"removeUser":s.group_id==this.group_id&&this.getGroupUserList(s.group_id),i.updateContact({id:s.group_id,avatar:s.avatar});break;case"removeGroup":this.removeContact(s.group_id);break;case"setNotice":i.updateContact({id:s.group_id,notice:s.notice}),i.appendMessage({id:R.NW(),type:"event",content:e("div",[e("span",["管理员 发布了公告： ",s.notice])]),toContactId:s.group_id,sendTime:ue()},!0);break;case"groupSetting":i.updateContact({id:s.group_id,setting:s.setting});break;case"appendContact":i.appendContact(s);break}}},created(){let t=this.$store.state.userInfo;t&&(this.user={id:t.user_id,displayName:t.realname,avatar:t.avatar,account:t.account}),window.Notification?"granted"==Notification.permission?console.log("允许通知"):"denied"!=Notification.permission&&(console.log("需要通知权限"),Notification.requestPermission((t=>{}))):console.error("浏览器不支持Notification")},mounted(){this.fullScreen&&(this.isFullscreen=r().get("isFullscreen")),this.searchResult&&document.addEventListener("click",(function(t){that.$refs.configforms.contains(t.target)||(that.searchResult=!1)})),this.getSimpleChat()},methods:{called(t){this.webrtcBox=!0,this.$refs.webrtc.called(t)},getSimpleChat(t){const e=this.$createElement;this.$nextTick((()=>{const s=this.$refs.IMUI;this.IMUI=s,s.setLastContentRender("voice",(t=>"[语音]")),s.setLastContentRender("video",(t=>"[视频]")),s.initEditorTools([{name:"emoji"},{name:"uploadImage",title:"发送图片"},{name:"sendVoice",title:"发送语音",click:()=>{this.VoiceStatus=!0},render:()=>e("i",{class:"el-icon el-icon-microphone f-18",style:"vertical-align: middle;font-weight: 600;"})},{name:"uploadVideo",title:"发送视频",click:()=>{var t=this.$refs.uploadVideo;t.click()},render:()=>e("i",{class:"el-icon el-icon-video-play f-18",style:"vertical-align: middle;font-weight: 600;"},[e("input",{style:"display:none",attrs:{type:"file",accept:"video/*"},ref:"uploadVideo",on:{change:t=>{this.uploadVideo(t)}}})])},{name:"uploadFile",title:"发送文件"}]),s.initEmoji(K),this.$api.imApi.getContactsAPI().then((i=>{const a=i.data;this.contacts=a;var n={};if(a.forEach(((e,i)=>{e.type&&(n.type=e.type,n.content=e.lastContent,a[i]["lastContent"]=s.lastContentRender(n)),e.unread&&!t&&(this.unread+=e.unread)})),2==this.globalConfig.sysInfo.runMode){const t={id:"system",displayName:"新邀请",avatar:de,index:"[1]系统消息",click(t){t()},renderContainer:()=>e(ce),lastSendTime:i.page,lastContent:i.page?"新的申请":"",unread:parseInt(i.count),is_notice:1};this.unread+=i.count,a.push({...t})}this.$store.commit("initContacts",a),this.getChatTop(a),s.initContacts(a),this.initMenus(s)}))}))},initMenus(t){const e=this.$createElement;let s=[{name:"messages",unread:this.unread},{name:"contacts"},{name:"files",title:"文件",unread:0,render:t=>e("i",{class:"el-icon-folder"}),renderContainer:()=>e(yt,{attrs:{title:this.dialogTitle}})},{name:"setting",title:"设置",unread:0,render:t=>e("i",{class:"el-icon-setting"}),renderContainer:()=>e(Lt),isBottom:!0}];this.fullScreen&&s.push({name:"fullscrren",title:"全屏/窗口",unread:0,click:()=>{this.isFullscreen=!this.isFullscreen},render:t=>e("i",{class:"el-icon-full-screen"})}),(pe.role>0||this.globalConfig.demon_mode)&&s.push({name:"manage",title:"后台管理",unread:0,click:()=>{this.$route.path.indexOf("manage")>-1?this.$emit("close"):this.$router.push("/manage/index")},render:t=>e("i",{class:"el-icon-s-operation"}),isBottom:!0}),t.initMenus(s)},getChatTop(){for(var t=this.contacts,e=[],s=0;s<t.length;s++)1==t[s].is_top&&e.push(t[s]);this.chatTopList=e},getContact(t){const{IMUI:e}=this.$refs,s=e.getContacts();for(var i=0;i<s.length;i++)if(s[i].id==t)return s[i]},wrapKey(t){return 1==this.setting.sendKey?13==t.keyCode&&t.ctrlKey:13==t.keyCode&&!t.ctrlKey&&!t.shiftKey},setSendKey(t){return 1==this.setting.sendKey?13==t.keyCode&&!t.ctrlKey&&!t.shiftKey:13==t.keyCode&&t.ctrlKey},handleMessageClick(t,e,s,i){if("status"==e)return i.updateMessage({id:s.id,status:"going"}),s.status="going",void this.diySendMessage(s,this.curFile);if("avatar"!=e){if("voice"==s.type){if(!this.playAudio)return this.currentMessage=s,this.playVoice(s,i);this.playAudio.pause(),this.playAudio=null,i.updateMessage({id:this.currentMessage.id,status:"successd",isPlay:0}),s.id!=this.currentMessage.id&&(this.currentMessage=s,this.playVoice(s,i))}var a=["image","file","video"];if(a.includes(s.type)){if(!s.preview)return this.$message.error("没有配置预览接口");this.$preview(s.preview)}}else this.$user(s.fromUser.id)},playVoice(t,e){this.playAudio=new Audio(t.content),this.playAudio.play(),e.updateMessage({id:t.id,status:"succeed",isPlay:1})},openChat(t,e){this.keywords="",e.changeContact(t)},handleChangeContact(t,e){e.updateContact({id:t.id,unread:0}),this.unread-=t.unread;const{IMUI:s}=this.$refs;this.initMenus(s),this.params.page=1,this.displayName=t.displayName,this.oldName=t.displayName,this.currentChat=t,1==t.is_group&&this.group_id!=t.id&&this.getGroupUserList(t.id),this.is_group=t.is_group,1==this.is_group&&(this.group_id=t.id,this.notice=t.notice);for(var i=[],a=s.getMessages(t.id),n=0;a.length>n;n++)0==a[n].is_read&&a[n].fromUser.id!=this.user.id&&i.push(a[n]);i.length>0&&this.$api.imApi.setMsgIsReadAPI({is_group:t.is_group,toContactId:t.id,messages:i,fromUser:t.id}).then((t=>{0==t.code&&this.setLocalMsgIsRead(i)})),e.closeDrawer()},uploadVideo(t){if(!this.globalConfig.chatInfo.simpleChat&&0==this.is_group||!this.nospeak())return this.$message.error(this.noSimpleTips),!1;let e,s=t.srcElement.files[0],i=URL.createObjectURL(s),a=new Audio(i);a.addEventListener("loadedmetadata",(function(t){e=a.duration}));let n={content:i,fromUser:this.user,id:R.NW(),sendTime:ue(),status:"going",toContactId:this.currentChat.id,type:"video",extends:{duration:e}};this.diySendMessage(n,s),this.$refs.uploadVideo.value=""},sendVoice(t,e){if(!this.globalConfig.chatInfo.simpleChat&&0==this.is_group||!this.nospeak())return this.$message.error(this.noSimpleTips),!1;let s={content:URL.createObjectURL(e),fromUser:this.user,id:R.NW(),sendTime:ue(),status:"going",toContactId:this.currentChat.id,type:"voice",isPlay:0,extends:{duration:t}};this.VoiceStatus=!1,this.diySendMessage(s,e)},removeContact(t){const{IMUI:e}=this.$refs,s=e.getCurrentContact();s.id==t&&e.changeContact(null),e.removeContact(t)},diySendMessage(t,e){const{IMUI:s}=this.$refs;s.appendMessage(t,!0),this.handleSend(t,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:"succeed"};s.updateContact({id:t.toContactId,lastContent:s.lastContentRender(t),lastSendTime:t.sendTime}),s.CacheDraft.remove(t.toContactId),s.updateMessage(Object.assign(t,e))}),e)},nospeak(){return!(1==this.is_group&&this.currentChat.setting.nospeak>0)||(1==this.currentChat.setting.nospeak&&2==this.currentChat.role||2==this.currentChat.setting.nospeak&&1==this.currentChat.role)},handleSend(t,e,s){const{IMUI:i}=this.$refs;if(t.is_group=this.is_group,this.curFile=s,1!=this.globalConfig.chatInfo.simpleChat&&0==this.is_group||!this.nospeak())return i.removeMessage(t.id),this.$message.error(this.noSimpleTips),!1;let a=new FormData;if(s){if(s.size>1024*this.globalConfig.fileUpload.size*1024)return i.removeMessage(t.id),this.$message.error("上传的内容不等大于"+this.globalConfig.fileUpload.size+"MB！");a.append("file",s),a.append("message",JSON.stringify(t)),this.$api.imApi.sendFileAPI(a).then((t=>{0==t.code?(i.setEditorValue(""),i.updateMessage(t.data),e()):e({status:"failed"})})).catch((t=>{e({status:"failed"})}))}else this.$api.imApi.sendMessageAPI(t).then((t=>{0==t.code?(i.setEditorValue(""),i.updateMessage(t.data),e()):e({status:"failed"})})).catch((t=>{e({status:"failed"})}))},handlePullMessages(t,e,s){let i=this.params;return i.toContactId=t.id,i.is_group=t.is_group,this.$api.imApi.getMessageListAPI(i).then((t=>{this.params.page++;let s=!1,i=t.data;i.length<this.params.limit&&(s=!0),e(i,s)})).catch((t=>{e([],!0)})),!0},publishNotice(){this.noticeBox=!1,this.$api.imApi.setNoticeAPI({id:this.group_id,notice:this.notice}).then((t=>{0==t.code&&this.$message({type:"success",message:"发布成功!"})}))},openNotice(){var t="<div style='white-space: pre;'>"+this.notice+"</div>";this.$alert(t,"群公告",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0})},openCreateGroup(){this.isAdd=!0,this.dialogTitle="创建群聊",this.createChatBox=!0},openAddGroupUser(){var t=R.Nj(this.groupUser,"user_id");this.isAdd=!1,this.userIds=t,this.dialogTitle="添加群成员",this.createChatBox=!0},manageGroup(t,e,s){this.createChatBox=!1;let i=this.globalConfig.chatInfo.groupUserMax;if(e){if(t.length>i&&i>0)return this.$message.error("群成员不能大于"+i+"人！");this.$api.imApi.addGroupAPI({user_ids:t,name:s}).then((t=>{const e=t.data,{IMUI:s}=this.$refs;0==t.code&&(s.appendContact(e),s.changeContact(e.id))}))}else{if(t.length+this.groupUser.length>i&&i>0)return this.$message.error("群成员不能大于"+i+"人！");this.$api.imApi.addGroupUserAPI({user_ids:t,id:this.group_id})}},fn(t){return new Promise(((e,s)=>{this.$api.imApi.sendMessageAPI(t).then((t=>{0===t.code?e(t):this.$message.error(t.msg)})).catch((t=>{}))}))},async test(t){let e=await this.fn(t);return e},forwardUser(t){if(t.length>5)return this.$message.error("转发的人数不能超过5人！");this.forwardBox=!1;for(var e=this.currentMessage,s=[],i=0;i<t.length;i++){var a=t[i].toString();e.id=R.NW(),e.status="successd",e.sendTime=ue(),e.toContactId=a,e.fromUser=this.user,e.is_group=0,-1!=a.indexOf("group")&&(e.is_group=1),(this.globalConfig.chatInfo.simpleChat||0!=e.is_group)&&s.push(this.test(e))}Promise.all(s).then((t=>{const{IMUI:e}=this.$refs;for(var s=0;s<t.length;s++){var i=t[s].data;0==i.is_group&&(i.toContactId=parseInt(i.toContactId)),e.appendMessage(i),e.updateContact({id:i.toContactId,unread:0})}})).catch((t=>{console.log("error",t)}))},getGroupUserList(t){this.$api.imApi.groupUserListAPI({group_id:t}).then((t=>{if(0==t.code){var e=t.data;this.groupUser=e,this.groupUserCount=e.length}}))},saveGroupName(t){if(this.displayName.length<1)return this.$notify({title:"警告",message:"名称不能为空！",type:"warning"}),this.isEdit=!1,!1;if(this.displayName!=this.oldName){const{IMUI:e}=this.$refs;this.$api.imApi.editGroupNameAPI({id:t.id,displayName:this.displayName}).then((s=>{e.updateContact({id:t.id,displayName:this.displayName})}))}this.isEdit=!1},closeSearch(){var t=this;setTimeout((function(){t.searchResult=!1}),300)},searchContact(t){""!=this.keywords&&(this.searchList=R.iu(t,["displayName","name_py"],this.keywords))},setLocalMsgIsRead(t){const{IMUI:e}=this.$refs;for(let s=0;t.length>s;s++){const i={id:t[s]["id"],is_read:1,status:"succeed",content:t[s]["content"]+" "};e.updateMessage(i)}},popNotice(t){let e=this;if("granted"==Notification.permission){let s=new Notification("收到一条新消息",{body:t.fromUser.displayName+"："+t.content,icon:t.fromUser.avatar});s.onclick=function(t){e.$nextTick((()=>{setTimeout((()=>{}),500)})),window.focus(),s.close()},console.log("浏览器通知！")}else{console.log("声音通知！");const t=document.getElementById("chatAudio");t.currentTime=0,t.play()}},recieveMsg(t){const{IMUI:e}=this.$refs,s=e.getCurrentContact();if(s.id==t.toContactId&&"system"!=s.id){var i=[];i.push(t),this.$api.imApi.setMsgIsReadAPI({toContactId:s.id,is_group:s.is_group,messages:i,fromUser:t.fromUser.id})}else this.user.id!=t.fromUser.id&&(this.unread++,this.initMenus(e));this.user.id==t.toContactId&&(t.toContactId=t.toUser),e.appendMessage(t,!0)},openMessageBox(){this.messageBox=!0,this.componentKey+=1},openSetting(){const{IMUI:t}=this.$refs;t.changeMenu("setting")},handleCommand(t){"addGroup"==t?this.openCreateGroup():this.addFriendBox=!0},logout(){this.$confirm("你确定要退出聊天室吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$store.dispatch("LogOut").then((()=>{this.$router.push({path:"/login"})}))})).catch((()=>{this.$message({type:"info",message:"已取消退出"})}))}}},he=me,ge=(0,d.Z)(he,F,N,!1,null,"d0395764",null),fe=ge.exports;var ve={name:"app",components:{rainagdIm:fe},props:{dialogTableVisible:{type:Boolean,default:!1}},data(){return{unread:0,dialogIsShow:!0}},computed:{formatTime(){return function(t){return timeFormat(t)}}},watch:{dialogTableVisible(t){t&&this.$nextTick((()=>{this.dialogIsShow=t}))}},created(){},mounted(){},methods:{closeDialog(){this.appList=!1,this.$nextTick((()=>{this.$emit("update:dialogTableVisible",!1)}))},contactSync(t){this.dialogIsShow=!0,this.$emit("update:dialogTableVisible",!0)}}},we=ve,Ce=(0,d.Z)(we,j,L,!1,null,"6e7fdceb",null),be=Ce.exports,_e={name:"Index",components:{Message:be},data(){return{dialogTableVisible:!1,unread:0,allContacts:[]}},computed:{...(0,v.rn)({chatSocket:t=>t.unread,getContacts:t=>t.allContacts})},watch:{chatSocket(t){this.unread=t},getContacts(t){this.allContacts=t}},methods:{showMessageBox(){this.dialogTableVisible?this.dialogTableVisible=!1:this.dialogTableVisible=!0}}},ye=_e,xe=(0,d.Z)(ye,O,P,!1,null,"5f897230",null),ke=xe.exports,Ie=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container",style:"background-image:url("+t.Background+")"},[e("raingadIm",{attrs:{fullScreen:!0}})],1)},Se=[],$e=s.p+"assets/img/login-background.4d69904c.jpg",Me={name:"app",components:{raingadIm:fe},data(){return{Background:$e}}},Ae=Me,De=(0,d.Z)(Ae,Ie,Se,!1,null,"f0e47f02",null),Te=De.exports,Ue=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-wrapper",style:"background-image:url("+t.Background+")"},[e("div",{staticClass:"form-box"},[e("div",{staticClass:"form-title"},[e("img",{attrs:{src:t.globalConfig.sysInfo.logo?t.globalConfig.sysInfo.logo:t.$packageData.logo,width:"100",alt:"icon"}})]),e("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules,"label-width":"0px"}},[e("el-form-item",{attrs:{prop:"account"}},[e("el-input",{ref:"account",attrs:{type:"text","auto-complete":"off",placeholder:"请输入账号","prefix-icon":"el-icon-user"},model:{value:t.loginForm.account,callback:function(e){t.$set(t.loginForm,"account",e)},expression:"loginForm.account"}})],1),e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.forget,expression:"!forget"}],attrs:{prop:"password"}},[e("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin.apply(null,arguments)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.forget,expression:"forget"}],attrs:{prop:"code"}},[e("el-input",{attrs:{placeholder:"请输入验证码",maxlength:"6"},model:{value:t.loginForm.code,callback:function(e){t.$set(t.loginForm,"code",e)},expression:"loginForm.code"}},[e("el-button",{attrs:{slot:"append",loading:t.coding},on:{click:function(e){return t.sendCode()}},slot:"append"},[t._v("发送验证码")])],1)],1),t.globalConfig.demon_mode?e("div",{staticClass:"c-666",staticStyle:{"font-size":"12px"}},[t._v("演示账号：13800000002~13800000020，密码:123456")]):t._e(),e("el-form-item",[e("div",{staticClass:"remenber"},[e("el-checkbox",{model:{value:t.loginForm.rememberMe,callback:function(e){t.$set(t.loginForm,"rememberMe",e)},expression:"loginForm.rememberMe"}},[t._v("记住我")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){t.forget=!t.forget}}},[t._v(t._s(t.forget?"密码登陆":"忘记密码"))])],1)]),e("el-form-item",[e("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,size:"small",type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[t.loading?e("span",[t._v("登 录 中...")]):e("span",[t._v("登 录")])])],1),1==t.globalConfig.sysInfo.regtype?e("el-form-item",[e("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",plain:""},on:{click:function(e){return t.$router.push("/register")}}},[t._v(" 注册 ")])],1):t._e(),e("div",{staticClass:"c-999",attrs:{align:"center"}},[t._v(t._s(t.globalConfig.sysInfo.name)+" for "+t._s(t.$packageData.version))])],1)],1)])},Oe=[],Pe={name:"Login",data(){return{Background:$e,forget:!1,loginForm:{account:"",password:"",code:"",rememberMe:!0},loginRules:{account:[{required:!0,trigger:"blur",message:"用户名不能为空"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}]},loading:!1,coding:!1,redirect:void 0}},computed:{...(0,v.rn)({globalConfig:t=>t.globalConfig})},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0},forget(t){t&&(this.loginForm.password="123456")}},mounted(){this.$nextTick((()=>{if(this.globalConfig.demon_mode){const t=Math.floor(19*Math.random()+2);this.loginForm.account=138e8+t,this.loginForm.password="123456",this.$refs.account.focus()}const t=r().get("LoginAccount");t&&(this.loginForm.account=t.account,this.loginForm.password=t.password,this.loginForm.rememberMe=!0,this.$refs.account.focus())}))},methods:{handleLogin(){!this.forget||this.loginForm.code?this.$refs.loginForm.validate((t=>{const e={account:this.loginForm.account,password:this.loginForm.password,code:this.loginForm.code};this.loginForm.rememberMe?r().set("LoginAccount",e):r().rm("LoginAccount"),t&&(this.loading=!0,this.$store.dispatch("Login",e).then((t=>{window.location.reload()})).catch((()=>{this.loading=!1})))})):this.$message.error("请输入验证码")},sendCode(){if(!this.loginForm.account)return void this.$message.error("请输入账号");this.coding=!0;let t={account:this.loginForm.account,type:1};this.$store.dispatch("sendCode",t).then((t=>{this.$message.success("发送成功"),this.coding=!1})).catch((()=>{this.coding=!1}))}}},je=Pe,Le=(0,d.Z)(je,Ue,Oe,!1,null,null,null),Fe=Le.exports,Ne=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-wrapper",style:"background-image:url("+t.Background+")"},[e("div",{staticClass:"form-box"},[e("div",{staticClass:"form-title"},[e("div",{staticClass:"f-14 cur-handle",on:{click:function(e){return t.$router.push("/login")}}},[e("i",{staticClass:"el-icon-back"},[t._v("返回")])]),t._m(0),e("div")]),e("el-form",{ref:"regForm",staticClass:"login-form",attrs:{model:t.regForm,rules:t.loginRules,"label-width":"0px"}},[e("el-form-item",{attrs:{prop:"account"}},[e("el-input",{ref:"account",attrs:{type:"text","auto-complete":"off",placeholder:"请输入账号:手机/邮箱","prefix-icon":"el-icon-user"},model:{value:t.regForm.account,callback:function(e){t.$set(t.regForm,"account",e)},expression:"regForm.account"}})],1),e("el-form-item",{attrs:{prop:"realname"}},[e("el-input",{ref:"realname",attrs:{type:"text","auto-complete":"off",placeholder:"请输入用户名/昵称","prefix-icon":"el-icon-user"},model:{value:t.regForm.realname,callback:function(e){t.$set(t.regForm,"realname",e)},expression:"regForm.realname"}})],1),e("el-form-item",{attrs:{prop:"code"}},[e("el-input",{attrs:{placeholder:"请输入验证码",maxlength:"6"},model:{value:t.regForm.code,callback:function(e){t.$set(t.regForm,"code",e)},expression:"regForm.code"}},[e("el-button",{attrs:{slot:"append",loading:t.loading},on:{click:function(e){return t.sendCode(!0)}},slot:"append"},[t._v("发送验证码")])],1)],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{type:"password","show-password":"","auto-complete":"off",placeholder:"请输入密码","prefix-icon":"el-icon-lock"},model:{value:t.regForm.password,callback:function(e){t.$set(t.regForm,"password",e)},expression:"regForm.password"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{type:"password","show-password":"","auto-complete":"off",placeholder:"请再次输入密码","prefix-icon":"el-icon-lock"},model:{value:t.regForm.repass,callback:function(e){t.$set(t.regForm,"repass",e)},expression:"regForm.repass"}})],1),e("el-form-item",[e("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,size:"small",type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleRegist.apply(null,arguments)}}},[t.loading?e("span",[t._v("注 册 中...")]):e("span",[t._v("注册")])])],1),e("div",{staticClass:"c-999",attrs:{align:"center"}},[t._v(t._s(t.globalConfig.sysInfo.name)+" for "+t._s(t.$packageData.version))])],1)],1)])},Ke=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"mr-40"},[e("b",[t._v("注册用户")])])}],Re={name:"Register",data(){return{Background:$e,regForm:{account:"",realname:"",password:"",repass:"",code:""},loginRules:{account:[{required:!0,message:"请输入手机号或邮箱",trigger:"blur"},{min:4,max:32,message:"长度在 4 到 32 个字符",trigger:"blur"},{type:"email",message:"请输入正确的手机号或邮箱",trigger:"blur",validator:this.validateContact},{type:"phone",message:"请输入正确的手机号或邮箱",trigger:"blur",validator:this.validateContact}],realname:[{required:!0,message:"请输入用户名/昵称",trigger:"blur"},{min:2,max:16,message:"长度在 2 到 16 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}]},loading:!1,redirect:void 0}},computed:{...(0,v.rn)({globalConfig:t=>t.globalConfig})},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},mounted(){},methods:{validateContact(t,e,s){e?/^1[3456789]\d{9}$/.test(e)||/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)?s():s(new Error("请输入正确的手机号或邮箱")):s()},handleRegist(){this.$refs.regForm.validate((t=>{if(this.regForm.password!=this.regForm.repass)return this.$message.error("两次密码不一致"),!1;const e={account:this.regForm.account,realname:this.regForm.realname,password:this.regForm.password,code:this.regForm.code,inviteCode:this.$route.query.inviteCode??""};if(!t)return this.$message.error("请检查输入项");this.loading=!0,this.$api.commonApi.register(e).then((t=>{this.loading=!1,0===t.code&&(this.$message.success("注册成功"),this.$router.push("/login"))})).catch((t=>{this.loading=!1}))}))},sendCode(){if(!this.regForm.account)return void this.$message.error("请输入账号");this.coding=!0;let t={account:this.regForm.account,type:2};this.$store.dispatch("sendCode",t).then((t=>{this.$message.success("发送成功"),this.coding=!1})).catch((()=>{this.coding=!1}))}}},Be=Re,ze=(0,d.Z)(Be,Ne,Ke,!1,null,"0359dbcf",null),Ve=ze.exports,Ee=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e("el-container",{staticStyle:{height:"100vh",border:"1px solid #eee"}},[e("el-header",{staticStyle:{"text-align":"right","font-size":"12px","border-bottom":"1px solid #e6e6e6"}},[e("el-row",{style:{height:"60px"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[e("el-col",{staticClass:"logo",attrs:{span:8}},[e("div",{staticClass:"image"},[e("img",{attrs:{src:t.globalConfig.sysInfo.logo,alt:"logo"}})]),e("div",{staticClass:"f-20 ml-5"},[t._v(t._s(t.globalConfig.sysInfo.name)+" 管理中心")])]),e("el-col",{staticClass:"text-right",attrs:{span:16}},[e("div",{staticClass:"user"},[e("span",{staticClass:"message"},[e("router-link",{attrs:{to:"/chat"}},[e("el-button",[t._v(" 进入聊天 ")])],1)],1),e("span",{staticClass:"message",on:{click:function(e){return t.showMessageBox()}}},[e("el-badge",{attrs:{value:t.unread,max:99,hidden:!t.unread}},[e("i",{staticClass:"el-icon-chat-line-round f-24",attrs:{circle:""}})])],1),e("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[e("div",{staticClass:"lz-flex lz-align-items-center cur-handle"},[e("span",{staticClass:"avatar"},[e("img",{attrs:{src:t.$store.state.userInfo.avatar,alt:"avatar"}})]),e("span",{staticClass:"username"},[t._v(t._s(t.$store.state.userInfo.realname))]),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"profile"}},[t._v("个人信息")]),e("el-dropdown-item",{attrs:{command:"logout"}},[t._v("退出登录")])],1)],1)],1)])],1)],1),e("el-container",[e("el-aside",{staticClass:"main-aside",style:{width:t.asideWidth}},[e("div",{staticClass:"aside-menu"},[e("el-scrollbar",[e("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{border:"none"},attrs:{"default-active":t.active,mode:"vertical","ext-color":"#fff",collapse:t.isCollapse},on:{select:t.handleMenuSelect}},[t._l(t.routes,(function(s,i){return[e("el-menu-item",{key:i,attrs:{index:s.path}},[e("i",{class:s.meta.icon}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(s.meta.title))])])]}))],2)],1)],1),e("div",{staticClass:"aside-bottom",on:{click:t.handleCollapse}},[e("span",{staticClass:"el-icon-s-fold f-18"})])]),e("el-main",{staticStyle:{"background-color":"#f5f5f5",padding:"0"}},[e("el-scrollbar",[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view",{key:t.key})],1)],1)],1)],1)],1),e("Message",{ref:"Message",attrs:{dialogTableVisible:t.dialogTableVisible},on:{"update:dialogTableVisible":function(e){t.dialogTableVisible=e},"update:dialog-table-visible":function(e){t.dialogTableVisible=e}}})],1)},qe=[],Ge={name:"Index",components:{Message:be},data(){return{dialogTableVisible:!1,unread:0,allContacts:[],isCollapse:!1,asideWidth:"200px",active:"",routes:[]}},computed:{...(0,v.rn)({chatSocket:t=>t.unread,getContacts:t=>t.allContacts,globalConfig:t=>t.globalConfig}),key(){return this.$route.path}},watch:{chatSocket(t){this.unread=t},getContacts(t){this.allContacts=t},isCollapse(t){this.asideWidth=t?"65px":"200px"}},mounted(){this.isCollapse=r().get("isCollapse")||!1,this.active=this.$route.path;const t=this.$router.options.routes.filter((t=>"manage"==t.name));this.routes=t[0].children,window.addEventListener("resize",this.handleResize)},methods:{handleResize(){window.innerWidth<900?this.isCollapse=!0:this.isCollapse=!1},handleMenuSelect(t){this.active=t,this.$route.path!=t&&this.$router.push(t)},showMessageBox(){this.dialogTableVisible?this.dialogTableVisible=!1:this.dialogTableVisible=!0},handleCommand(t){"profile"==t?this.$user(this.$store.state.userInfo.user_id):this.$confirm("你确定要退出聊天室吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$store.dispatch("LogOut").then((()=>{this.$router.push({path:"/login"})}))})).catch((()=>{this.$message({type:"info",message:"已取消退出"})}))},handleCollapse(){this.isCollapse=!this.isCollapse,r().set("isCollapse",this.isCollapse)}}},He=Ge,We=(0,d.Z)(He,Ee,qe,!1,null,"482b879c",null),Ye=We.exports,Ze=[{path:"/manage",name:"manage",component:Ye,meta:{title:"管理"},icon:"el-icon-s-tools",children:[{path:"/manage/index",name:"index",component:()=>s.e(999).then(s.bind(s,7999)),meta:{title:"概况",icon:"el-icon-data-line"}},{path:"/manage/setting",name:"setting",component:()=>s.e(763).then(s.bind(s,1763)),meta:{title:"设置",icon:"el-icon-setting"}},{path:"/manage/user",name:"user",component:()=>s.e(737).then(s.bind(s,737)),meta:{title:"成员",icon:"el-icon-user"}},{path:"/manage/group",name:"group",component:()=>s.e(173).then(s.bind(s,4173)),meta:{title:"群聊",icon:"el-icon-chat-dot-square"}},{path:"/manage/files",name:"files",component:()=>s.e(567).then(s.bind(s,7567)),meta:{title:"文件",icon:"el-icon-folder-opened"}}]}];i["default"].use(U.ZP);const Xe=[{path:"/",name:"home",component:Te,meta:{title:"聊天"}},{path:"/chat",name:"chat",component:Te,meta:{title:"聊天演示页"}},{path:"/demo",name:"demo",component:ke,meta:{title:"演示页"}},{path:"/login",name:"login",component:Fe,meta:{title:"登录"}},{path:"/register",name:"register",component:Ve,meta:{title:"注册"}},{path:"*",redirect:"/404",hidden:!0},{path:"/404",component:()=>s.e(133).then(s.bind(s,4133)),hidden:!0}],Qe=()=>new U.ZP({mode:"hash",scrollBehavior:()=>({y:0}),routes:[...Xe,...Ze]}),Je=Qe();function ts(){const t=Qe();Je.matcher=t.matcher}var es=Je,ss=s(6265),is=s.n(ss);const as={loadingCache:function(){if(r().get("authToken")&&!is().defaults.headers.authToken){const t=r().get("UserInfo");t&&ks.commit("SET_USERINFO",t)}ks.commit("SET_APPNAME",r().get("systemName")),ks.commit("SET_APPLOGO",r().get("systemLogo"))},updateAxiosCache:function(){is().defaults.headers.authToken=r().get("authToken"),is().defaults.headers.sessionId=r().get("sessionId")},updateAxiosHeaders:function(){is().defaults.headers.authToken=r().get("authToken"),is().defaults.headers.sessionId=r().get("sessionId")},rmAxiosCache:function(){r().rm("authToken"),r().rm("sessionId")}};var ns=as;function os(){return new Promise(((t,e)=>{ns.rmAxiosCache(),delete is().defaults.headers.authToken,delete is().defaults.headers.sessionId,t(!0)}))}function rs(t,e){return new Promise(((s,i)=>{is().defaults.headers.authToken=t,is().defaults.headers.sessionId=e,s(!0)}))}function ls(){return r().get("authToken")&&!is().defaults.headers.authToken&&ns.updateAxiosCache(),!!r().get("authToken")}var cs=s(5410),ds=s.n(cs),us=s(9070);const ps=(0,us.debounce)(500,(()=>{os().then((()=>{location.reload()})).catch((()=>{location.reload()}))})),ms=(0,us.debounce)(500,((t,e="error")=>{(0,m.Message)({message:t,duration:1500,type:e})})),hs=(0,us.debounce)(1e3,(t=>{m.MessageBox.confirm(t,"提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning"}).then((()=>{ps()})).catch((()=>{}))}));is().defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";let gs=[];gs=-1!=window.location.href.indexOf("index.html")?window.location.href.split("index.html"):window.location.href.split("#");const fs=gs.length>0?gs[0]:window.location.href;window.location.protocol;window.BASE_URL=fs+"/";const vs=is().create({baseURL:window.BASE_URL,timeout:6e4});vs.baseURL=window.BASE_URL,vs.interceptors.request.use((t=>{const e=r().get("sessionId"),s=r().get("authToken");e&&s&&(t.headers["sessionId"]=e,t.headers["authToken"]=s);const i=t.headers["Content-Type"]&&-1!==t.headers["Content-Type"].indexOf("application/json");if(i)void 0!==t.data&&null!==t.data||(t.data={});else{const e=t.headers["Content-Type"]&&-1!==t.headers["Content-Type"].indexOf("multipart/form-data");t.data=e?t.data:ds().stringify(t.data)}return t}),(t=>Promise.reject(t))),vs.interceptors.response.use((t=>{const e=t.data;if(200!==t.status||"blob"!==t.config.responseType)return 0!==e.code?(-1===e.code?hs(e.msg):[400,402,403,404,405,502,500].includes(e.code)?ms(e.msg,"warning"):ms(e.msg),e):e;if(t.headers["content-disposition"]||t.headers["content-type"]&&-1!=t.headers["content-type"].indexOf("application/pdf"))return t;{const e=new Blob([t.data],{type:"application/json"}),s=new FileReader;s.onload=function(){const t=JSON.parse(this.result);t.msg&&ms(t.msg,1==t.code?"success":"error")},s.readAsText(e)}}),(t=>{if(t.response){const e=t.response;500==e.status?ms("网络错误，请检查您的网络"):e.data&&e.data.msg&&ms(e.data.msg)}return Promise.reject(t)}));var ws=vs;const Cs={loginAPI:t=>ws({url:"common/pub/login",method:"post",data:t}),logoutAPI:()=>ws({url:"common/pub/logout",method:"post"}),bindClientIdAPI:t=>ws({url:"common/pub/bindUid",method:"post",data:t}),offlineAPI:t=>ws({url:"common/pub/offline",method:"post",data:t}),bindGroupAPI:t=>ws({url:"common/pub/bindGroup",method:"post",data:t}),sendCode:t=>ws({url:"common/pub/sendCode",method:"post",data:t}),getSystemInfo:t=>ws({url:"common/pub/getSystemInfo",method:"post",data:t}),register:t=>ws({url:"common/pub/register",method:"post",data:t}),uploadAvatar:t=>ws({url:"common/upload/uploadAvatar",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})};var bs=Cs;i["default"].use(v.ZP);const _s={userInfo:null,allAuth:null,socketAction:"",contactSync:"",toContactId:0,unread:0,allContacts:[],globalConfig:[],setting:{sendKey:"1",theme:"default",isVoice:!0,avatarCricle:!1,hideMessageName:!1,hideMessageTime:!1}},ys={SET_USERINFO:(t,e)=>{r().set("UserInfo",e),t.userInfo=e,e.setting&&(t.setting=e.setting)},SET_AUTH:(t,e)=>{const s=e.authToken,i=e.sessionId;r().set("authToken",s),r().set("sessionId",i),rs(s,i)},catchSocketAction(t,e){t.socketAction=e},updateUnread:(t,e)=>{t.unread=parseInt(e)},initContacts:(t,e)=>{t.allContacts=e},openChat:(t,e)=>{t.toContactId=e,t.contactSync=Math.random().toString(36).substr(-8)},updateSetting(t,e){t.userInfo.setting=e,t.setting=e},setGlobalConfig(t,e){t.globalConfig=e}},xs={Login({commit:t,dispatch:e},s){return new Promise(((i,a)=>{bs.loginAPI(s).then((e=>{const s=e.data||s;t("SET_AUTH",s),t("SET_USERINFO",s.userInfo),i(e)})).catch((t=>{e("LogOut"),a(t)}))}))},LogOut({commit:t}){return new Promise(((t,e)=>{bs.logoutAPI().then((()=>{r().rm("authToken"),r().rm("sessionId"),r().rm("UserInfo"),os(),ts(),t()})).catch((t=>{e(t)}))}))},getSystemInfo({commit:t}){return new Promise(((e,s)=>{bs.getSystemInfo().then((s=>{0==s.code&&(r().set("globalConfig",s.data),t("setGlobalConfig",s.data),e(s))})).catch((t=>{s(t)}))}))},sendCode({commit:t},e){return new Promise(((t,s)=>{bs.sendCode(e).then((e=>{t(e)})).catch((t=>{s(t)}))}))}};var ks=new v.ZP.Store({state:_s,mutations:ys,actions:xs}),Is=s(5602),Ss=s.n(Is),$s=s(1081);i["default"].directive("outside",$s.Z);var Ms=s(530),As=s.n(Ms);const Ds=["/login","/register"],Ts=["/","/demo","/chat"];es.beforeEach(((t,e,s)=>{if(t.meta.disabled)s(!1);else if(As().start(),ls()){let e=r().get("globalConfig"),i=e.demon_mode,a="";i&&(a="/demo");let n=r().get("UserInfo");Ds.includes(t.path)||"/"==t.path&&a?(s({path:a}),As().done()):Ts.includes(t.path)&&0==e.sysInfo.state?(n&&n.role>0||i?s({path:"/manage/index"}):s({path:"/404",query:{msg:e.sysInfo.closeTips}}),As().done()):-1!==t.path.indexOf("manage")?n&&n.role>0||i?s():(m.Message.error("您没有权限访问该页面"),s(!1),As().done()):s()}else-1!==Ds.indexOf(t.path)?s():(s("/login"),As().done())})),es.afterEach((()=>{As().done()})),es.onError((t=>{const e=/Loading chunk (\d)+ failed/g,s=t.message.match(e),i=es.history.pending.fullPath;s&&es.replace(i)}));var Us,Os,Ps,js,Ls=JSON.parse('{"name":"Raingad-IM","version":"2.7.20","description":"一款基于vue2.0的即时聊天工具","logo":"https://im.file.raingad.com/logo/logo.png","frontUrl":"https://gitee.com/raingad/im-chat-front","backstageUrl":"https://gitee.com/raingad/im-instant-chat","mobileUrl":"https://im.raingad.com/h5","author":"Raingad","license":"Apache2.0","qqGroupUrl":"https://jq.qq.com/?_wv=1027&k=jMQAt9lh","private":true,"funcList":[{"icon":"el-icon-chat-line-round","text":"支持单聊和群聊，支持发送表情、图片、语音、视频和文件消息"},{"icon":"el-icon-potato-strips","text":"单聊支持消息已读未读的状态显示，在线状态显示"},{"icon":"el-icon-user","text":"群聊创建、删除和群成员管理、群公告、群禁言等"},{"icon":"el-icon-ice-cream-round","text":"支持置顶联系人，消息免打扰；支持设置新消息声音提醒，浏览器通知"},{"icon":"el-icon-video-camera","text":"支持一对一音视频通话（和移动端不互通）"},{"icon":"el-icon-milk-tea","text":"支持文件、图片和绝大部分媒体文件在线预览"},{"icon":"el-icon-mobile-phone","text":"支持移动端（H5和APP），支持简易后台管理"},{"icon":"el-icon-coffee-cup","text":"全新支持企业模式和社区模式，社区模式支持添加好友功能"}],"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","lint":"vue-cli-service lint"},"dependencies":{"axios":"^0.21.4","core-js":"^3.8.3","cropperjs":"^1.5.13","element-ui":"^2.15.13","js-audio-recorder":"^1.0.7","lemon-imui":"^1.7.7","lockr":"^0.8.5","nprogress":"^0.2.0","v-clipboard":"^2.2.3","vue":"^2.6.14","vue-qr":"^4.0.9","vue-router":"^3.5.1","vuex":"^3.6.2"},"devDependencies":{"@babel/core":"^7.12.16","@babel/eslint-parser":"^7.12.16","@vue/cli-plugin-babel":"~5.0.0","@vue/cli-plugin-eslint":"~5.0.0","@vue/cli-plugin-router":"~5.0.0","@vue/cli-plugin-vuex":"~5.0.0","@vue/cli-service":"~5.0.0","eslint":"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-vue":"^8.0.3","prettier":"^2.4.1","sass":"^1.32.7","sass-loader":"^12.0.0","vue-template-compiler":"^2.6.14"},"rules":{"generator-star-spacing":"off","no-tabs":"off","no-unused-vars":"off","no-console":"off","no-irregular-whitespace":"off","no-debugger":"off"}}'),Fs=s(8701),Ns=s.n(Fs),Ks={name:"lemonMessageVoice",inheritAttrs:!1,inject:["IMUI"],render(){const t=arguments[0];return t("lemon-message-basic",Ns()([{class:"lemon-message-voice"},{props:{...this.$attrs}},{attrs:{reverse:this.$attrs.reverse,message:this.$attrs.message,hideName:this.$attrs.hideName,hideTime:this.$attrs.hideTime},scopedSlots:{content:e=>t("div",{class:["voice-card lz-flex lz-justify-content-start lz-align-items-center",{"im-rows-reverse":this.$attrs.reverse}],style:{width:3*e.extends.duration+"px"}},[t("div",{class:["iconfont icon-im-yuyin f-16",{"voice-icon":e.isPlay},{rotate180:this.$attrs.reverse}]}),"  ",t("div",[e.extends.duration,'"'])])}}]))}},Rs=Ks,Bs=(0,d.Z)(Rs,Us,Os,!1,null,null,null),zs=Bs.exports,Vs={name:"lemonMessageVideo",inheritAttrs:!1,inject:["IMUI"],render(){const t=arguments[0];return t("lemon-message-basic",Ns()([{class:"lemon-message-video"},{props:{...this.$attrs}},{attrs:{reverse:this.$attrs.reverse,message:this.$attrs.message,hideName:this.$attrs.hideName,hideTime:this.$attrs.hideTime},scopedSlots:{content:e=>t("div",{class:["video-card"],style:{}},[t("el-image",{style:"max-height: 200px",attrs:{src:e.extends.poster,fit:"cover"}},[t("div",{slot:"error",class:"image-slot"},[t("i",{class:"el-icon-picture-outline"})])]),e.extends.duration,t("div",{class:"video-shadow"},[t("div",{class:"el-icon el-icon-video-play c-white f-28 video-icon"})])])}}]))}},Es=Vs,qs=(0,d.Z)(Es,Ps,js,!1,null,null,null),Gs=qs.exports;const Hs={getTaskList:t=>ws({url:"/manage/Task/getTaskList",method:"post",data:t}),startTask:t=>ws({url:"/manage/Task/startTask",method:"post",data:t}),stopTask:t=>ws({url:"/manage/Task/stopTask",method:"post",data:t}),getTaskLog:t=>ws({url:"/manage/Task/getTaskLog",method:"post",data:t}),clearTaskLog:t=>ws({url:"/manage/Task/clearTaskLog",method:"post",data:t})};var Ws=Hs;const Ys={setConfig:t=>ws({url:"manage/config/setConfig",method:"post",data:t}),getConfig:t=>ws({url:"manage/config/getConfig",method:"post",data:t}),getAllConfig:t=>ws({url:"manage/config/getAllConfig",method:"post",data:t}),getInviteLink:t=>ws({url:"manage/config/getInviteLink",method:"post",data:t}),sendTestEmail:t=>ws({url:"manage/config/sendTestEmail",method:"post",data:t})};var Zs=Ys;const Xs={getUserList:t=>ws({url:"/manage/User/index",method:"post",data:t}),addUser:t=>ws({url:"/manage/User/add",method:"post",data:t}),editUser:t=>ws({url:"/manage/User/edit",method:"post",data:t}),delUser:t=>ws({url:"/manage/User/del",method:"post",data:t}),getUserDetail:t=>ws({url:"/manage/User/detail",method:"post",data:t}),editPassword:t=>ws({url:"/manage/User/editPassword",method:"post",data:t}),setStatus:t=>ws({url:"/manage/User/setStatus",method:"post",data:t}),setRole:t=>ws({url:"/manage/User/setRole",method:"post",data:t})};var Qs=Xs;const Js={getGroupList:t=>ws({url:"/manage/Group/index",method:"post",data:t}),addGroupUser:t=>ws({url:"/manage/Group/addGroupUser",method:"post",data:t}),delGroupUser:t=>ws({url:"/manage/Group/delGroupUser",method:"post",data:t}),changeOwner:t=>ws({url:"/manage/Group/changeOwner",method:"post",data:t}),setManager:t=>ws({url:"/manage/Group/setManager",method:"post",data:t}),delGroup:t=>ws({url:"/manage/Group/del",method:"post",data:t})};var ti=Js;const ei={getContactsAPI:t=>ws({url:"enterprise/im/getContacts",method:"post",data:t}),sendMessageAPI:t=>ws({url:"enterprise/im/sendMessage",method:"post",data:t}),forwardMessageAPI:t=>ws({url:"enterprise/im/forwardMessage",method:"post",data:t}),sendFileAPI:t=>ws({url:"common/upload/uploadFile",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}}),getMessageListAPI:t=>ws({url:"enterprise/im/getMessageList",method:"post",data:t}),setMsgIsReadAPI:t=>ws({url:"enterprise/im/setMsgIsRead",method:"post",data:t}),undoMessageAPI:t=>ws({url:"enterprise/im/undoMessage",method:"post",data:t}),removeMessageAPI:t=>ws({url:"enterprise/im/removeMessage",method:"post",data:t}),settingAPI:t=>ws({url:"enterprise/im/setting",method:"post",data:t}),editGroupNameAPI:t=>ws({url:"enterprise/group/editGroupName",method:"post",data:t}),groupUserListAPI:t=>ws({url:"enterprise/group/groupuserlist",method:"post",data:t}),getAllUserAPI:t=>ws({url:"enterprise/group/getAllUser",method:"post",data:t}),addGroupAPI:t=>ws({url:"enterprise/group/add",method:"post",data:t}),setManagerAPI:t=>ws({url:"enterprise/group/setManager",method:"post",data:t}),removeUserAPI:t=>ws({url:"enterprise/group/removeUser",method:"post",data:t}),addGroupUserAPI:t=>ws({url:"enterprise/group/addGroupUser",method:"post",data:t}),removeGrouprAPI:t=>ws({url:"enterprise/group/removeGroup",method:"post",data:t}),setNoticeAPI:t=>ws({url:"enterprise/group/setNotice",method:"post",data:t}),groupSettingAPI:t=>ws({url:"enterprise/group/groupSetting",method:"post",data:t}),getGroupInfoAPI:t=>ws({url:"enterprise/group/groupInfo",method:"post",data:t}),isNoticeAPI:t=>ws({url:"enterprise/im/isNotice",method:"post",data:t}),setChatTopAPI:t=>ws({url:"enterprise/im/setChatTop",method:"post",data:t}),getUserInfo:t=>ws({url:"enterprise/im/getUserInfo",method:"post",data:t}),getFileList:t=>ws({url:"enterprise/files/index",method:"post",data:t}),updateUserInfo:t=>ws({url:"enterprise/im/updateUserInfo",method:"post",data:t}),editAccount:t=>ws({url:"enterprise/im/editAccount",method:"post",data:t}),editPassword:t=>ws({url:"enterprise/im/editpassword",method:"post",data:t}),searchUser:t=>ws({url:"enterprise/im/searchUser",method:"post",data:t})};var si=ei;const ii={getApplyList:t=>ws({url:"enterprise/friend/index",method:"post",data:t}),addFriend:t=>ws({url:"enterprise/friend/add",method:"post",data:t}),delFriend:t=>ws({url:"enterprise/friend/del",method:"post",data:t}),acceptFriend:t=>ws({url:"enterprise/friend/update",method:"post",data:t}),setNickname:t=>ws({url:"enterprise/friend/setNickname",method:"post",data:t}),getApplyMsg:t=>ws({url:"enterprise/friend/getApplyMsg",method:"post",data:t})};var ai=ii,ni={taskApi:Ws,configApi:Zs,userApi:Qs,groupApi:ti,imApi:si,commonApi:bs,friendApi:ai};i["default"].use(y),i["default"].use(A),i["default"].use(h(),{size:"small"}),i["default"].use(T()),i["default"].use(ks),i["default"].use(Ss()),i["default"].config.productionTip=!1,i["default"].prototype.$packageData=Ls,i["default"].component(Gs.name,Gs),i["default"].component(zs.name,zs),i["default"].prototype.$api=ni,new i["default"]({el:"#app",router:es,store:ks,components:{App:p},template:"<App/>"})},3817:function(t,e,s){"use strict";function i(t){let e=new Array(" B"," KB"," MB"," GB"," TB"),s=t+"B";for(let i=0;t>=1024&&i<4;i++)t/=1024,s=t.toFixed(2)+e[i+1];return s}function a(t){var e="https://file.lcoce.com/ext/",s=t.split("."),i=s[s.length-1],a=i.toUpperCase(),n=["jpg","jpeg","png","bmp","gif","pdf","mp3","wav","wmv","amr","mp4","3gp","avi","m2v","mkv","mov","webp","ppt","pptx","doc","docx","xls","xlsx","pdf"];return n.includes(a)?e+a+".png":e+"icon/document.svg"}function n(t,e){let s=document.createElement("a"),i=t.split(".").pop(),a=["jpg","jpeg","png","bmp","gif","pdf","mp3","wav","wmv","amr","mp4","3gp","avi","m2v","mkv","mov","webp"];-1!==a.indexOf(i)?s.download=e||"pic":s.download=e||"file",s.href=t,s.click()}s.d(e,{AC:function(){return a},LR:function(){return n},hR:function(){return i}})},2325:function(t,e,s){"use strict";s.d(e,{L4:function(){return o},NW:function(){return c},Nj:function(){return a},hT:function(){return l},i$:function(){return r},iu:function(){return i},pH:function(){return n}});s(2801),s(7658),s(3408),s(4590);function i(t,e,s){if("object"!==typeof t)return!1;for(var i=[],a=0;t.length>a;a++)if("object"==typeof e)for(var n=0;e.length>n;n++){var o=e[n],r=t[a][o];if(-1!=r.indexOf(s)){i.push(t[a]);break}}else{r=t[a][e];-1!=r.indexOf(s)&&i.push(t[a])}return i}function a(t,e,s){s="undefined"!==typeof s&&s;for(var i=[],a=0;a<t.length;a++)i.push(t[a][e]);return!0===s?i.join(","):i}function n(t,e,s){for(var i=0;i<t.length;i++)t[i][e]==s&&t.splice(i,1);return t}function o(t,e,s){for(var i=0;i<t.length;i++)t[i]["disabled"]=!1,t[i][e]==s&&(t[i]["disabled"]=!0);return t}function r(t){const e=new Date,s=new Date(t),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),a=new Date(i-864e5),n=new Date(i-24*(i.getDay()-1)*60*60*1e3),o=new Date(e.getFullYear(),0,1);if(s>=i)return l("H:i",t/1e3);if(s>=a&&s<i)return"昨天";if(s>=n&&s<a){const t=["周日","周一","周二","周三","周四","周五","周六"],e=t[s.getDay()];return e}return l(s>=o&&s<n?"m-d":"Y-m-d",t/1e3)}function l(t,e){var s=e?new Date(1e3*e):new Date,i=function(t,e){return(t+="").length<e?new Array(++e-t.length).join("0")+t:t},a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"},o=["","January","February","March","April","May","June","July","August","September","October","November","December"],r={d:function(){return i(r.j(),2)},D:function(){return r.l().substr(0,3)},j:function(){return s.getDate()},l:function(){return a[r.w()]},N:function(){return r.w()+1},S:function(){return n[r.j()]?n[r.j()]:"th"},w:function(){return s.getDay()},z:function(){return(s-new Date(s.getFullYear()+"/1/1"))/864e5>>0},W:function(){var t,e=r.z(),i=364+r.L()-e,a=(new Date(s.getFullYear()+"/1/1").getDay()||7)-1;return i<=2&&(s.getDay()||7)-1<=2-i?1:e<=2&&a>=4&&e>=6-a?(t=new Date(s.getFullYear()-1+"/12/31"),l("W",Math.round(t.getTime()/1e3))):1+(a<=3?(e+a)/7:(e-(7-a))/7)>>0},F:function(){return o[r.n()]},m:function(){return i(r.n(),2)},M:function(){return r.F().substr(0,3)},n:function(){return s.getMonth()+1},t:function(){var t;return 2===(t=s.getMonth()+1)?28+r.L():1&t&&t<8||!(1&t)&&t>7?31:30},L:function(){var t=r.Y();return 3&t||!(t%100)&&t%400?0:1},Y:function(){return s.getFullYear()},y:function(){return(s.getFullYear()+"").slice(2)},a:function(){return s.getHours()>11?"pm":"am"},A:function(){return r.a().toUpperCase()},B:function(){var t=60*(s.getTimezoneOffset()+60),e=3600*s.getHours()+60*s.getMinutes()+s.getSeconds()+t,i=Math.floor(e/86.4);return i>1e3&&(i-=1e3),i<0&&(i+=1e3),1===String(i).length&&(i="00"+i),2===String(i).length&&(i="0"+i),i},g:function(){return s.getHours()%12||12},G:function(){return s.getHours()},h:function(){return i(r.g(),2)},H:function(){return i(s.getHours(),2)},i:function(){return i(s.getMinutes(),2)},s:function(){return i(s.getSeconds(),2)},O:function(){var t=i(Math.abs(s.getTimezoneOffset()/60*100),4);return t=s.getTimezoneOffset()>0?"-"+t:"+"+t,t},P:function(){var t=r.O();return t.substr(0,3)+":"+t.substr(3,2)},c:function(){return r.Y()+"-"+r.m()+"-"+r.d()+"T"+r.h()+":"+r.i()+":"+r.s()+r.P()},U:function(){return Math.round(s.getTime()/1e3)}};let c="";return t.replace(/[\\]?([a-zA-Z])/g,(function(t,e){return c=t!==e?e:r[e]?r[e]():e,c}))}function c(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var s=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?s:3&s|8).toString(16)}));return e}},444:function(t,e,s){"use strict";t.exports=s.p+"assets/media/notify.3d49176d.mp3"},1315:function(t,e,s){"use strict";t.exports=s.p+"assets/media/notify.7668dd76.ogg"},8611:function(t,e,s){"use strict";t.exports=s.p+"assets/media/notify.e6953ff1.wav"},4654:function(){}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=t,function(){s.amdO={}}(),function(){var t=[];s.O=function(e,i,a,n){if(!i){var o=1/0;for(d=0;d<t.length;d++){i=t[d][0],a=t[d][1],n=t[d][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(r=!1,n<o&&(o=n));if(r){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[i,a,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,i){return s.f[i](t,e),e}),[]))}}(),function(){s.u=function(t){return"assets/js/"+t+"."+{133:"3a1dfa9e",173:"a95b2316",567:"9401aef7",737:"0c6208ec",763:"f90c41e2",999:"3695ec78"}[t]+".js"}}(),function(){s.miniCssF=function(t){return"assets/css/"+t+"."+{133:"7f9367b6",173:"fc941ab9",567:"08ec972a",737:"135748c2",763:"faca068f",999:"6c0950b3"}[t]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="Raingad-IM:";s.l=function(i,a,n,o){if(t[i])t[i].push(a);else{var r,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==e+n){r=u;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.setAttribute("data-webpack",e+n),r.src=i),t[i]=[a];var p=function(e,s){r.onerror=r.onload=null,clearTimeout(m);var a=t[i];if(delete t[i],r.parentNode&&r.parentNode.removeChild(r),a&&a.forEach((function(t){return t(s)})),e)return e(s)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){s.p=""}(),function(){var t=function(t,e,s,i){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var n=function(n){if(a.onerror=a.onload=null,"load"===n.type)s();else{var o=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=r,a.parentNode.removeChild(a),i(l)}};return a.onerror=a.onload=n,a.href=e,document.head.appendChild(a),a},e=function(t,e){for(var s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var a=s[i],n=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(n===t||n===e))return a}var o=document.getElementsByTagName("style");for(i=0;i<o.length;i++){a=o[i],n=a.getAttribute("data-href");if(n===t||n===e)return a}},i=function(i){return new Promise((function(a,n){var o=s.miniCssF(i),r=s.p+o;if(e(o,r))return a();t(i,r,a,n)}))},a={143:0};s.f.miniCss=function(t,e){var s={133:1,173:1,567:1,737:1,763:1,999:1};a[t]?e.push(a[t]):0!==a[t]&&s[t]&&e.push(a[t]=i(t).then((function(){a[t]=0}),(function(e){throw delete a[t],e})))}}(),function(){var t={143:0};s.f.j=function(e,i){var a=s.o(t,e)?t[e]:void 0;if(0!==a)if(a)i.push(a[2]);else{var n=new Promise((function(s,i){a=t[e]=[s,i]}));i.push(a[2]=n);var o=s.p+s.u(e),r=new Error,l=function(i){if(s.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var n=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;r.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",r.name="ChunkLoadError",r.type=n,r.request=o,a[1](r)}};s.l(o,l,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,n,o=i[0],r=i[1],l=i[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var d=l(s)}for(e&&e(i);c<o.length;c++)n=o[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},i=self["webpackChunkRaingad_IM"]=self["webpackChunkRaingad_IM"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(5457)}));i=s.O(i)})();